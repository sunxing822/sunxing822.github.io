<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  




<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="sunxing&apos;s blog | mysql | java | scala | hadoop | spark | kafka | flume">
<meta property="og:type" content="website">
<meta property="og:title" content="孙星的个人博客~">
<meta property="og:url" content="http://www.sunxing.cc/page/8/index.html">
<meta property="og:site_name" content="孙星的个人博客~">
<meta property="og:description" content="sunxing&apos;s blog | mysql | java | scala | hadoop | spark | kafka | flume">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="孙星的个人博客~">
<meta name="twitter:description" content="sunxing&apos;s blog | mysql | java | scala | hadoop | spark | kafka | flume">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>
 <script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1258995301'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s11.cnzz.com/z_stat.php%3Fid%3D1258995301' type='text/javascript'%3E%3C/script%3E"));</script>

  <title> 孙星的个人博客~ </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">孙星的个人博客~</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">搬砖的,码农~</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-tags fa-fw"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/06/12/hbase-study008/" itemprop="url">
                  HBase学习笔记(八) Phoenix的JDBC操作
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-06-12T15:55:55+08:00" content="2016-06-12">
              2016-06-12
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/hbase/" itemprop="url" rel="index">
                    <span itemprop="name">hbase</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/06/12/hbase-study008/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/06/12/hbase-study008/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="1-Phoenix的增删改查jdbc操作"><a href="#1-Phoenix的增删改查jdbc操作" class="headerlink" title="1 Phoenix的增删改查jdbc操作"></a>1 Phoenix的增删改查jdbc操作</h2><p>代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div></pre></td><td class="code"><pre><div class="line">import java.sql.Connection;</div><div class="line">import java.sql.DriverManager;</div><div class="line">import java.sql.PreparedStatement;</div><div class="line">import java.sql.ResultSet;</div><div class="line"></div><div class="line">public class PhoenixManager &#123;</div><div class="line"></div><div class="line">    /**</div><div class="line">     *</div><div class="line">     * @param args</div><div class="line">     */</div><div class="line">    public static void main(String[] args) throws Exception&#123;</div><div class="line">        test_connect();</div><div class="line"></div><div class="line">        test();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 获取连接对象</div><div class="line">     * @return</div><div class="line">     * @throws Exception</div><div class="line">     */</div><div class="line">    public static Connection connect() throws Exception&#123;</div><div class="line">        Class.forName(&quot;org.apache.phoenix.jdbc.PhoenixDriver&quot;);</div><div class="line"></div><div class="line">        //jdbc的url类似为:jdbc:phoenix[:&lt;zookeeper quorum&gt;[:&lt;port number&gt;][:&lt;root node&gt;]]</div><div class="line">        //需要引用这三个参数,hbase.zookeeper.quorum,hbase.zookeeper.property.clientPort,zookeeper.znode.parent</div><div class="line">        //这些数据可以缺省不填,而在hbase-site.xml中定义</div><div class="line">        return DriverManager.getConnection(&quot;jdbc:phoenix:127.0.0.1:8070&quot;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 创建表</div><div class="line">     */</div><div class="line">    public static void create() throws Exception&#123;</div><div class="line">        Connection conn = connect();</div><div class="line"></div><div class="line">        String create_sql = &quot;create table if not exists test(id integer primary key,age integer,name varchar(50))&quot;;</div><div class="line"></div><div class="line">        PreparedStatement pstmt = conn.prepareStatement(create_sql);</div><div class="line">        pstmt.execute();</div><div class="line"></div><div class="line">        pstmt.close();</div><div class="line">        conn.close();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 插入数据</div><div class="line">     * @throws Exception</div><div class="line">     */</div><div class="line">    public static void insert() throws  Exception&#123;</div><div class="line">        Connection conn = connect();</div><div class="line"></div><div class="line">        String insert_sql = &quot;upsert into test values(1,1,&apos;sunxing&apos;)&quot;;</div><div class="line"></div><div class="line">        PreparedStatement pstmt = conn.prepareStatement(insert_sql);</div><div class="line">        int cnt = pstmt.executeUpdate();</div><div class="line"></div><div class="line">        if(cnt &lt;= 0)&#123;</div><div class="line">            System.out.println(&quot;插入数据失败...&quot;);</div><div class="line">        &#125;else&#123;</div><div class="line">            System.out.println(&quot;插入数据成功...&quot;);</div><div class="line">        &#125;</div><div class="line">        conn.commit();</div><div class="line">        pstmt.close();</div><div class="line">        conn.close();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 查询数据</div><div class="line">     * @throws Exception</div><div class="line">     */</div><div class="line">    public static void select() throws  Exception&#123;</div><div class="line">        Connection conn = connect();</div><div class="line"></div><div class="line">        String select_sql = &quot;select * from test&quot;;</div><div class="line"></div><div class="line">        PreparedStatement pstmt = conn.prepareStatement(select_sql);</div><div class="line">        ResultSet rs = pstmt.executeQuery();</div><div class="line"></div><div class="line">        while(rs.next())&#123;</div><div class="line">            int id = rs.getInt(1);</div><div class="line">            int age = rs.getInt(2);</div><div class="line">            String name = rs.getString(3);</div><div class="line"></div><div class="line">            System.out.println(id + &quot;\t&quot; + age + &quot;\t&quot; + name);</div><div class="line">        &#125;</div><div class="line">        rs.close();</div><div class="line">        pstmt.close();</div><div class="line">        conn.close();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public static void test_connect() throws Exception &#123;</div><div class="line">        Connection conn = connect();</div><div class="line"></div><div class="line">        System.out.println(conn.isClosed() + &quot;\t&quot; + conn);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public static void test() throws Exception&#123;</div><div class="line">        //先建表</div><div class="line">        create();</div><div class="line"></div><div class="line">        //插入数据</div><div class="line">        insert();</div><div class="line"></div><div class="line">        //将数据查询出来并展示</div><div class="line">        select();</div><div class="line"></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>查看建表语句是否成功:</p>
<p><img src="/images/phoenix/phoenix-jdbc-create.png" alt=""></p>
<p>执行代码后的打印语句截图如下:<br><img src="/images/phoenix/phoenix-jdbc-exectue.png" alt=""></p>
<p>通过上面的代码操作可以看出基本没有改变什么,需要注意的一下几点:<br>1 插入数据后需要提交一次,也就是connect.commit()<br>2 插入和更新的操作使用upsert</p>
<p>其他的和数据库的链接操作一样~</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/06/12/hbase-study007/" itemprop="url">
                  HBase学习笔记(七) Phoenix的CURD操作
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-06-12T11:55:55+08:00" content="2016-06-12">
              2016-06-12
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/hbase/" itemprop="url" rel="index">
                    <span itemprop="name">hbase</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/06/12/hbase-study007/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/06/12/hbase-study007/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="1-查询"><a href="#1-查询" class="headerlink" title="1 查询"></a>1 查询</h2><p><img src="/images/phoenix/phoenix-gm-select.png" alt=""></p>
<p><img src="/images/phoenix/phoenix-test-select.png" alt=""></p>
<h2 id="2-插入数据"><a href="#2-插入数据" class="headerlink" title="2 插入数据"></a>2 插入数据</h2><p>1 普通插入数据</p>
<p><img src="/images/phoenix/phoenix-gm-upsert.png" alt=""></p>
<p><img src="/images/phoenix/phoenix-gm-upsert-demo.png" alt=""></p>
<p>2 组合插入数据</p>
<p><img src="/images/phoenix/phoenix-gm-upselect.png" alt=""></p>
<p><img src="/images/phoenix/phoenix-gm-upselect-rs.png" alt=""></p>
<h2 id="3-删除数据"><a href="#3-删除数据" class="headerlink" title="3 删除数据"></a>3 删除数据</h2><p><img src="/images/phoenix/phoenix-gm-delete.png" alt=""></p>
<p><img src="/images/phoenix/phoenix-gm-delte-rs.png" alt=""></p>
<h2 id="4-创建表"><a href="#4-创建表" class="headerlink" title="4 创建表"></a>4 创建表</h2><p><img src="/images/phoenix/phoenix-gm-create.png" alt=""></p>
<p><img src="/images/phoenix/phoenix-gm-drop-table.png" alt=""></p>
<h2 id="5-修改表"><a href="#5-修改表" class="headerlink" title="5 修改表"></a>5 修改表</h2><p><img src="/images/phoenix/phoenix-gm-alter.png" alt=""></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/06/12/hbase-study006/" itemprop="url">
                  HBase学习笔记(六) Phoenix的安装使用
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-06-12T09:55:55+08:00" content="2016-06-12">
              2016-06-12
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/hbase/" itemprop="url" rel="index">
                    <span itemprop="name">hbase</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/06/12/hbase-study006/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/06/12/hbase-study006/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>Phoenix查询引擎会将SQL查询转换为一个或多个HBase scan，并编排执行以生成标准的JDBC结果集。直接使用HBase API、协同处理器与自定义过滤器，对于简单查询来说，其性能量级是毫秒，对于百万级别的行数来说，其性能量级是秒。</p>
</blockquote>
<p>Phoenix的特性:</p>
<pre><code>* 嵌入式的JDBC驱动，实现了大部分的java.sql接口，包括元数据API
* 可以通过多部行键或是键/值单元对列进行建模
* 完善的查询支持，可以使用多个谓词以及优化的扫描键
* DDL支持：通过CREATE TABLE、DROP TABLE及ALTER TABLE来添加/删除列
* 版本化的模式仓库：当写入数据时，快照查询会使用恰当的模式
* DML支持：用于逐行插入的UPSERT VALUES、用于相同或不同表之间大量数据传输的UPSERT SELECT、用于删除行的DELETE
* 通过客户端的批处理实现的有限的事务支持
* 单表——还没有连接，同时二级索引也在开发当中
* 紧跟ANSI SQL标准
</code></pre><h2 id="1-Phoenix的安装"><a href="#1-Phoenix的安装" class="headerlink" title="1 Phoenix的安装"></a>1 Phoenix的安装</h2><p>下载安装包:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">//下载数据</div><div class="line">wget http://mirrors.hust.edu.cn/apache/phoenix/phoenix-4.7.0-HBase-1.1/bin/phoenix-4.7.0-HBase-1.1-bin.tar.gz</div><div class="line"></div><div class="line">//解压数据</div><div class="line">tar -zxvf phoenix-4.7.0-HBase-1.1-bin.tar.gz</div></pre></td></tr></table></figure>
<p>将解压后的文件中phoenix-4.7.0-HBase-1.1-server.jar拷贝到所有RegionServer的lib目录下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">scp phoenix-4.7.0-HBase-1.1-server.jar root@hadoop-slave:/data/hbase1.2.0/lib/</div></pre></td></tr></table></figure>
<p>重新启动hbase进行验证是否安装成功:</p>
<p><img src="/images/phoenix/phoenix-link.png" alt=""></p>
<p><img src="/images/phoenix/phoenix-table.png" alt=""></p>
<h2 id="2-Phoenix-in-15minutes-or-less"><a href="#2-Phoenix-in-15minutes-or-less" class="headerlink" title="2 Phoenix in 15minutes or less"></a>2 Phoenix in 15minutes or less</h2><p>创建一个sql脚本,其中脚本中的内容为一个建表语句的定义,具体的如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">create_table.sql</div><div class="line"></div><div class="line">create table if not exists test_table(</div><div class="line">	state char(1) not null,</div><div class="line">	city varchar not null,</div><div class="line">	population bigint,</div><div class="line">	constraint my_pk primary key (state,city)</div><div class="line">);</div></pre></td></tr></table></figure>
<p>创建一个csv,包含部分数据用于插入到表中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">test_table.csv</div><div class="line"></div><div class="line">N,New York,1</div><div class="line">B,Bei Jing,2</div><div class="line">S,Shang Hai,3</div><div class="line">N,Nan Jing,4</div><div class="line">B,Bai Jie,5</div></pre></td></tr></table></figure>
<p>创建一个用于统计查询的sql:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">create_table_count.sql</div><div class="line"></div><div class="line">select </div><div class="line">     state as &quot;State&quot;,</div><div class="line">     count(city) as &quot;City Count&quot;,</div><div class="line">     sum(population) as &quot;Population Sum&quot;</div><div class="line">from test_table</div><div class="line">group by state</div><div class="line">order by sum(population) desc;</div></pre></td></tr></table></figure>
<p>执行命令:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">./psql.py hadoopmaster:2181 create_table.sql create_table.csv create_table_count.sql</div></pre></td></tr></table></figure>
<p>执行结果截图如下:</p>
<p><img src="/images/phoenix/phoenix-test.png" alt=""></p>
<p>其中在调用的时候csv的文件名要和表名称相对应,否则会报错</p>
<p>查看表中的数据：</p>
<p><img src="/images/phoenix/phoenix-test-list.png" alt=""></p>
<p><img src="/images/phoenix/phoenix-test-select.png" alt=""></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/06/08/hbase-study005/" itemprop="url">
                  HBase学习笔记(五) HBase与MapReduce的集成
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-06-08T11:55:55+08:00" content="2016-06-08">
              2016-06-08
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/hbase/" itemprop="url" rel="index">
                    <span itemprop="name">hbase</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/06/08/hbase-study005/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/06/08/hbase-study005/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>以下内容摘抄与官网文档中</p>
<h2 id="1-HBase-MapReduce-Read-Example"><a href="#1-HBase-MapReduce-Read-Example" class="headerlink" title="1 HBase MapReduce Read Example"></a>1 HBase MapReduce Read Example</h2><p>The following is an example of using HBase as a MapReduce source in read-only manner. Specifically, there is a Mapper instance but no Reducer, and nothing is being emitted from the Mapper. The job would be defined as follows…​</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">Configuration config = HBaseConfiguration.create();</div><div class="line">Job job = new Job(config, &quot;ExampleRead&quot;);</div><div class="line">job.setJarByClass(MyReadJob.class);     // class that contains mapper</div><div class="line"></div><div class="line">Scan scan = new Scan();</div><div class="line">scan.setCaching(500);        // 1 is the default in Scan, which will be bad for MapReduce jobs</div><div class="line">scan.setCacheBlocks(false);  // don&apos;t set to true for MR jobs</div><div class="line">// set other scan attrs</div><div class="line">...</div><div class="line"></div><div class="line">TableMapReduceUtil.initTableMapperJob(</div><div class="line">  tableName,        // input HBase table name</div><div class="line">  scan,             // Scan instance to control CF and attribute selection</div><div class="line">  MyMapper.class,   // mapper</div><div class="line">  null,             // mapper output key</div><div class="line">  null,             // mapper output value</div><div class="line">  job);</div><div class="line">job.setOutputFormatClass(NullOutputFormat.class);   // because we aren&apos;t emitting anything from mapper</div><div class="line"></div><div class="line">boolean b = job.waitForCompletion(true);</div><div class="line">if (!b) &#123;</div><div class="line">  throw new IOException(&quot;error with job!&quot;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>the mapper instance would extend TableMapper</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">public static class MyMapper extends TableMapper&lt;Text, Text&gt; &#123;</div><div class="line"></div><div class="line">  public void map(ImmutableBytesWritable row, Result value, Context context) throws InterruptedException, IOException &#123;</div><div class="line">    // process data for the row from the Result instance.</div><div class="line">   &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="2-HBase-MapReduce-Read-Write-Example"><a href="#2-HBase-MapReduce-Read-Write-Example" class="headerlink" title="2 HBase MapReduce Read/Write Example"></a>2 HBase MapReduce Read/Write Example</h2><p>The following is an example of using HBase both as a source and as a sink with MapReduce. This example will simply copy data from one table to another.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">Configuration config = HBaseConfiguration.create();</div><div class="line">Job job = new Job(config,&quot;ExampleReadWrite&quot;);</div><div class="line">job.setJarByClass(MyReadWriteJob.class);    // class that contains mapper</div><div class="line"></div><div class="line">Scan scan = new Scan();</div><div class="line">scan.setCaching(500);        // 1 is the default in Scan, which will be bad for MapReduce jobs</div><div class="line">scan.setCacheBlocks(false);  // don&apos;t set to true for MR jobs</div><div class="line">// set other scan attrs</div><div class="line"></div><div class="line">TableMapReduceUtil.initTableMapperJob(</div><div class="line">  sourceTable,      // input table</div><div class="line">  scan,             // Scan instance to control CF and attribute selection</div><div class="line">  MyMapper.class,   // mapper class</div><div class="line">  null,             // mapper output key</div><div class="line">  null,             // mapper output value</div><div class="line">  job);</div><div class="line">TableMapReduceUtil.initTableReducerJob(</div><div class="line">  targetTable,      // output table</div><div class="line">  null,             // reducer class</div><div class="line">  job);</div><div class="line">job.setNumReduceTasks(0);</div><div class="line"></div><div class="line">boolean b = job.waitForCompletion(true);</div><div class="line">if (!b) &#123;</div><div class="line">    throw new IOException(&quot;error with job!&quot;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>An explanation is required of what TableMapReduceUtil is doing, especially with the reducer. TableOutputFormat is being used as the outputFormat class, and several parameters are being set on the config (e.g., TableOutputFormat.OUTPUT_TABLE), as well as setting the reducer output key to ImmutableBytesWritable and reducer value to Writable. These could be set by the programmer on the job and conf, but TableMapReduceUtil tries to make things easier.</p>
<p>The following is the example mapper, which will create a Put and matching the input Result and emit it. Note: this is what the CopyTable utility does.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">public static class MyMapper extends TableMapper&lt;ImmutableBytesWritable, Put&gt;  &#123;</div><div class="line"></div><div class="line">  public void map(ImmutableBytesWritable row, Result value, Context context) throws IOException, InterruptedException &#123;</div><div class="line">    // this example is just copying the data from the source table...</div><div class="line">      context.write(row, resultToPut(row,value));</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private static Put resultToPut(ImmutableBytesWritable key, Result result) throws IOException &#123;</div><div class="line">      Put put = new Put(key.get());</div><div class="line">      for (KeyValue kv : result.raw()) &#123;</div><div class="line">        put.add(kv);</div><div class="line">      &#125;</div><div class="line">      return put;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>There isn’t actually a reducer step, so TableOutputFormat takes care of sending the Put to the target table.</p>
<p>This is just an example, developers could choose not to use TableOutputFormat and connect to the target table themselves.</p>
<h2 id="3-HBase-MapReduce-Read-Write-Example-With-Multi-Table-Output"><a href="#3-HBase-MapReduce-Read-Write-Example-With-Multi-Table-Output" class="headerlink" title="3 HBase MapReduce Read/Write Example With Multi-Table Output"></a>3 HBase MapReduce Read/Write Example With Multi-Table Output</h2><p>TODO: example for MultiTableOutputFormat.</p>
<h2 id="4-HBase-MapReduce-Summary-to-HBase-Example"><a href="#4-HBase-MapReduce-Summary-to-HBase-Example" class="headerlink" title="4 HBase MapReduce Summary to HBase Example"></a>4 HBase MapReduce Summary to HBase Example</h2><p>The following example uses HBase as a MapReduce source and sink with a summarization step. This example will count the number of distinct instances of a value in a table and write those summarized counts in another table.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">Configuration config = HBaseConfiguration.create();</div><div class="line">Job job = new Job(config,&quot;ExampleSummary&quot;);</div><div class="line">job.setJarByClass(MySummaryJob.class);     // class that contains mapper and reducer</div><div class="line"></div><div class="line">Scan scan = new Scan();</div><div class="line">scan.setCaching(500);        // 1 is the default in Scan, which will be bad for MapReduce jobs</div><div class="line">scan.setCacheBlocks(false);  // don&apos;t set to true for MR jobs</div><div class="line">// set other scan attrs</div><div class="line"></div><div class="line">TableMapReduceUtil.initTableMapperJob(</div><div class="line">  sourceTable,        // input table</div><div class="line">  scan,               // Scan instance to control CF and attribute selection</div><div class="line">  MyMapper.class,     // mapper class</div><div class="line">  Text.class,         // mapper output key</div><div class="line">  IntWritable.class,  // mapper output value</div><div class="line">  job);</div><div class="line">TableMapReduceUtil.initTableReducerJob(</div><div class="line">  targetTable,        // output table</div><div class="line">  MyTableReducer.class,    // reducer class</div><div class="line">  job);</div><div class="line">job.setNumReduceTasks(1);   // at least one, adjust as required</div><div class="line"></div><div class="line">boolean b = job.waitForCompletion(true);</div><div class="line">if (!b) &#123;</div><div class="line">  throw new IOException(&quot;error with job!&quot;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>In this example mapper a column with a String-value is chosen as the value to summarize upon. This value is used as the key to emit from the mapper, and an IntWritable represents an instance counter.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">public static class MyMapper extends TableMapper&lt;Text, IntWritable&gt;  &#123;</div><div class="line">  public static final byte[] CF = &quot;cf&quot;.getBytes();</div><div class="line">  public static final byte[] ATTR1 = &quot;attr1&quot;.getBytes();</div><div class="line"></div><div class="line">  private final IntWritable ONE = new IntWritable(1);</div><div class="line">  private Text text = new Text();</div><div class="line"></div><div class="line">  public void map(ImmutableBytesWritable row, Result value, Context context) throws IOException, InterruptedException &#123;</div><div class="line">    String val = new String(value.getValue(CF, ATTR1));</div><div class="line">    text.set(val);     // we can only emit Writables...</div><div class="line">    context.write(text, ONE);</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>In the reducer, the “ones” are counted (just like any other MR example that does this), and then emits a Put.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">public static class MyTableReducer extends TableReducer&lt;Text, IntWritable, ImmutableBytesWritable&gt;  &#123;</div><div class="line">  public static final byte[] CF = &quot;cf&quot;.getBytes();</div><div class="line">  public static final byte[] COUNT = &quot;count&quot;.getBytes();</div><div class="line"></div><div class="line">  public void reduce(Text key, Iterable&lt;IntWritable&gt; values, Context context) throws IOException, InterruptedException &#123;</div><div class="line">    int i = 0;</div><div class="line">    for (IntWritable val : values) &#123;</div><div class="line">      i += val.get();</div><div class="line">    &#125;</div><div class="line">    Put put = new Put(Bytes.toBytes(key.toString()));</div><div class="line">    put.add(CF, COUNT, Bytes.toBytes(i));</div><div class="line"></div><div class="line">    context.write(null, put);</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="5-HBase-MapReduce-Summary-to-File-Example"><a href="#5-HBase-MapReduce-Summary-to-File-Example" class="headerlink" title="5 HBase MapReduce Summary to File Example"></a>5 HBase MapReduce Summary to File Example</h2><p>This very similar to the summary example above, with exception that this is using HBase as a MapReduce source but HDFS as the sink. The differences are in the job setup and in the reducer. The mapper remains the same.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">Configuration config = HBaseConfiguration.create();</div><div class="line">Job job = new Job(config,&quot;ExampleSummaryToFile&quot;);</div><div class="line">job.setJarByClass(MySummaryFileJob.class);     // class that contains mapper and reducer</div><div class="line"></div><div class="line">Scan scan = new Scan();</div><div class="line">scan.setCaching(500);        // 1 is the default in Scan, which will be bad for MapReduce jobs</div><div class="line">scan.setCacheBlocks(false);  // don&apos;t set to true for MR jobs</div><div class="line">// set other scan attrs</div><div class="line"></div><div class="line">TableMapReduceUtil.initTableMapperJob(</div><div class="line">  sourceTable,        // input table</div><div class="line">  scan,               // Scan instance to control CF and attribute selection</div><div class="line">  MyMapper.class,     // mapper class</div><div class="line">  Text.class,         // mapper output key</div><div class="line">  IntWritable.class,  // mapper output value</div><div class="line">  job);</div><div class="line">job.setReducerClass(MyReducer.class);    // reducer class</div><div class="line">job.setNumReduceTasks(1);    // at least one, adjust as required</div><div class="line">FileOutputFormat.setOutputPath(job, new Path(&quot;/tmp/mr/mySummaryFile&quot;));  // adjust directories as required</div><div class="line"></div><div class="line">boolean b = job.waitForCompletion(true);</div><div class="line">if (!b) &#123;</div><div class="line">  throw new IOException(&quot;error with job!&quot;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>As stated above, the previous Mapper can run unchanged with this example. As for the Reducer, it is a “generic” Reducer instead of extending TableMapper and emitting Puts.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">public static class MyReducer extends Reducer&lt;Text, IntWritable, Text, IntWritable&gt;  &#123;</div><div class="line"></div><div class="line">  public void reduce(Text key, Iterable&lt;IntWritable&gt; values, Context context) throws IOException, InterruptedException &#123;</div><div class="line">    int i = 0;</div><div class="line">    for (IntWritable val : values) &#123;</div><div class="line">      i += val.get();</div><div class="line">    &#125;</div><div class="line">    context.write(key, new IntWritable(i));</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="7-HBase-MapReduce-Summary-to-HBase-Without-Reducer"><a href="#7-HBase-MapReduce-Summary-to-HBase-Without-Reducer" class="headerlink" title="7 HBase MapReduce Summary to HBase Without Reducer"></a>7 HBase MapReduce Summary to HBase Without Reducer</h2><p>It is also possible to perform summaries without a reducer - if you use HBase as the reducer.</p>
<p>An HBase target table would need to exist for the job summary. The Table method incrementColumnValue would be used to atomically increment values. From a performance perspective, it might make sense to keep a Map of values with their values to be incremented for each map-task, and make one update per key at during the cleanup method of the mapper. However, your mileage may vary depending on the number of rows to be processed and unique keys.</p>
<p>In the end, the summary results are in HBase.</p>
<h2 id="8-HBase-MapReduce-Summary-to-RDBMS"><a href="#8-HBase-MapReduce-Summary-to-RDBMS" class="headerlink" title="8 HBase MapReduce Summary to RDBMS"></a>8 HBase MapReduce Summary to RDBMS</h2><p>Sometimes it is more appropriate to generate summaries to an RDBMS. For these cases, it is possible to generate summaries directly to an RDBMS via a custom reducer. The setup method can connect to an RDBMS (the connection information can be passed via custom parameters in the context) and the cleanup method can close the connection.</p>
<p>It is critical to understand that number of reducers for the job affects the summarization implementation, and you’ll have to design this into your reducer. Specifically, whether it is designed to run as a singleton (one reducer) or multiple reducers. Neither is right or wrong, it depends on your use-case. Recognize that the more reducers that are assigned to the job, the more simultaneous connections to the RDBMS will be created - this will scale, but only to a point.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">public static class MyRdbmsReducer extends Reducer&lt;Text, IntWritable, Text, IntWritable&gt;  &#123;</div><div class="line"></div><div class="line">  private Connection c = null;</div><div class="line"></div><div class="line">  public void setup(Context context) &#123;</div><div class="line">    // create DB connection...</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  public void reduce(Text key, Iterable&lt;IntWritable&gt; values, Context context) throws IOException, InterruptedException &#123;</div><div class="line">    // do summarization</div><div class="line">    // in this example the keys are Text, but this is just an example</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  public void cleanup(Context context) &#123;</div><div class="line">    // close db connection</div><div class="line">  &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>In the end, the summary results are written to your RDBMS table/s.</p>
<h2 id="9-Accessing-Other-HBase-Tables-in-a-MapReduce-Job"><a href="#9-Accessing-Other-HBase-Tables-in-a-MapReduce-Job" class="headerlink" title="9 Accessing Other HBase Tables in a MapReduce Job"></a>9 Accessing Other HBase Tables in a MapReduce Job</h2><p>Although the framework currently allows one HBase table as input to a MapReduce job, other HBase tables can be accessed as lookup tables, etc., in a MapReduce job via creating an Table instance in the setup method of the Mapper.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">public class MyMapper extends TableMapper&lt;Text, LongWritable&gt; &#123;</div><div class="line">  private Table myOtherTable;</div><div class="line"></div><div class="line">  public void setup(Context context) &#123;</div><div class="line">    // In here create a Connection to the cluster and save it or use the Connection</div><div class="line">    // from the existing table</div><div class="line">    myOtherTable = connection.getTable(&quot;myOtherTable&quot;);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  public void map(ImmutableBytesWritable row, Result value, Context context) throws IOException, InterruptedException &#123;</div><div class="line">    // process Result...</div><div class="line">    // use &apos;myOtherTable&apos; for lookups</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/06/07/hbase-study004/" itemprop="url">
                  HBase学习笔记(四) HBase的java操作
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-06-07T18:55:55+08:00" content="2016-06-07">
              2016-06-07
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/hbase/" itemprop="url" rel="index">
                    <span itemprop="name">hbase</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/06/07/hbase-study004/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/06/07/hbase-study004/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="1-hbase的简单操作api"><a href="#1-hbase的简单操作api" class="headerlink" title="1 hbase的简单操作api"></a>1 hbase的简单操作api</h2><p>代码如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">import org.apache.hadoop.conf.Configuration;</div><div class="line">import org.apache.hadoop.fs.Path;</div><div class="line">import org.apache.hadoop.hbase.*;</div><div class="line">import org.apache.hadoop.hbase.client.*;</div><div class="line">import org.apache.hadoop.hbase.util.Bytes;</div><div class="line"></div><div class="line">import java.util.ArrayList;</div><div class="line">import java.util.List;</div><div class="line">import java.util.Map;</div><div class="line">import java.util.NavigableMap;</div><div class="line"></div><div class="line">public class CrudApi &#123;</div><div class="line"></div><div class="line">    private static final String TABKLE_NAME = &quot;test_sunx&quot;;</div><div class="line">    private static final String DF_COLUMN = &quot;default_column_family&quot;;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 创建表</div><div class="line">     * @param conf</div><div class="line">     * @throws Exception</div><div class="line">     */</div><div class="line">    public static void create(Configuration conf) throws  Exception&#123;</div><div class="line">        Connection conn = ConnectionFactory.createConnection(conf);</div><div class="line"></div><div class="line">        Admin admin = conn.getAdmin();</div><div class="line"></div><div class="line">        HTableDescriptor table = new HTableDescriptor(TableName.valueOf(TABKLE_NAME));</div><div class="line"></div><div class="line">        table.addFamily(new HColumnDescriptor(DF_COLUMN));</div><div class="line"></div><div class="line">        System.out.println(&quot;Create table...&quot;);</div><div class="line">        if(admin.tableExists(table.getTableName()))&#123;</div><div class="line">            admin.disableTable(table.getTableName());</div><div class="line">            admin.deleteTable(table.getTableName());</div><div class="line">        &#125;</div><div class="line">        admin.createTable(table);</div><div class="line">        System.out.println(&quot; Done.&quot;);</div><div class="line"></div><div class="line">        admin.close();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     *</div><div class="line">     * 删除表</div><div class="line">     *</div><div class="line">     */</div><div class="line">    public static void delete(Configuration conf,String tableName) throws  Exception&#123;</div><div class="line">        Connection connection = ConnectionFactory.createConnection(conf);</div><div class="line">        Admin admin = connection.getAdmin();</div><div class="line"></div><div class="line">        TableName  name = new HTableDescriptor(TableName.valueOf(tableName)).getTableName();</div><div class="line"></div><div class="line">        admin.disableTable(name);</div><div class="line">        admin.deleteTable(name);</div><div class="line"></div><div class="line">        admin.close();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 修改表</div><div class="line">     */</div><div class="line">    public static void alter(Configuration conf,String tableName) throws  Exception &#123;</div><div class="line">        Connection connection = ConnectionFactory.createConnection(conf);</div><div class="line">        Admin admin = connection.getAdmin();</div><div class="line"></div><div class="line">        HColumnDescriptor colu = new HColumnDescriptor(&quot;colu&quot;);</div><div class="line"></div><div class="line">        HTableDescriptor table = new HTableDescriptor(TableName.valueOf(tableName));</div><div class="line">        table.modifyFamily(colu);</div><div class="line"></div><div class="line">        admin.modifyTable(table.getTableName(),table);</div><div class="line"></div><div class="line">        admin.close();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 扫描表</div><div class="line">     * @param conf</div><div class="line">     * @param tableName</div><div class="line">     */</div><div class="line">    public static void scan(Configuration conf,String tableName) throws Exception&#123;</div><div class="line">        Connection connection = ConnectionFactory.createConnection(conf);</div><div class="line">        Table table = connection.getTable(TableName.valueOf(tableName));</div><div class="line"></div><div class="line">        //常见查询条件</div><div class="line">        Scan scan = new Scan();</div><div class="line">        scan.setRowPrefixFilter(Bytes.toBytes(&quot;r1&quot;));</div><div class="line">        ResultScanner rs = table.getScanner(scan);</div><div class="line"></div><div class="line">        for(Result r = rs.next() ;r!=null;r = rs.next())&#123;</div><div class="line">            //执行列簇,获取数据</div><div class="line">            System.out.println(&quot;***************查看已知的列簇下的数据***************&quot;);</div><div class="line">            Map&lt;byte[], byte[]&gt; nmp = r.getFamilyMap(Bytes.toBytes(&quot;fx&quot;));</div><div class="line">            for(Map.Entry&lt;byte[], byte[]&gt; entry : nmp.entrySet())&#123;</div><div class="line">                String key = new String(entry.getKey());</div><div class="line">                String value = new String(entry.getValue());</div><div class="line">                //列簇中的子列和对应的值</div><div class="line">                System.out.println(key + &quot;\t&quot; + value);</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            //查看指定行下的数据信息</div><div class="line">            System.out.println(&quot;***************查看指定行下的数据信息***************&quot;);</div><div class="line">            Map&lt;byte[], NavigableMap&lt;byte[], byte[]&gt;&gt; nv = r.getNoVersionMap();</div><div class="line">            for(Map.Entry&lt;byte[], NavigableMap&lt;byte[], byte[]&gt;&gt; entry : nv.entrySet())&#123;</div><div class="line">                //获取列簇</div><div class="line">                String lc = new String(entry.getKey());</div><div class="line"></div><div class="line">                Map&lt;byte[],byte[]&gt; v = entry.getValue();</div><div class="line">                for(Map.Entry&lt;byte[],byte[]&gt; e : v.entrySet())&#123;</div><div class="line">                    String k1 = new String(e.getKey());</div><div class="line">                    String v1 = new String(e.getValue());</div><div class="line"></div><div class="line">                    System.out.println(k1 + &quot;\t&quot; + v1);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        rs.close();</div><div class="line">        table.close();</div><div class="line">        connection.close();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 给定指定的行和列查询相应的单元格中的数据</div><div class="line">     * @param conf</div><div class="line">     * @param tableName</div><div class="line">     */</div><div class="line">    public static void get(Configuration conf,String tableName,String raw,String family,String qualifier) throws  Exception&#123;</div><div class="line">        Connection connection = ConnectionFactory.createConnection(conf);</div><div class="line">        Table table = connection.getTable(TableName.valueOf(tableName));</div><div class="line"></div><div class="line">        Get get = new Get(Bytes.toBytes(raw));</div><div class="line">        Result result = table.get(get);</div><div class="line"></div><div class="line">        byte[] value = result.getValue(Bytes.toBytes(family),Bytes.toBytes(qualifier));</div><div class="line"></div><div class="line">        System.out.println(new String(value));</div><div class="line"></div><div class="line">        table.close();</div><div class="line">        connection.close();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 向表中插入一条数据</div><div class="line">     * @param conf</div><div class="line">     * @param tableName</div><div class="line">     * @param raw</div><div class="line">     * @param family</div><div class="line">     * @param qualifier</div><div class="line">     * @param data</div><div class="line">     */</div><div class="line">    public static void put(Configuration conf,String tableName,String raw,String family,String qualifier,String data) throws  Exception&#123;</div><div class="line">        Connection connection = ConnectionFactory.createConnection(conf);</div><div class="line">        Table table = connection.getTable(TableName.valueOf(tableName));</div><div class="line"></div><div class="line">        Put put = new Put(Bytes.toBytes(raw));</div><div class="line">        put.addColumn(Bytes.toBytes(family),Bytes.toBytes(qualifier),Bytes.toBytes(data));</div><div class="line"></div><div class="line">        table.put(put);</div><div class="line"></div><div class="line">        table.close();</div><div class="line">        connection.close();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 批量插入数据</div><div class="line">     * @param conf</div><div class="line">     * @param tableName</div><div class="line">     * @param list</div><div class="line">     */</div><div class="line">    public static void puts(Configuration conf,String tableName,List&lt;String[]&gt; list) throws  Exception&#123;</div><div class="line">        Connection connection = ConnectionFactory.createConnection(conf);</div><div class="line">        Table table = connection.getTable(TableName.valueOf(tableName));</div><div class="line"></div><div class="line">        List&lt;Put&gt; puts = new ArrayList&lt;Put&gt;();</div><div class="line">        for(String[] raw : list)&#123;</div><div class="line">            Put put = new Put(Bytes.toBytes(raw[0]));</div><div class="line">            put.addColumn(Bytes.toBytes(raw[1]),Bytes.toBytes(raw[2]),Bytes.toBytes(raw[3]));</div><div class="line"></div><div class="line">            puts.add(put);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        table.put(puts);</div><div class="line">        table.close();</div><div class="line">        connection.close();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 删除行</div><div class="line">     * @param conf</div><div class="line">     * @param tableName</div><div class="line">     * @param raw</div><div class="line">     */</div><div class="line">    public static void delete(Configuration conf,String tableName,String raw)throws  Exception&#123;</div><div class="line">        Connection connection = ConnectionFactory.createConnection(conf);</div><div class="line">        Table table = connection.getTable(TableName.valueOf(tableName));</div><div class="line"></div><div class="line">        Delete delete = new Delete(Bytes.toBytes(raw));</div><div class="line">        table.delete(delete);</div><div class="line"></div><div class="line">        table.close();</div><div class="line">        connection.close();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 删除单元格</div><div class="line">     * @param conf</div><div class="line">     * @param tableName</div><div class="line">     * @param raw</div><div class="line">     * @param family</div><div class="line">     * @param qualifier</div><div class="line">     */</div><div class="line">    public static void delete(Configuration conf,String tableName,String raw,String family,String qualifier)throws  Exception&#123;</div><div class="line">        Connection connection = ConnectionFactory.createConnection(conf);</div><div class="line">        Table table = connection.getTable(TableName.valueOf(tableName));</div><div class="line"></div><div class="line">        Delete delete = new Delete(Bytes.toBytes(raw));</div><div class="line">        delete.addColumn(Bytes.toBytes(family),Bytes.toBytes(qualifier));</div><div class="line"></div><div class="line">        table.delete(delete);</div><div class="line"></div><div class="line">        table.close();</div><div class="line">        connection.close();</div><div class="line">    &#125;</div><div class="line">    /**</div><div class="line">     * 更新动作</div><div class="line">     * @param config</div><div class="line">     * @throws Exception</div><div class="line">     */</div><div class="line">    public static void modifySchema(Configuration config,String tableName) throws Exception&#123;</div><div class="line">        Connection connection = ConnectionFactory.createConnection(config);</div><div class="line">        Admin admin  = connection.getAdmin();</div><div class="line"></div><div class="line">        //更新已经存在的表</div><div class="line">        HColumnDescriptor newColumn = new HColumnDescriptor(&quot;new_column&quot;);</div><div class="line">        admin.addColumn(TableName.valueOf(tableName),newColumn);</div><div class="line"></div><div class="line">        //更新已经存在的列</div><div class="line">        HColumnDescriptor hc = new HColumnDescriptor(DF_COLUMN);</div><div class="line">        admin.addColumn(TableName.valueOf(tableName),hc);</div><div class="line"></div><div class="line">        //隐藏该表</div><div class="line">//        admin.disableTable(TableName.valueOf(tableName));</div><div class="line"></div><div class="line">        //删除已经存在的列簇</div><div class="line">        admin.deleteColumn(TableName.valueOf(tableName),DF_COLUMN.getBytes(&quot;UTF-8&quot;));</div><div class="line"></div><div class="line">        //删除表,需要先卸载掉表</div><div class="line">//        admin.deleteTable(TableName.valueOf(tableName));</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public static void main(String[] args) throws  Exception&#123;</div><div class="line">        Configuration conf = HBaseConfiguration.create();</div><div class="line"></div><div class="line">        //add any necessary configuration files (hbase-site.xml,core-site.xml)</div><div class="line">        conf.addResource(new Path(&quot;/usr/local/share/hbase1.2.0/conf/hbase-site.xml&quot;));</div><div class="line">        conf.addResource(new Path(&quot;/usr/local/share/hadoop2.7.1/etc/hadoop/core-site.xml&quot;));</div><div class="line"></div><div class="line">        //创建表</div><div class="line">//        create(conf);</div><div class="line">        //删除表</div><div class="line">//        delete(conf,&quot;test2&quot;);</div><div class="line">        //查询数据</div><div class="line">//        scan(conf,&quot;test2&quot;);</div><div class="line">        //查询单个单元格对应的数据</div><div class="line">//        get(conf,&quot;test2&quot;,&quot;r1&quot;,&quot;f3&quot;,&quot;&quot;);</div><div class="line">        //插入数据</div><div class="line">//        put(conf,&quot;test2&quot;,&quot;r2&quot;,&quot;f3&quot;,&quot;&quot;,&quot;123&quot;);</div><div class="line">        //批量插入数据</div><div class="line">//        String[] st = &#123;&quot;r3&quot;,&quot;f3&quot;,&quot;&quot;,&quot;r3f3&quot;&#125;;</div><div class="line">//        String[] st2=&#123;&quot;r4&quot;,&quot;fx&quot;,&quot;&quot;,&quot;r4fx&quot;&#125;;</div><div class="line">//</div><div class="line">//        List&lt;String[]&gt; ls = new ArrayList&lt;&gt;();</div><div class="line">//        ls.add(st);</div><div class="line">//        ls.add(st2);</div><div class="line">//</div><div class="line">//        puts(conf,&quot;test2&quot;,ls);</div><div class="line">        //删除数据</div><div class="line">//        delete(conf,&quot;test1&quot;);</div><div class="line">        //更新表</div><div class="line">        modifySchema(conf,&quot;test2&quot;);</div><div class="line"></div><div class="line">        put(conf,&quot;test2&quot;,&quot;test_row&quot;,&quot;new_column&quot;,&quot;&quot;,&quot;test_value_123&quot;);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/7/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><span class="page-number current">8</span><a class="page-number" href="/page/9/">9</a><span class="space">&hellip;</span><a class="page-number" href="/page/13/">13</a><a class="extend next" rel="next" href="/page/9/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
           <!-- 多说热评文章 start -->
	<div class="ds-top-threads" data-range="daily" data-num-items="5"></div>
<!-- 多说热评文章 end -->
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"sunxing"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- 多说公共JS代码 end -->


           <section id="comments">
   <!-- 多说评论框 start -->
<div id="ds-thread" class="ds-thread" data-thread-key="<%= post.path %>" data-title="<%= post.title %>" data-url="<%= post.permalink %>"></div>
<!-- 多说评论框 end -->
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"sunxing"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- 多说公共JS代码 end -->
  </section>

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/default_avatar.jpg"
               alt="孙星" />
          <p class="site-author-name" itemprop="name">孙星</p>
          <p class="site-description motion-element" itemprop="description">sunxing's blog | mysql | java | scala | hadoop | spark | kafka | flume</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">65</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">12</span>
                <span class="site-state-item-name">分类</span>
              
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">14</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">孙星</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>


        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"sunxing"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
  





  
  
  

  

  
<script type="text/javascript" async src="//push.zhanzhang.baidu.com/push.js">
</script>


</body>
</html>
