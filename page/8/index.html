<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  




<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="sunxing&apos;s blog | mysql | java | scala | hadoop | spark | kafka | flume">
<meta property="og:type" content="website">
<meta property="og:title" content="孙星的个人博客~">
<meta property="og:url" content="http://www.sunxing.cc/page/8/index.html">
<meta property="og:site_name" content="孙星的个人博客~">
<meta property="og:description" content="sunxing&apos;s blog | mysql | java | scala | hadoop | spark | kafka | flume">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="孙星的个人博客~">
<meta name="twitter:description" content="sunxing&apos;s blog | mysql | java | scala | hadoop | spark | kafka | flume">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>
 <script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1258995301'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s11.cnzz.com/z_stat.php%3Fid%3D1258995301' type='text/javascript'%3E%3C/script%3E"));</script>

  <title> 孙星的个人博客~ </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">孙星的个人博客~</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">搬砖的,码农~</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-tags fa-fw"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/10/java-io-4/" itemprop="url">
                  JavaIO学习笔记(四) Java 流操作和源码
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-07-10T09:57:55+08:00" content="2016-07-10">
              2016-07-10
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/java/" itemprop="url" rel="index">
                    <span itemprop="name">java</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/07/10/java-io-4/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/07/10/java-io-4/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="1-InputStream"><a href="#1-InputStream" class="headerlink" title="1 InputStream"></a>1 InputStream</h2><h3 id="1-1-FileInputStream-and-FileOutputStream"><a href="#1-1-FileInputStream-and-FileOutputStream" class="headerlink" title="1.1 FileInputStream and FileOutputStream"></a>1.1 FileInputStream and FileOutputStream</h3><h4 id="1-1-1-FileInputStream"><a href="#1-1-1-FileInputStream" class="headerlink" title="1.1.1 FileInputStream"></a>1.1.1 FileInputStream</h4><p>文件输入流,主要是读取文件的内容,构造方法有三个,分布式如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">public FileInputStream(String name) throws FileNotFoundException</div><div class="line">public FileInputStream(File file) throws FileNotFoundException</div><div class="line">public FileInputStream(FileDescriptor fdObj)</div></pre></td></tr></table></figure>
<p>FileInputStream是字节流,下面展示下简单额使用方式:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line">/*****</div><div class="line">     * FileInputStream</div><div class="line">     *</div><div class="line">     * @throws Exception</div><div class="line">     */</div><div class="line">    @Test</div><div class="line">    public void testFileInputStream() throws Exception&#123;</div><div class="line">        String filePath = &quot;conf/file/test1.txt&quot;;</div><div class="line">        File file = new File(filePath);</div><div class="line">        InputStream is1 = new FileInputStream(filePath);</div><div class="line">        InputStream is2 = new FileInputStream(file);</div><div class="line"></div><div class="line">        show(is1);</div><div class="line">        show(is2,new byte[3]);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void show(InputStream is) throws  Exception&#123;</div><div class="line">        System.out.println(&quot;打印读取到的byte..&quot;);</div><div class="line">        int data = is.read();</div><div class="line">        while(data != -1)&#123;</div><div class="line">            char ch = (char)data;</div><div class="line">            System.out.println(ch);</div><div class="line">            data = is.read();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void show(InputStream is,byte[] b) throws  Exception&#123;</div><div class="line">        int data = is.read();</div><div class="line">        int i=0;</div><div class="line">        System.out.println(&quot;打印读取到的中文汉字对应的byte..&quot;);</div><div class="line">        while(data != -1)&#123;</div><div class="line">            b[i] = (byte)(data - 256);</div><div class="line">            i++;</div><div class="line">            System.out.println(data);</div><div class="line">            data = is.read();</div><div class="line">        &#125;</div><div class="line">        System.out.println(&quot;将读取到的byte转化为汉字...&quot;);</div><div class="line">        System.out.println(new String(new byte[]&#123;b[0],b[1],b[2]&#125;));</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>执行结果截图如下:</p>
<p><img src="/images/io/io-hanzi-0.png" alt=""></p>
<p>执行上面的代码会发现,如果是英文的文件可以看出英文文档是写入的字母会正常显示出来,如果是中文汉字,按照上面的打印会出现乱码,主要是因为读取的动作是一个字节一个自己的读取的,中文汉字一个汉字占用的字节数是根据编码格式来的,在GBK和GB2312编码情况下,一个汉字对应的还是连个字节,在UTF-8编码下一个汉字对应的是三个字节,在ISO-8859-1编码下是无法识别汉字的,汉字只能转为问好,同样的在有些大字符集编码中汉字可能对应的是四个字节,具体的举例如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">@Test</div><div class="line">   public void test2() throws Exception&#123;</div><div class="line">       String hanzi = &quot;个&quot;;</div><div class="line"></div><div class="line">       byte[] a = hanzi.getBytes(&quot;UTF-8&quot;);</div><div class="line">       byte[] b = hanzi.getBytes(&quot;GBK&quot;);</div><div class="line">       byte[] c = hanzi.getBytes(&quot;GB2312&quot;);</div><div class="line"></div><div class="line">       System.out.println(a.length + &quot;\t&quot; + b.length + &quot;\t&quot; + c.length);</div><div class="line">   &#125;</div></pre></td></tr></table></figure>
<p>执行的结果如下:</p>
<p><img src="/images/io/io-hanzi.png" alt=""></p>
<h4 id="1-1-2-FileOutputStream"><a href="#1-1-2-FileOutputStream" class="headerlink" title="1.1.2 FileOutputStream"></a>1.1.2 FileOutputStream</h4><p>文件输出流,主要是写入文件的内容,构造方法有三个,分布式如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">public FileOutputStream(String name) throws FileNotFoundException</div><div class="line">public FileOutputStream(String name, boolean append)</div><div class="line">public FileOutputStream(File file)</div><div class="line">public FileOutputStream(File file, boolean append)</div><div class="line">public FileOutputStream(FileDescriptor fdObj)</div></pre></td></tr></table></figure>
<p>FileInputStream是字节流,下面展示下简单额使用方式:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">@Test</div><div class="line">public void test6() throws Exception&#123;</div><div class="line">    OutputStream os = new FileOutputStream(&quot;conf/h.txt&quot;,true);</div><div class="line">    os.write(&quot;第一行数据&quot;.getBytes());</div><div class="line">    os.flush();</div><div class="line">    os.close();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>主意这里FileOutputStream是没有换行的写入文件,如果想一行一行写,需要写入一个换行符。也就是:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">os.write(&quot;第一行数据\n&quot;.getBytes());</div></pre></td></tr></table></figure>
<h3 id="1-2-ByteArrayInputStream-and-ByteArrayOutputStream"><a href="#1-2-ByteArrayInputStream-and-ByteArrayOutputStream" class="headerlink" title="1.2 ByteArrayInputStream and ByteArrayOutputStream"></a>1.2 ByteArrayInputStream and ByteArrayOutputStream</h3><h4 id="1-2-1-ByteArrayInputStream"><a href="#1-2-1-ByteArrayInputStream" class="headerlink" title="1.2.1 ByteArrayInputStream"></a>1.2.1 ByteArrayInputStream</h4><p>ByteArrayInputStream其实就是对一个byte数组的封装,内部有一个相对的数组缓存,以及指针,通过这个指针的移动来读取相应地方的具体的数据,实例变量如下为:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">//内部缓存</div><div class="line">protected byte buf[];</div><div class="line">//指针id,用于指向数组的下标来实现读取数据</div><div class="line">protected int pos;</div><div class="line">//标记下表,用于任意指定位置,开始读取数据(具体的通过pos来赋值的)</div><div class="line">protected int mark = 0;</div><div class="line">//数组的长度</div><div class="line">protected int count;</div></pre></td></tr></table></figure>
<p>API列表以及相应的解释:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">//给定一个字节数组初始化字节数组输入流</div><div class="line">public ByteArrayInputStream(byte buf[])</div><div class="line">//给定一个字节数组初始化字节数组输入流,相当于读取数组的子集</div><div class="line">public ByteArrayInputStream(byte buf[], int offset, int length)</div><div class="line">//读取一个字节,将这个字节按位与0xff后返回一个int整数</div><div class="line">public synchronized int read()</div><div class="line">//读取缓存字节数组的一个子集数组</div><div class="line">public synchronized int read(byte b[], int off, int len)</div><div class="line">//修改指针,跳过多少个字节进行读取</div><div class="line">public synchronized long skip(long n)</div><div class="line">//检测还有多少字节没有读取,也就是count - pos的值</div><div class="line">public synchronized int available()</div><div class="line">//该方法总是返回true</div><div class="line">public boolean markSupported()</div><div class="line">//该方法的参数是无用的,返回值根据的是当前指针的位置来重置mark的值</div><div class="line">public void mark(int readAheadLimit)</div><div class="line">//指针移动到上一次mark标记的地方重新读取</div><div class="line">public synchronized void reset()</div></pre></td></tr></table></figure>
<p>例子：读取一个汉字的字节数组,重新读取展示出来.读取到的一个自己是获取到的字节对应按位与过后的值,需要改动后再转成字符串展示,代码如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">/*****</div><div class="line">    * ByteArrayInputStream</div><div class="line">    *</div><div class="line">    * @throws Exception</div><div class="line">    */</div><div class="line">   @Test</div><div class="line">   public void test3() throws Exception&#123;</div><div class="line">       String hanzi = &quot;一&quot;;</div><div class="line">       ByteArrayInputStream bais = new ByteArrayInputStream(hanzi.getBytes());</div><div class="line"></div><div class="line">       byte[] b = new byte[3];</div><div class="line">       int i = 0;</div><div class="line">       int data = bais.read();</div><div class="line">       while(data != -1 &amp;&amp; i &lt; 3)&#123;</div><div class="line">           int origin = data &amp; 0xff;</div><div class="line"></div><div class="line">           b[i] = (byte)origin;</div><div class="line">           data = bais.read();</div><div class="line">           i++;</div><div class="line">       &#125;</div><div class="line"></div><div class="line">       System.out.println(new String(b));</div><div class="line">   &#125;</div></pre></td></tr></table></figure>
<h4 id="1-2-2-ByteArrayOutputStream"><a href="#1-2-2-ByteArrayOutputStream" class="headerlink" title="1.2.2 ByteArrayOutputStream"></a>1.2.2 ByteArrayOutputStream</h4><p>这里就不多说这个了,基本的操作就是向一个字节数组中写入数据,同样的可以将这个数据写入到某个输出流中,源码中的代码如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">public synchronized void writeTo(OutputStream out) throws IOException &#123;</div><div class="line">      out.write(buf, 0, count);</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<h3 id="1-3-StringBufferInputStream"><a href="#1-3-StringBufferInputStream" class="headerlink" title="1.3 StringBufferInputStream"></a>1.3 StringBufferInputStream</h3><p>这个类在jdk8中已经被废弃掉了。</p>
<h3 id="1-4-ObjectInputStream-and-ObjectOutputStream"><a href="#1-4-ObjectInputStream-and-ObjectOutputStream" class="headerlink" title="1.4 ObjectInputStream and ObjectOutputStream"></a>1.4 ObjectInputStream and ObjectOutputStream</h3><h4 id="1-4-1-ObjectInputStream"><a href="#1-4-1-ObjectInputStream" class="headerlink" title="1.4.1 ObjectInputStream"></a>1.4.1 ObjectInputStream</h4><p>ObjectInputStream的构造韩式如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">public ObjectInputStream(InputStream in) throws IOException &#123;</div><div class="line">    verifySubclass();</div><div class="line">    bin = new BlockDataInputStream(in);</div><div class="line">    handles = new HandleTable(10);</div><div class="line">    vlist = new ValidationList();</div><div class="line">    enableOverride = false;</div><div class="line">    readStreamHeader();</div><div class="line">    bin.setBlockDataMode(true);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>由此可以看出其实他是封装为了一个BlockDataInputStream实例,那么这个又是什么呢?源码部分如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">BlockDataInputStream(InputStream in) &#123;</div><div class="line">    this.in = new PeekInputStream(in);</div><div class="line">    din = new DataInputStream(this);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>在构造这个对象的同时,将我们一开始读取的流又封装了一下,使用的PeekInputStream,这个类主要是用来做什么的呢？</p>
<p>先来查看一下BlockDataInputStream的read方法,基本的流操作中read是最基本也是最原始的方法,方法源代码如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">/* ----------------- generic input stream methods ------------------ */</div><div class="line">/*</div><div class="line">* The following methods are equivalent to their counterparts in</div><div class="line">* InputStream, except that they interpret data block boundaries and</div><div class="line">* read the requested data from within data blocks when in block data</div><div class="line">* mode.</div><div class="line">*/</div><div class="line">public int read() throws IOException &#123;</div><div class="line">   if (blkmode) &#123;</div><div class="line">      if (pos == end) &#123;</div><div class="line">          refill();</div><div class="line">       &#125;</div><div class="line">       return (end &gt;= 0) ? (buf[pos++] &amp; 0xFF) : -1;</div><div class="line">    &#125; else &#123;</div><div class="line">      return in.read();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>可以看出其实BlockDataInputStream只是一个封装类,in是什么？</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">/** underlying stream (wrapped in peekable filter stream) */</div><div class="line">private final PeekInputStream in;</div></pre></td></tr></table></figure>
<p>因此可以总结出一个问题:<br>ObjectInputStream是一个总的对外提供的包装类,其内部的是一层一层进行封装的, PeekInputStream是最低层的实现,基本功能是读取字节的操作,源码截图如下:</p>
<p><img src="/images/io/io-peekinpustream.png" alt=""></p>
<p>而操作对象等操作,比如读取一个int,long,float等等操作的时候,进行了异常包装,在BlockDataInputStream中实现的,源码截图如下:</p>
<p><img src="/images/io/io-block-object.png" alt=""></p>
<p>如何实现读取常用类型的数据呢？由于还是读取字节的形式来进行获取相应的数据,如int类型的,因占用4个字节,也就是读取4个字节的数据,在转化为int,具体的源代码如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">public int readInt() throws IOException &#123;</div><div class="line">            if (!blkmode) &#123;</div><div class="line">                pos = 0;</div><div class="line">                in.readFully(buf, 0, 4);</div><div class="line">            &#125; else if (end - pos &lt; 4) &#123;</div><div class="line">                return din.readInt();</div><div class="line">            &#125;</div><div class="line">            int v = Bits.getInt(buf, pos);</div><div class="line">            pos += 4;</div><div class="line">            return v;</div><div class="line">        &#125;</div><div class="line">//din.readInt</div><div class="line">public final int readInt() throws IOException &#123;</div><div class="line">    int ch1 = in.read();</div><div class="line">    int ch2 = in.read();</div><div class="line">    int ch3 = in.read();</div><div class="line">    int ch4 = in.read();</div><div class="line">    if ((ch1 | ch2 | ch3 | ch4) &lt; 0)</div><div class="line">       throw new EOFException();</div><div class="line">    return ((ch1 &lt;&lt; 24) + (ch2 &lt;&lt; 16) + (ch3 &lt;&lt; 8) + (ch4 &lt;&lt; 0));</div><div class="line">&#125;</div><div class="line"></div><div class="line">//Bits.getInt(buf, pos)</div><div class="line">static int getInt(byte[] b, int off) &#123;</div><div class="line">        return ((b[off + 3] &amp; 0xFF)      ) +</div><div class="line">               ((b[off + 2] &amp; 0xFF) &lt;&lt;  8) +</div><div class="line">               ((b[off + 1] &amp; 0xFF) &lt;&lt; 16) +</div><div class="line">               ((b[off    ]       ) &lt;&lt; 24);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>读取int类型的数据,主要是先读取4个字节的数据,然后根据这四个字节的数据按照从高位到低位按位与后右移后相加得到相应的数据。</p>
<p>由于BlockDataInputStream是对各个数据类型操作的封装,下面对于对象读取的话,那么一些类的相关数据,比如：类名,常量,字段等,这些操作是封装在ObjectInputStream中的。</p>
<p>下面开始介绍简单的使用：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line">    * ObjectInputStream</div><div class="line">    */</div><div class="line">   @Test</div><div class="line">   public void test4() throws Exception&#123;</div><div class="line">       ReaderExample re = new ReaderExample();</div><div class="line">       //序列化输出到文件中</div><div class="line">       OutputStream os = new FileOutputStream(&quot;conf/object.txt&quot;);</div><div class="line">       ObjectOutputStream oos = new ObjectOutputStream(os);</div><div class="line">       //写一个对象</div><div class="line">       oos.writeObject(re);</div><div class="line"></div><div class="line">       oos.close();</div><div class="line">       os.close();</div><div class="line"></div><div class="line">       //读取文件中的每个字节</div><div class="line">       InputStream is = new FileInputStream(&quot;conf/object.txt&quot;);</div><div class="line"></div><div class="line">       int data = is.read();</div><div class="line">       while(data != -1)&#123;</div><div class="line">           char ch = (char)(data &amp; 0xFF);</div><div class="line">           System.out.println(ch + &quot;\t&quot; + (data &amp; 0xFF));</div><div class="line">           data = is.read();</div><div class="line">       &#125;</div><div class="line">   &#125;</div></pre></td></tr></table></figure>
<h4 id="1-4-2-ObjectOutputStream"><a href="#1-4-2-ObjectOutputStream" class="headerlink" title="1.4.2 ObjectOutputStream"></a>1.4.2 ObjectOutputStream</h4><p>通过上面ObjectInputStream的那个简单实用的例子执行的结果截图如下:</p>
<p><img src="/images/io/io-object-execute.png" alt=""></p>
<p>可以看出前面四个字节的数据是乱码的,第五个和第六个为s和r,从第八个自己开始就是类路径。</p>
<p>对象写入流,写入的主要过程如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">public final void writeObject(Object obj) throws IOException &#123;</div><div class="line">    if (enableOverride) &#123;</div><div class="line">        writeObjectOverride(obj);</div><div class="line">        return;</div><div class="line">    &#125;</div><div class="line">    try &#123;</div><div class="line">        writeObject0(obj, false);</div><div class="line">    &#125; catch (IOException ex) &#123;</div><div class="line">        if (depth == 0) &#123;</div><div class="line">            writeFatalException(ex);</div><div class="line">        &#125;</div><div class="line">        throw ex;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>最终的写入数据的代码如下:</p>
<p><img src="/images/io/io-object-writer.png" alt=""></p>
<h3 id="1-5-PipedInputStream-and-PipedOutputStream"><a href="#1-5-PipedInputStream-and-PipedOutputStream" class="headerlink" title="1.5 PipedInputStream and PipedOutputStream"></a>1.5 PipedInputStream and PipedOutputStream</h3><p>管道输入输出流适用于线程间进行通信的,下面举个简单例子说明下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line">@Test</div><div class="line">    public void test5() throws Exception&#123;</div><div class="line">        //管道输出流</div><div class="line">        final PipedOutputStream  pos = new PipedOutputStream();</div><div class="line">        //管道输入流</div><div class="line">        final PipedInputStream pis = new PipedInputStream(pos);</div><div class="line"></div><div class="line">        Thread thread1 = new Thread(new Runnable() &#123;</div><div class="line">            @Override</div><div class="line">            public void run() &#123;</div><div class="line">                while(true)&#123;</div><div class="line">                    try&#123;</div><div class="line">                        pos.write((&quot;timesnamp -&gt; &quot; + System.currentTimeMillis() + &quot;\n&quot;).getBytes());</div><div class="line">                        pos.flush();</div><div class="line"></div><div class="line">                        Thread.sleep(1000);</div><div class="line">                    &#125;catch (Exception e)&#123;</div><div class="line">                        e.printStackTrace();</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line"></div><div class="line">        Thread thread2 = new Thread(new Runnable() &#123;</div><div class="line">            @Override</div><div class="line">            public void run() &#123;</div><div class="line">                while(true)&#123;</div><div class="line">                    try&#123;</div><div class="line">                        BufferedReader br = new BufferedReader(new InputStreamReader(pis));</div><div class="line"></div><div class="line">                        String line = null;</div><div class="line">                        while((line = br.readLine()) != null)&#123;</div><div class="line">                            System.out.println(line);</div><div class="line">                        &#125;</div><div class="line">                    &#125;catch (Exception e)&#123;</div><div class="line">                        e.printStackTrace();</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;) ;</div><div class="line"></div><div class="line">        thread1.start();</div><div class="line">        thread2.start();</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>这里用的是junit进行的代码测试,所以在线程启动后会自动停止,因此自打出了一条数据,运行结果如下:</p>
<p><img src="/images/io/io-piped-test.png" alt=""></p>
<h3 id="1-6-SequenceInputStream"><a href="#1-6-SequenceInputStream" class="headerlink" title="1.6 SequenceInputStream"></a>1.6 SequenceInputStream</h3><p>这个SequenceInputStream类主要是用来合并流的,如果想同时处理多个输入流的数据,可以将这些输入流合并后处理,简单例子如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">@Test</div><div class="line">   public void test8() throws Exception&#123;</div><div class="line">       //流集合</div><div class="line">       InputStream is1 = new FileInputStream(&quot;conf/file/test1.txt&quot;);</div><div class="line">       InputStream is2 = new FileInputStream(&quot;conf/file/test1.txt&quot;);</div><div class="line"></div><div class="line">       SequenceInputStream sis = new SequenceInputStream(is1,is2);</div><div class="line"></div><div class="line">       BufferedReader br = new BufferedReader(new InputStreamReader(sis));</div><div class="line">       String line = null;</div><div class="line"></div><div class="line">       while((line = br.readLine()) != null)&#123;</div><div class="line">           System.out.println(line);</div><div class="line">       &#125;</div><div class="line"></div><div class="line">       is1.close();</div><div class="line">       is2.close();</div><div class="line"></div><div class="line">       sis.close();</div><div class="line">       br.close();</div><div class="line">   &#125;</div></pre></td></tr></table></figure>
<p>合并后那个流先读取那个流后读取还是？具体的顺序看代码:</p>
<p><img src="/images/io/io-sequence.png" alt=""></p>
<p>由上面说的从流中读取一个数据后,调用了一个方法nextStream();</p>
<p><img src="/images/io/io-sequence-next.png" alt=""></p>
<p>由此可以见到读取流是按照顺序读取的,也就是一个读取完成后读取下一个,那么那个是先开始读取的呢？构造函数如下:</p>
<p><img src="/images/io/io-sequence-init.png" alt=""></p>
<p>由此可以看出是按照加入集合的顺序来的,也就是它的构造函数是给定一个流集合或者是给定两个流它自己构造一个集合,按照这个集合的顺序来进行读取。</p>
<h3 id="1-7-FilterInputStream"><a href="#1-7-FilterInputStream" class="headerlink" title="1.7 FilterInputStream"></a>1.7 FilterInputStream</h3><h4 id="1-7-1-BufferedInputStream-and-BufferedOutputStream"><a href="#1-7-1-BufferedInputStream-and-BufferedOutputStream" class="headerlink" title="1.7.1 BufferedInputStream and BufferedOutputStream"></a>1.7.1 BufferedInputStream and BufferedOutputStream</h4><p>基本的原理是一样的,内部是一个字节数组,通过字节数组来实现读取的操作,移动指针来实现读取的位置移动.具体的接口如下:</p>
<p><img src="/images/io/io-buffered-input.png" alt=""></p>
<p>具体的就不在赘述了。重复的操作。</p>
<h4 id="1-7-2-PrintStream"><a href="#1-7-2-PrintStream" class="headerlink" title="1.7.2 PrintStream"></a>1.7.2 PrintStream</h4><p>该类的主要用处将一些数据打印到其他的流中,内部实现的机理是构造了两个写出流,具体的源码如下:</p>
<p><img src="/images/io/io-print-stream.png" alt=""></p>
<p>PrintStream的构造函数,主要是对两个参数的初始化,主要是刷新和指定编码等,具体的构造函数如下:</p>
<p><img src="/images/io/io-print-stream-init.png" alt=""></p>
<p>简单实用的例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">@Test</div><div class="line"> public void test10() throws Exception&#123;</div><div class="line">     OutputStream os = new FileOutputStream(&quot;conf/object.txt&quot;);</div><div class="line">     PrintStream ps = new PrintStream(os,true,&quot;UTF-8&quot;);</div><div class="line"></div><div class="line">     ps.print(&quot;测试打印功能代码...&quot;);</div><div class="line"></div><div class="line">     ps.close();</div><div class="line">     os.close();</div><div class="line"> &#125;</div></pre></td></tr></table></figure>
<h2 id="2-Reader-and-Writer"><a href="#2-Reader-and-Writer" class="headerlink" title="2 Reader and Writer"></a>2 Reader and Writer</h2><p>Reader和Writer其实都是对出入和输出流的封装,简单实用例子如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">@Test</div><div class="line">    public void test11() throws Exception&#123;</div><div class="line">        StringWriter sw = new StringWriter();</div><div class="line">        //写操作</div><div class="line">        BufferedWriter bw1 = new BufferedWriter(new OutputStreamWriter(new FileOutputStream(&quot;conf/object.txt&quot;,true),&quot;UTF-8&quot;));</div><div class="line">        BufferedWriter bw2 = new BufferedWriter(new FileWriter(new File(&quot;conf/object.txt&quot;),true));</div><div class="line">        BufferedWriter bw3 = new BufferedWriter(sw);</div><div class="line">        //写数据到具体的流中</div><div class="line">        bw1.write(&quot;new BufferedWriter(new OutputStreamWriter(new FileOutputStream(\&quot;conf/object.txt\&quot;,true),\&quot;UTF-8\&quot;))&quot;);</div><div class="line">        bw1.newLine();</div><div class="line">        bw1.flush();</div><div class="line">        bw1.close();</div><div class="line"></div><div class="line">        //写数据到文件中</div><div class="line">        bw2.write(&quot;new BufferedWriter(new FileWriter(new File(\&quot;conf/object.txt\&quot;),true))&quot;);</div><div class="line">        bw2.newLine();</div><div class="line">        bw2.flush();</div><div class="line">        bw2.close();</div><div class="line"></div><div class="line">        bw3.write(&quot;new BufferedWriter(sw)&quot;);</div><div class="line">        bw3.newLine();</div><div class="line">        bw3.flush();</div><div class="line">        bw3.close();</div><div class="line"></div><div class="line">        //开始读取</div><div class="line">        BufferedReader br1 = new BufferedReader(new InputStreamReader(new FileInputStream(&quot;conf/object.txt&quot;),&quot;UTF-8&quot;));</div><div class="line">        BufferedReader br2 = new BufferedReader(new FileReader(new File(&quot;conf/object.txt&quot;)));</div><div class="line">        BufferedReader br3 = new BufferedReader(new StringReader(sw.toString()));</div><div class="line"></div><div class="line">        System.out.println(br1.readLine());</div><div class="line">        System.out.println(br2.readLine());</div><div class="line">        System.out.println(br3.readLine());</div><div class="line"></div><div class="line">        br1.close();</div><div class="line">        br2.close();</div><div class="line">        br3.close();</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<h2 id="3-RandomAccessFile"><a href="#3-RandomAccessFile" class="headerlink" title="3 RandomAccessFile"></a>3 RandomAccessFile</h2><p>这个类主要是用来随机读取文件,这个类可以支持读取正在写入的文件,支持并发下的实时读写操作,主要的构造函数有两个:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">public RandomAccessFile(String name, String mode) throws FileNotFoundException</div><div class="line">public RandomAccessFile(File file, String mode) throws FileNotFoundException</div></pre></td></tr></table></figure>
<p>可以看到一共有两个参数,第一个就不说了,第二个是文件对应的模式。这个模式一共有四种：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">r		:只读</div><div class="line">rw		:可读可写</div><div class="line">rws		:可读可写,同时可以修改文件的内容和文件metadata。也就是元数据,比如文件的名称等</div><div class="line">rwd		:可读可写,只能修改文档内容,不能修改文件的元数据</div></pre></td></tr></table></figure>
<p>现在这个类的主要功能是提供了对文件内容的随机读写,可以指定位置进行读取和写.具体的接口可以看到如下:</p>
<p><img src="/images/io/io-random-seek.png" alt=""></p>
<p>下面测试跳过3个字节的offset进行写入一个汉字,具体的代码如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">@Test</div><div class="line">   public void test12() throws Exception&#123;</div><div class="line">       //构建随机读写类</div><div class="line">       RandomAccessFile raf = new RandomAccessFile(new File(&quot;conf/object.txt&quot;),&quot;rwd&quot;);</div><div class="line"></div><div class="line">       //在第3个字节的位置写入一个中文字符</div><div class="line">       raf.seek(3);</div><div class="line">       raf.write(&quot;一&quot;.getBytes());</div><div class="line">       raf.close();</div><div class="line">   &#125;</div></pre></td></tr></table></figure>
<p>执行过后的结果如下:</p>
<p><img src="/images/io/io-random-rw.png" alt=""></p>
<p>同样的在接口中也有跳过多少个字节进行读写,接口的详细情况如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">public int skipBytes(int n) throws IOException</div></pre></td></tr></table></figure>
<p>skipBytes是从现在的的文档坐标点开始跳过多少个开始读取。</p>
<p>上面写入了一个汉字,那么那个offset具体是不是字节数能还是？写入一个汉字以后我跳过4个自己重新再写一个汉字具体的代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">@Test</div><div class="line">   public void test12() throws Exception&#123;</div><div class="line">       //构建随机读写类</div><div class="line">       RandomAccessFile raf = new RandomAccessFile(new File(&quot;conf/object.txt&quot;),&quot;rwd&quot;);</div><div class="line"></div><div class="line">       //在第3个字节的位置写入一个中文字符</div><div class="line">       raf.seek(4);</div><div class="line">       raf.write(&quot;个&quot;.getBytes());</div><div class="line">       raf.close();</div><div class="line">   &#125;</div></pre></td></tr></table></figure>
<p>执行结果如下:</p>
<p><img src="/images/io/io-random-rw-2.png" alt=""></p>
<p>原来的一被复写了,由于一个汉字在utf-8编码下一共占用3个字节,那么可以从结果看出来offset是字节数。通过上面的整理可以总结出：</p>
<pre><code>1 seek是根据给定的字节数移动文档读取指针到指定的位置
2 skipBytes是根据给定的跳过字节数,从现在文件读取指针所在的位置跳过多少个字节,如果超出文件长度,字节跳转到最后。
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/08/spider-study008/" itemprop="url">
                  网络爬虫学习笔记(八) db插入工具的封装
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-07-08T11:55:55+08:00" content="2016-07-08">
              2016-07-08
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/爬虫/" itemprop="url" rel="index">
                    <span itemprop="name">爬虫</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/07/08/spider-study008/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/07/08/spider-study008/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="1-普通数据库连接"><a href="#1-普通数据库连接" class="headerlink" title="1 普通数据库连接"></a>1 普通数据库连接</h2><p>java连接数据库,操作如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line">public class DB &#123;</div><div class="line">    private String dbDriver;</div><div class="line">    private String dbUrl;</div><div class="line">    private String dbUser;</div><div class="line">    private String dbPwd;</div><div class="line"></div><div class="line">    public static DB me()&#123;</div><div class="line">        return new DB();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public Connection getConn() throws ClassNotFoundException, SQLException &#123;</div><div class="line">        Class.forName(dbDriver);</div><div class="line">        Connection conn = DriverManager.getConnection(dbUrl,dbUser,dbPwd);</div><div class="line">        return conn;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public String getDbDriver() &#123;</div><div class="line">        return dbDriver;</div><div class="line">    &#125;</div><div class="line">    public DB setDbDriver(String dbDriver) &#123;</div><div class="line">        this.dbDriver = dbDriver;</div><div class="line">        return this;</div><div class="line">    &#125;</div><div class="line">    public String getDbUrl() &#123;</div><div class="line">        return dbUrl;</div><div class="line">    &#125;</div><div class="line">    public DB setDbUrl(String dbUrl) &#123;</div><div class="line">        this.dbUrl = dbUrl;</div><div class="line">        return this;</div><div class="line">    &#125;</div><div class="line">    public String getDbUser() &#123;</div><div class="line">        return dbUser;</div><div class="line">    &#125;</div><div class="line">    public DB setDbUser(String dbUser) &#123;</div><div class="line">        this.dbUser = dbUser;</div><div class="line">        return this;</div><div class="line">    &#125;</div><div class="line">    public String getDbPwd() &#123;</div><div class="line">        return dbPwd;</div><div class="line">    &#125;</div><div class="line">    public DB setDbPwd(String dbPwd) &#123;</div><div class="line">        this.dbPwd = dbPwd;</div><div class="line">        return this;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>简单的连接数据库：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Connection conn = DB.me().setDbDriver(config.getDriver())</div><div class="line">                            .setDbUrl(config.getUrl())</div><div class="line">                            .setDbUser(config.getUser())</div><div class="line">                            .setDbPwd(config.getPwd())</div><div class="line">                            .getConn();</div></pre></td></tr></table></figure>
<h2 id="2-操作封装"><a href="#2-操作封装" class="headerlink" title="2 操作封装"></a>2 操作封装</h2><p>数据库操作,其实crud操作主要可以看做两类：</p>
<pre><code>查询操作
更新操作
</code></pre><p>删除和更改都算作是更新操作.针对这一类的操作,可以做一步封装.同样的如果查询操作和更新操作等动作我不想写sql,我只想填写去哪个表中,查询条件为多少的数据,同样的查询多少条出来.</p>
<p>可能封装的大致的一个思路如下:</p>
<p>select(String dbPoolName,String tableName,String[] keys,Object[] values,Class bean)</p>
<p>也就是从指定的链接池中读取数据封装成一个对象.当然这个是最简单一个想法。</p>
<p>同样的封装成为一个对象的话,我还需要些对象和数据库之间的对应关系,那么如果我这边有很多的表,同样的就需要建立很多对象.所以可以初步的想将数据读取出来放入到map集合中:</p>
<p>select(String dbPoolName,String tableName,String[] keys,Object[] values,int topNum)</p>
<p>当然需要查询多少数据出来同样是一个需求点。</p>
<p>具体的封装的代码如下:</p>
<p>DBFactory.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div></pre></td><td class="code"><pre><div class="line">public class DBFactory &#123;</div><div class="line">//	封装对数据库的操作</div><div class="line">	private DBHandler dbHandler = null;</div><div class="line">	/**</div><div class="line">	 * 创建对象,用以实现链式操作</div><div class="line">	 * @return</div><div class="line">	 */</div><div class="line">	public static DBFactory me()&#123;</div><div class="line">		return new DBFactory();</div><div class="line">	&#125;</div><div class="line">	/**</div><div class="line">	 * 构造函数初始化操作数据库的对象</div><div class="line">	 */</div><div class="line">	private DBFactory()&#123;</div><div class="line">		dbHandler = new DBHandler();</div><div class="line">	&#125;</div><div class="line">	/**</div><div class="line">	 * 创建表</div><div class="line">	 * @param dbPoolName</div><div class="line">	 * @param sql</div><div class="line">	 */</div><div class="line">	public void create(String dbPoolName,String sql)&#123;</div><div class="line">		if(Validate.isStrEmpty(dbPoolName) || Validate.isStrEmpty(sql))return;</div><div class="line">		dbHandler.create(dbPoolName,sql);</div><div class="line">	&#125;</div><div class="line">	/**</div><div class="line">	 * 给定一个sql语句执行查询</div><div class="line">	 * @param dbPoolName</div><div class="line">	 * @param sql</div><div class="line">	 * @return 将结果封装到对象集合中</div><div class="line">	 */</div><div class="line">	public List&lt;Object&gt; select(String dbPoolName,String sql)&#123;</div><div class="line">		if(Validate.isStrEmpty(dbPoolName) || Validate.isStrEmpty(sql))return null;</div><div class="line">		List&lt;Object&gt; list = dbHandler.select(dbPoolName,sql);</div><div class="line">		return list;</div><div class="line">	&#125;</div><div class="line">	/**</div><div class="line">	 * 给定一个sql语句执行查询</div><div class="line">	 * @param dbPoolName</div><div class="line">	 * @param sql</div><div class="line">	 * @param bean</div><div class="line">	 * @return 将结果封装到对象集合中</div><div class="line">	 */</div><div class="line">	public &lt;T&gt; List&lt;T&gt; select(String dbPoolName,String sql,Class bean)&#123;</div><div class="line">		if(Validate.isStrEmpty(dbPoolName) || Validate.isStrEmpty(sql))return null;</div><div class="line">		List&lt;T&gt; list = dbHandler.select(dbPoolName,sql,bean);</div><div class="line">		return list;</div><div class="line">	&#125;</div><div class="line">	/**</div><div class="line">	 * 给定表明,以及条件字段进行查询</div><div class="line">	 * 如果条件中有like类似的语句,使用如下设置</div><div class="line">	 * key：url like</div><div class="line">	 * values: &apos;%www.taobao.com%&apos;</div><div class="line">	 * @param dbPoolName</div><div class="line">	 * @param tableName</div><div class="line">	 * @param values</div><div class="line">	 * @param bean</div><div class="line">	 * @return 将结果封装到对象集合中</div><div class="line">	 */</div><div class="line">	public &lt;T&gt; List&lt;T&gt; select(String dbPoolName,String tableName,String[] keys,Object[] values,Class bean)&#123;</div><div class="line">		if(Validate.isStrEmpty(dbPoolName) || Validate.isStrEmpty(tableName))return null;</div><div class="line">		String sql = &quot;select * from &quot; + tableName + DBUtils.toSQL(keys, values, OperatorType.SELECT);</div><div class="line">		return select(dbPoolName,sql,bean);</div><div class="line">	&#125;</div><div class="line">	/**</div><div class="line">	 * 给定表名,以及条件字段查询出多少条数据</div><div class="line">	 * 封装到对象集合中</div><div class="line">	 * @param dbPoolName</div><div class="line">	 * @param tableName</div><div class="line">	 * @param values</div><div class="line">	 * @param topNum</div><div class="line">	 * @param bean</div><div class="line">	 * @return</div><div class="line">	 */</div><div class="line">	public &lt;T&gt; List&lt;T&gt; select(String dbPoolName,String tableName,String[] keys,Object[] values,int topNum,Class bean)&#123;</div><div class="line">		if(Validate.isStrEmpty(dbPoolName) || Validate.isStrEmpty(tableName))return null;</div><div class="line">		if(Validate.isNegative(topNum))return null;</div><div class="line">		String sql = &quot;select * from &quot; + tableName + DBUtils.toSQL(keys, values, OperatorType.SELECT) + &quot; limit &quot; + topNum;</div><div class="line">		return select(dbPoolName,sql,bean);</div><div class="line">	&#125;</div><div class="line">	/**</div><div class="line">	 * 从数据库中根据条件查询出部分字段</div><div class="line">	 * 封装到对象集合中</div><div class="line">	 * @param dbPoolName</div><div class="line">	 * @param tableName</div><div class="line">	 * @param fields</div><div class="line">	 * @param values</div><div class="line">	 * @param bean</div><div class="line">	 * @return</div><div class="line">	 */</div><div class="line">	public &lt;T&gt; List&lt;T&gt; select(String dbPoolName,String tableName,String[] fields,String[] keys,Object[] values,Class bean)&#123;</div><div class="line">		if(Validate.isStrEmpty(dbPoolName) || Validate.isStrEmpty(tableName))return null;</div><div class="line">		if(Validate.isNull(fields) || Validate.isEmpty(fields))return null;</div><div class="line">		String sql = &quot;select &quot; + DBUtils.toSQL(fields, &quot;,&quot;) + &quot; from &quot; + tableName + DBUtils.toSQL(keys, values, OperatorType.SELECT);</div><div class="line">		return select(dbPoolName,sql,bean);</div><div class="line">	&#125;</div><div class="line">	/**</div><div class="line">	 * 从数据库中根据条件查询出一定数据的部分字段</div><div class="line">	 * 封装到对象集合中</div><div class="line">	 * @param dbPoolName</div><div class="line">	 * @param tableName</div><div class="line">	 * @param fields</div><div class="line">	 * @param values</div><div class="line">	 * @param topNum</div><div class="line">	 * @param bean</div><div class="line">	 * @return</div><div class="line">	 */</div><div class="line">	public &lt;T&gt; List&lt;T&gt; select(String dbPoolName,String tableName,String[] fields,String[] keys,Object[] values,int topNum,Class bean)&#123;</div><div class="line">		if(Validate.isStrEmpty(dbPoolName) || Validate.isStrEmpty(tableName))return null;</div><div class="line">		if(Validate.isNull(fields) || Validate.isEmpty(fields))return null;</div><div class="line">		if(Validate.isNegative(topNum))return null;</div><div class="line">		String sql  = &quot;select top &quot;+ topNum + &quot; &quot; + DBUtils.toSQL(fields, &quot;,&quot;) + &quot; from &quot; + tableName + DBUtils.toSQL(keys, values, OperatorType.SELECT);</div><div class="line">		return select(dbPoolName,sql,bean);</div><div class="line">	&#125;</div><div class="line">	/**</div><div class="line">	 * 根据给定的查询条件,将结果封装到map中</div><div class="line">	 * @param tableName</div><div class="line">	 * @param values</div><div class="line">	 * @param topNum</div><div class="line">	 * @return</div><div class="line">	 */</div><div class="line">	public List&lt;Map&lt;String,Object&gt;&gt; select(String dbPoolName,String tableName,String[] keys,Object[] values,int topNum)&#123;</div><div class="line">		if(Validate.isStrEmpty(dbPoolName) || Validate.isStrEmpty(tableName))return null;</div><div class="line">		if(Validate.isNegative(topNum))return null;</div><div class="line">		String sql  = &quot;select top &quot; + topNum + &quot; * from &quot; + tableName + DBUtils.toSQL(keys, values, OperatorType.SELECT);</div><div class="line">		return dbHandler.select(dbPoolName,sql,0);</div><div class="line">	&#125;</div><div class="line">	/**</div><div class="line">	 * 根据给定的查询条件,将结果封装到map中</div><div class="line">	 * @return</div><div class="line">	 */</div><div class="line">	public List&lt;Map&lt;String,Object&gt;&gt; selectToMap(String dbPoolName,String SQL)&#123;</div><div class="line">		if(Validate.isStrEmpty(dbPoolName))return null;</div><div class="line">		return dbHandler.select(dbPoolName,SQL,0);</div><div class="line">	&#125;</div><div class="line">	/**</div><div class="line">	 * 根据给定的查询条件,将结果封装到map中</div><div class="line">	 * @param tableName</div><div class="line">	 * @param values</div><div class="line">	 * @return</div><div class="line">	 */</div><div class="line">	public List&lt;Map&lt;String,Object&gt;&gt; select(String dbPoolName,String tableName,String[] keys,Object[] values)&#123;</div><div class="line">		if(Validate.isStrEmpty(dbPoolName) || Validate.isStrEmpty(tableName))return null;</div><div class="line">		String sql  = &quot;select * from &quot; + tableName + DBUtils.toSQL(keys, values, OperatorType.SELECT);</div><div class="line">		return dbHandler.select(dbPoolName,sql,0);</div><div class="line">	&#125;</div><div class="line">	/**</div><div class="line">	 * 根据表名以及条件查询出某一个字段</div><div class="line">	 * 放入到集合中，不进行封装到对象中</div><div class="line">	 * @param tableName</div><div class="line">	 * @param field</div><div class="line">	 * @param values</div><div class="line">	 * @return</div><div class="line">	 */</div><div class="line">	public List&lt;Object&gt; select(String dbPoolName,String tableName,String field,String[] keys,Object[] values)&#123;</div><div class="line">		if(Validate.isStrEmpty(dbPoolName) || Validate.isStrEmpty(tableName))return null;</div><div class="line">		String sql  = &quot;select &quot; + field + &quot; from &quot; + tableName + DBUtils.toSQL(keys, values, OperatorType.SELECT);</div><div class="line">		return select(dbPoolName,sql,String.class);</div><div class="line">	&#125;</div><div class="line">	/**</div><div class="line">	 * 根据表名以及条件查询出一定条数据的数据</div><div class="line">	 * @param tableName</div><div class="line">	 * @param field</div><div class="line">	 * @param values</div><div class="line">	 * @param topNum</div><div class="line">	 * @return</div><div class="line">	 */</div><div class="line">	public List&lt;Object&gt; select(String dbPoolName,String tableName,String field,String[] keys,Object[] values,int topNum)&#123;</div><div class="line">		if(Validate.isStrEmpty(dbPoolName) || Validate.isStrEmpty(tableName))return null;</div><div class="line">		if(Validate.isNegative(topNum))return null;</div><div class="line">		String sql  = &quot;select top &quot; + topNum + &quot; &quot; + field + &quot; from &quot; + tableName + DBUtils.toSQL(keys, values, OperatorType.SELECT);</div><div class="line">		return select(dbPoolName,sql);</div><div class="line">	&#125;</div><div class="line">	/**</div><div class="line">	 * 给定sql,执行插入</div><div class="line">	 * @param dbPoolName</div><div class="line">	 * @param sql</div><div class="line">	 */</div><div class="line">	public boolean insert(String dbPoolName,String sql)&#123;</div><div class="line">		if(Validate.isStrEmpty(dbPoolName) || Validate.isStrEmpty(sql))return false;</div><div class="line">		return dbHandler.insert(dbPoolName,sql);</div><div class="line">	&#125;</div><div class="line">	/**</div><div class="line">	 * 给定表名,向表中插入部分字段</div><div class="line">	 * @param dbPoolName</div><div class="line">	 * @param tableName</div><div class="line">	 * @param keys</div><div class="line">	 * @param values</div><div class="line">	 */</div><div class="line">	public boolean insert(String dbPoolName,String tableName,String[] keys,Object[] values)&#123;</div><div class="line">		if(Validate.isStrEmpty(dbPoolName) || Validate.isStrEmpty(tableName))return false;</div><div class="line">		String sql = &quot;insert into &quot; + tableName + DBUtils.toSQL(keys, values);</div><div class="line">		return dbHandler.insert(dbPoolName,sql);</div><div class="line">	&#125;</div><div class="line">	/**</div><div class="line">	 * 向表中插入一个对象</div><div class="line">	 * @param dbPoolName</div><div class="line">	 * @param tableName</div><div class="line">	 * @param bean</div><div class="line">	 */</div><div class="line">	public &lt;T&gt; boolean insert(String dbPoolName,String tableName,T bean)&#123;</div><div class="line">		if(Validate.isStrEmpty(dbPoolName) || Validate.isStrEmpty(tableName))return false;</div><div class="line">		if(Validate.isNull(bean))return false;</div><div class="line">		List&lt;T&gt; list = new ArrayList&lt;T&gt;();</div><div class="line">		list.add(bean);</div><div class="line">		return insert(dbPoolName,tableName,list,bean.getClass());</div><div class="line">	&#125;</div><div class="line">	/**</div><div class="line">	 * 向表中插入一个对象集合</div><div class="line">	 * 批量插入操作</div><div class="line">	 * @param dbPoolName</div><div class="line">	 * @param tableName</div><div class="line">	 * @param beans</div><div class="line">	 */</div><div class="line">	public &lt;T&gt; boolean insert(String dbPoolName,String tableName,List&lt;T&gt; beans,Class cls)&#123;</div><div class="line">		if(Validate.isStrEmpty(dbPoolName) || Validate.isStrEmpty(tableName))return false;</div><div class="line">		if(Validate.isNull(beans) || Validate.isEmpty(beans.toArray()))return false;</div><div class="line">		String sql = &quot;insert into &quot; + tableName + DBUtils.toSQL(cls);</div><div class="line">		return dbHandler.insert(dbPoolName, sql, beans);</div><div class="line">	&#125;</div><div class="line">	/**</div><div class="line">	 * 向表中插入一个对象集合</div><div class="line">	 * 批量插入操作</div><div class="line">	 * @param dbPoolName</div><div class="line">	 * @param tableName</div><div class="line">	 */</div><div class="line">	public boolean insert(String dbPoolName,String tableName,Map&lt;String,Object&gt; fields)&#123;</div><div class="line">		if(Validate.isStrEmpty(dbPoolName) || Validate.isStrEmpty(tableName))return false;</div><div class="line">		if(Validate.isNull(fields) || Validate.isEmpty(fields.entrySet()))return false;</div><div class="line">		String sql = &quot;insert into &quot; + tableName + DBUtils.toSQL(fields);</div><div class="line">		return dbHandler.insert(dbPoolName, sql);</div><div class="line">	&#125;</div><div class="line">	/**</div><div class="line">	 * 给定sql执行更新操作</div><div class="line">	 * @param dbPoolName</div><div class="line">	 * @param sql</div><div class="line">	 */</div><div class="line">	public void update(String dbPoolName,String sql)&#123;</div><div class="line">		if(Validate.isStrEmpty(dbPoolName) || Validate.isStrEmpty(sql))return;</div><div class="line">		dbHandler.update(dbPoolName,sql);</div><div class="line">	&#125;</div><div class="line">	/**</div><div class="line">	 * 根据给定的参数执行更新操作</div><div class="line">	 * @param dbPoolName</div><div class="line">	 * @param tableName</div><div class="line">	 * @param newkeys</div><div class="line">	 * @param newvalues</div><div class="line">	 * @param keys</div><div class="line">	 * @param values</div><div class="line">	 */</div><div class="line">	public void update(String dbPoolName,String tableName,String[]newkeys,Object[]newvalues,String[] keys,Object[] values)&#123;</div><div class="line">		if(Validate.isStrEmpty(dbPoolName) || Validate.isStrEmpty(tableName))return;</div><div class="line">		if(Validate.isNull(newkeys) || Validate.isEmpty(newkeys))return;</div><div class="line">		if(Validate.isNull(newvalues) || Validate.isEmpty(newvalues))return;</div><div class="line">		String sql = &quot;update &quot; + tableName + DBUtils.toSQL(newkeys, newvalues, OperatorType.UPDATE) + </div><div class="line">				DBUtils.toSQL(keys, values, OperatorType.SELECT);</div><div class="line">		dbHandler.update(dbPoolName,sql);</div><div class="line">	&#125;</div><div class="line">	/**</div><div class="line">	 * 根据参数删除表中数据</div><div class="line">	 * @param dbPoolName</div><div class="line">	 * @param tableName</div><div class="line">	 * @param keys</div><div class="line">	 * @param values</div><div class="line">	 */</div><div class="line">	public void delete(String dbPoolName,String tableName,String[] keys,Object[] values)&#123;</div><div class="line">		if(Validate.isStrEmpty(dbPoolName) || Validate.isStrEmpty(tableName))return;</div><div class="line">		String sql = &quot;delete &quot; + tableName + DBUtils.toSQL(keys, values, OperatorType.SELECT);</div><div class="line">		dbHandler.delete(dbPoolName,sql);</div><div class="line">	&#125;</div><div class="line">	/**</div><div class="line">	 * 根据表名清空表</div><div class="line">	 * @param dbPoolName</div><div class="line">	 * @param tableName</div><div class="line">	 */</div><div class="line">	public void truncate(String dbPoolName,String tableName)&#123;</div><div class="line">		if(Validate.isStrEmpty(dbPoolName) || Validate.isStrEmpty(tableName))return;</div><div class="line">		String sql = &quot;truncate table &quot; + tableName;</div><div class="line">		dbHandler.truncate(dbPoolName, sql);</div><div class="line">	&#125;</div><div class="line">	/**</div><div class="line">	 * 根据给定的表名删除表</div><div class="line">	 * @param dbPoolName</div><div class="line">	 * @param tableName</div><div class="line">	 */</div><div class="line">	public void drop(String dbPoolName,String tableName)&#123;</div><div class="line">		if(Validate.isStrEmpty(dbPoolName) || Validate.isStrEmpty(tableName))return;</div><div class="line">		String sql = &quot;drop table &quot; + tableName;</div><div class="line">		dbHandler.drop(dbPoolName, sql);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="3-数据库连接池"><a href="#3-数据库连接池" class="headerlink" title="3 数据库连接池"></a>3 数据库连接池</h2><p>数据库连接池就是对数据库连接的一个维护管理和复用。当然这个其实是相当复杂的,下面介绍一下简单地实现:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * 数据库连接池</div><div class="line"> * 主要功能：</div><div class="line"> * 1 启动数据库连接池</div><div class="line"> * 2 关闭数据库连接池</div><div class="line"> * 3 增加新的连接</div><div class="line"> * 4 定时检测连接是否失效</div><div class="line"> * @author Administrator</div><div class="line"> */</div><div class="line">public class DBPool &#123;</div><div class="line">    /**</div><div class="line">     * 支持不同的数据</div><div class="line">     */</div><div class="line">    private Map&lt;String,ConcurrentLinkedQueue&lt;Connection&gt;&gt; pool = new HashMap&lt;String,ConcurrentLinkedQueue&lt;Connection&gt;&gt;();</div><div class="line">    private ConcurrentHashMap&lt;String,DBConfig&gt; conf = new ConcurrentHashMap&lt;String,DBConfig&gt;();</div><div class="line"></div><div class="line">    private long DB_POOL_CHECK_TIME = 1000 * 10;</div><div class="line">    private long DB_POOL_INCREASE_TIME = 1000 * 20;</div><div class="line">    /**</div><div class="line">     * 单例对象</div><div class="line">     * @author Administrator</div><div class="line">     *</div><div class="line">     */</div><div class="line">    private static class SingletonClassStance&#123;</div><div class="line">        private static DBPool instance = new DBPool();</div><div class="line">    &#125;</div><div class="line">    /**</div><div class="line">     * 获取单例对象</div><div class="line">     * @return</div><div class="line">     */</div><div class="line">    public static DBPool me()&#123;</div><div class="line">        return SingletonClassStance.instance;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public DBPool build(DBConfig config)&#123;</div><div class="line">        return build(config,config.getMax(),config.getMin());</div><div class="line">    &#125;</div><div class="line">    public DBPool build(DBConfig config,int max,int min)&#123;</div><div class="line">        try &#123;</div><div class="line">//			数据库参数中有一个为空,则抛出异常</div><div class="line">            if(Validate.isNullOrEmpty(config.getName())</div><div class="line">                    || Validate.isNullOrEmpty(config.getDriver())</div><div class="line">                    || Validate.isNullOrEmpty(config.getUrl()))&#123;</div><div class="line">//			   || Validate.isNullOrEmpty(config.getPwd()))&#123;</div><div class="line">                throw new Exception(&quot;the config of db is error....&quot;);</div><div class="line">            &#125;</div><div class="line">            if(max &lt; min || max &lt;= 0 || min &gt; max)&#123;</div><div class="line">                throw new Exception(&quot;the max-size and min-size of db is error....&quot;);</div><div class="line">            &#125;</div><div class="line">//			经对应的配置写入到配置集合中</div><div class="line">            conf.put(config.getName(),config);</div><div class="line">//			判断该给定数据库是否已经在连接池中有数据库对象</div><div class="line">            if(pool.containsKey(config.getName()))&#123;</div><div class="line">//				判断数据库连接池中是否可用连接是否已经达到上限</div><div class="line">                int temp = min - pool.get(config.getName()).size();</div><div class="line">                if(temp &lt;= 0)&#123;</div><div class="line">                    System.err.println(&quot;数据库连接池有足够的可用连接...&quot;);</div><div class="line">                &#125;else&#123;</div><div class="line">//					数据库连接池中可用连接不足,调用补充程序</div><div class="line">                    build(config,temp);</div><div class="line">                &#125;</div><div class="line">            &#125;else&#123;</div><div class="line">//				该数据库连接池还没有创建,现在重建,并填充连接</div><div class="line">                ConcurrentLinkedQueue&lt;Connection&gt; queue = new ConcurrentLinkedQueue&lt;Connection&gt;();</div><div class="line">                pool.put(config.getName(), queue);</div><div class="line">//				数据初始化完毕,执行添加程序</div><div class="line">                int temp = (max - min + 1)/2 + min;</div><div class="line">                build(config,temp);</div><div class="line">            &#125;</div><div class="line">        &#125; catch (Exception e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">        return this;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void build(DBConfig config,int temp)&#123;</div><div class="line">        try &#123;</div><div class="line">            for(int i=0;i&lt;temp;i++)&#123;</div><div class="line">                Connection conn  =  DB.me()</div><div class="line">                        .setDbDriver(config.getDriver())</div><div class="line">                        .setDbUrl(config.getUrl())</div><div class="line">                        .setDbUser(config.getUser())</div><div class="line">                        .setDbPwd(config.getPwd())</div><div class="line">                        .getConn();</div><div class="line">                if(conn == null)continue;</div><div class="line">                pool.get(config.getName()).offer(conn);</div><div class="line">            &#125;</div><div class="line">            System.err.println(&quot;当前缓存池中数据库连接个数为：&quot; + pool.get(config.getName()).size());</div><div class="line">        &#125; catch (Exception e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public Connection getConn(String dbPoolName)&#123;</div><div class="line">        try &#123;</div><div class="line">            if(!pool.containsKey(dbPoolName))&#123;</div><div class="line">                throw new Exception(&quot;the &quot; + dbPoolName + &quot; is not to init....&quot;);</div><div class="line">            &#125;</div><div class="line">            if(!pool.get(dbPoolName).isEmpty())&#123;</div><div class="line">                try &#123;</div><div class="line">                    return pool.get(dbPoolName).poll();</div><div class="line">                &#125; catch (Exception e) &#123;</div><div class="line">                    e.printStackTrace();</div><div class="line">                &#125;</div><div class="line">            &#125;else&#123;</div><div class="line">                DBConfig config = conf.get(dbPoolName);</div><div class="line">                if(config != null)&#123;</div><div class="line">                    return DB.me().setDbDriver(config.getDriver())</div><div class="line">                            .setDbUrl(config.getUrl())</div><div class="line">                            .setDbUser(config.getUser())</div><div class="line">                            .setDbPwd(config.getPwd())</div><div class="line">                            .getConn();</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125; catch (Exception e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">        return null;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void setConn(String dbPoolName,Connection conn)&#123;</div><div class="line">        try &#123;</div><div class="line">            if(conn == null || conn.isClosed())return;</div><div class="line"></div><div class="line">            if(pool.containsKey(dbPoolName))&#123;</div><div class="line">                pool.get(dbPoolName).offer(conn);</div><div class="line">            &#125;</div><div class="line">        &#125; catch (Exception e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    //	自动检测数据库连接是否已经失效</div><div class="line">    public void startTask()&#123;</div><div class="line">        Timer timer = new Timer();</div><div class="line">        CheckTask task = new CheckTask();</div><div class="line">        timer.schedule(task,DB_POOL_CHECK_TIME,DB_POOL_CHECK_TIME);</div><div class="line"></div><div class="line">        IncreaseTask increase = new IncreaseTask();</div><div class="line">        timer.schedule(increase,DB_POOL_INCREASE_TIME,DB_POOL_INCREASE_TIME);</div><div class="line">    &#125;</div><div class="line">    /**</div><div class="line">     * 检测线程,检测数据库连接是否已经失效</div><div class="line">     * @author Administrator</div><div class="line">     */</div><div class="line">    private class CheckTask extends TimerTask &#123;</div><div class="line">        @Override</div><div class="line">        public void run() &#123;</div><div class="line">            check();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        public void check()&#123;</div><div class="line">            for(Map.Entry&lt;String,ConcurrentLinkedQueue&lt;Connection&gt;&gt; entry : pool.entrySet())&#123;</div><div class="line">                for(Connection conn : entry.getValue())&#123;</div><div class="line">                    try &#123;</div><div class="line">                        if(conn.isClosed())&#123;</div><div class="line">                           pool.get(entry.getKey()).remove(conn);</div><div class="line">                            continue;</div><div class="line">                        &#125;</div><div class="line">                        Statement stmt = conn.createStatement();</div><div class="line">                        stmt.executeBatch();</div><div class="line">                    &#125; catch (SQLSyntaxErrorException e) &#123;</div><div class="line">                        e.printStackTrace();</div><div class="line">                    &#125; catch(CommunicationsException e)&#123;</div><div class="line">                        //数据库连接不可用....</div><div class="line">                        System.err.println(&quot;数据库连接不可用,清空连接,重新请求&quot;);</div><div class="line">                        pool.get(entry.getKey()).clear();</div><div class="line">                    &#125; catch(Exception e)&#123;</div><div class="line">                        e.printStackTrace();</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    /**</div><div class="line">     *</div><div class="line">     * @author Administrator</div><div class="line">     */</div><div class="line">    private class IncreaseTask extends TimerTask&#123;</div><div class="line">        @Override</div><div class="line">        public void run() &#123;</div><div class="line">            increase();</div><div class="line">        &#125;</div><div class="line">        /**</div><div class="line">         * 变量配置文件,查找可能需要补充的集合</div><div class="line">         */</div><div class="line">        public void increase()&#123;</div><div class="line">            try &#123;</div><div class="line">                for(Map.Entry&lt;String,DBConfig&gt; entry : conf.entrySet())&#123;</div><div class="line">                    String name = entry.getKey();</div><div class="line">                    DBConfig config = entry.getValue();</div><div class="line">                    if(pool.containsKey(name))&#123;</div><div class="line">                        int temp = config.getMin() - pool.get(name).size();</div><div class="line">                        if(temp &gt; 0)&#123;</div><div class="line">                            addConnection(config,temp,name);</div><div class="line">                        &#125;</div><div class="line">                    &#125;else&#123;</div><div class="line">                        addConnection(config,config.getMin() + (config.getMax() - config.getMin())/2,name);</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125; catch (Exception e) &#123;</div><div class="line">                e.printStackTrace();</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        /**</div><div class="line">         * 给指定域名增加指定的数据库连接</div><div class="line">         * @param name</div><div class="line">         * @param addNum</div><div class="line">         */</div><div class="line">        public void addConnection(DBConfig config,int addNum,String name)&#123;</div><div class="line">            System.err.println(&quot;数据库连接池：&quot; + name + &quot;,可用连接不足,现开始补充&quot; + addNum + &quot;个可用连接&quot;);</div><div class="line">            for(int i=0;i&lt;addNum;i++)&#123;</div><div class="line">                try &#123;</div><div class="line">                    Connection conn = DB.me().setDbDriver(config.getDriver())</div><div class="line">                            .setDbUrl(config.getUrl())</div><div class="line">                            .setDbUser(config.getUser())</div><div class="line">                            .setDbPwd(config.getPwd())</div><div class="line">                            .getConn();</div><div class="line">                    if(pool.containsKey(config.getName()))&#123;</div><div class="line">                        pool.get(config.getName()).offer(conn);</div><div class="line">                    &#125;else&#123;</div><div class="line">                        ConcurrentLinkedQueue&lt;Connection&gt; queue = new ConcurrentLinkedQueue&lt;Connection&gt;();</div><div class="line">                        queue.offer(conn);</div><div class="line">                        pool.put(config.getName(), queue);</div><div class="line">                    &#125;</div><div class="line">                &#125; catch (Exception e) &#123;</div><div class="line">                    e.printStackTrace();</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这个代码只是简单实现了自己的想法,还有很多需要考虑的问题。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/07/spider-study007/" itemprop="url">
                  网络爬虫学习笔记(七) httpclient的使用
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-07-07T11:55:55+08:00" content="2016-07-07">
              2016-07-07
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/爬虫/" itemprop="url" rel="index">
                    <span itemprop="name">爬虫</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/07/07/spider-study007/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/07/07/spider-study007/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="1-Httpclient的使用"><a href="#1-Httpclient的使用" class="headerlink" title="1 Httpclient的使用"></a>1 Httpclient的使用</h2><p>代码结构如下:</p>
<p><img src="/images/httpclient/httpclient-code.png" alt=""></p>
<p>代码有参照开源项目WebMagic的源码,主要代码如下:</p>
<p>AbstractDownloader.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">public abstract class AbstractDownloader implements Downloader&#123;</div><div class="line">	public Page download(String url)&#123;</div><div class="line">		return download(url,null);</div><div class="line">	&#125;</div><div class="line">	public Page download(String url, String charset)&#123;</div><div class="line">		Page page = download(new Request(url), Site.me().setCharset(charset));</div><div class="line">		return page;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Downloader.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">public interface Downloader &#123;</div><div class="line">    /**</div><div class="line">     * 下载网页</div><div class="line">     *</div><div class="line">     * @param request</div><div class="line">     * @param site</div><div class="line">     * @return</div><div class="line">     */</div><div class="line">    public Page download(Request request, Site site);</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 设置下载客户端开启个数</div><div class="line">     *</div><div class="line">     * @param threadNum</div><div class="line">     */</div><div class="line">    public void setThread(int threadNum);</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 下载网页，使用浏览器进行下载</div><div class="line">     * @param request</div><div class="line">     * @param site</div><div class="line">     * @param isUserChrome</div><div class="line">     * @return</div><div class="line">     */</div><div class="line">    public Page download(Request request, Site site, boolean isUserChrome, String path);</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 使用代理进行下载</div><div class="line">     * @param request</div><div class="line">     * @param site</div><div class="line">     * @param host</div><div class="line">     * @param port</div><div class="line">     * @return</div><div class="line">     */</div><div class="line">    public Page download(Request request, Site site, String host, int port);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>HttpClientDownloader.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div></pre></td><td class="code"><pre><div class="line">public class HttpClientDownloader extends AbstractDownloader &#123;</div><div class="line">//	设置httpclient请求缓存池</div><div class="line">	private final Map&lt;String,CloseableHttpClient&gt; httpClients = new HashMap&lt;String,CloseableHttpClient&gt;();</div><div class="line">//	构建httpclient对象器</div><div class="line">	private  HttpClientGenerator httpClientGenerator = new HttpClientGenerator();</div><div class="line">//	编码检测程序</div><div class="line">	private CheckEncoding checkEncoding = new CheckEncoding();</div><div class="line">//	常用参数</div><div class="line">	private static final String CHARSET_REGEX = &quot;(?:&lt;meta.*)(?:charset=)(?:[&apos;\\\&quot;]?)(\\w*-?\\d*)&quot;;</div><div class="line">	private static final String CHARSET_ZHCN = &quot;zh-cn&quot;;</div><div class="line">	private static final int STATUS_CODE_ACCEPT = 200;</div><div class="line"></div><div class="line">	/**</div><div class="line">	 * 通过给定的站点domain获取相应的对这个站点进行操作的下载器对象</div><div class="line">	 * 如果站点为空,则重新获取</div><div class="line">	 * 如果站点不为空,则冲缓存集合中获取下载器</div><div class="line">	 * @param site</div><div class="line">	 * @return</div><div class="line">	 */</div><div class="line">	private CloseableHttpClient getHttpClient(Site site)&#123;</div><div class="line">		if(site == null)&#123;</div><div class="line">			return httpClientGenerator.getClient(null);</div><div class="line">		&#125;</div><div class="line">		String domain = site.getDomain();</div><div class="line">		CloseableHttpClient httpClient = httpClients.get(domain);</div><div class="line">		if(httpClient == null)&#123;</div><div class="line">			httpClient = httpClients.get(domain);</div><div class="line">			synchronized (this) &#123;</div><div class="line">				if(httpClient == null)&#123;</div><div class="line">					httpClient = httpClientGenerator.getClient(site);</div><div class="line">					httpClients.put(domain, httpClient);</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		return httpClient;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	public Page download(Request request, Site site) &#123;</div><div class="line">		return download(request,site,null,-1);</div><div class="line">	&#125;</div><div class="line">	/**</div><div class="line">	 * 将系统返回的网页封装为一个对象</div><div class="line">	 * @param request</div><div class="line">	 * @param charset</div><div class="line">	 * @param httpResponse</div><div class="line">	 * @return</div><div class="line">	 */</div><div class="line">	public Page handlerResponse(Request request, String charset, CloseableHttpResponse httpResponse)&#123;</div><div class="line">		String content = getContent(charset,httpResponse);</div><div class="line">		System.err.println(&quot;下载&quot; + request.getUrl() + &quot;完成,网页源码长度:&quot; + content.length());</div><div class="line">		Page page = new Page();</div><div class="line">		page.setHtml(content);</div><div class="line">//		page.setRequest(request);</div><div class="line">		return page;</div><div class="line">	&#125;</div><div class="line">	/**</div><div class="line">	 * 获取网页源码</div><div class="line">	 * @param nCharset</div><div class="line">	 * @param httpResponse</div><div class="line">	 * @return</div><div class="line">	 */</div><div class="line">	public String getContent(String nCharset, CloseableHttpResponse httpResponse)&#123;</div><div class="line">		try &#123;</div><div class="line">			HttpEntity entity = httpResponse.getEntity();</div><div class="line">			//获得响应流</div><div class="line">			InputStream is = entity.getContent();</div><div class="line">			</div><div class="line">			ByteArrayBuffer buffer = new ByteArrayBuffer(4096);</div><div class="line">			byte[] tmp = new byte[4096];</div><div class="line">			int count;</div><div class="line">			try &#123;</div><div class="line">				while ((count = is.read(tmp)) != -1) &#123;</div><div class="line">					buffer.append(tmp, 0, count);</div><div class="line">				&#125;</div><div class="line">			&#125; catch (EOFException e) &#123;</div><div class="line">			&#125;</div><div class="line">//			使用CheckEncoding来识别编码</div><div class="line">			String charset = checkEncoding.getEncoding(is);</div><div class="line">			</div><div class="line">//			如果上一步没有获得字符编码。那直接从网页源码中的meta标签中更具正则匹配</div><div class="line">			if(!charset.toLowerCase().contains(&quot;utf&quot;) &amp;&amp; !charset.toLowerCase().contains(&quot;gb&quot;))&#123;</div><div class="line">				charset = getCharsetFromMetaTag(buffer);</div><div class="line">				if(charset == null || &quot;&quot;.equals(charset.trim()))&#123;</div><div class="line">					charset = getCharsetFromResponeTitle(entity);</div><div class="line">					if(charset == null || &quot;&quot;.equals(charset.trim()))&#123;</div><div class="line">						//强制编码</div><div class="line">						charset =nCharset;</div><div class="line">					&#125;</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">			return new String(buffer.toByteArray(), charset);</div><div class="line">		&#125; catch (Exception e) &#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125;</div><div class="line">		return null;</div><div class="line">	&#125;</div><div class="line">	/**</div><div class="line">	 * 从相应头中获取网页编码格式</div><div class="line">	 * @param entity</div><div class="line">	 * @return</div><div class="line">	 */</div><div class="line">	private String getCharsetFromResponeTitle(HttpEntity entity)&#123;</div><div class="line">		String charset = null;</div><div class="line">		ContentType contentType = null;</div><div class="line">		try &#123;</div><div class="line">			contentType = ContentType.getOrDefault(entity);</div><div class="line">			Charset charsets = contentType.getCharset();</div><div class="line">			if (charsets != null) &#123;</div><div class="line">				charset = charsets.toString();</div><div class="line">			&#125;</div><div class="line">		&#125; catch (Exception e1) &#123;</div><div class="line">			if (CHARSET_ZHCN.equals(e1.getMessage())) &#123;</div><div class="line">				charset = CHARSET_ZHCN;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		return charset;</div><div class="line">	&#125;</div><div class="line">	/**</div><div class="line">	 * 通meta标签中获取网页编码格式</div><div class="line">	 * @param buffer</div><div class="line">	 * @return</div><div class="line">	 */</div><div class="line">	private String getCharsetFromMetaTag(ByteArrayBuffer buffer)&#123;</div><div class="line">		String charset = null;</div><div class="line">//		如果上一步没有获得字符编码。那直接从网页源码中的meta标签中更具正则匹配</div><div class="line">		Pattern p = Pattern.compile(CHARSET_REGEX,</div><div class="line">				Pattern.CASE_INSENSITIVE);</div><div class="line">		Matcher m = p.matcher(new String(buffer.toByteArray()));</div><div class="line">		boolean result = m.find();</div><div class="line">		if (result) &#123;</div><div class="line">			if (m.groupCount() == 1) &#123;</div><div class="line">				charset = m.group(1);</div><div class="line">			&#125; </div><div class="line">		&#125;</div><div class="line">		return charset;</div><div class="line">	&#125;</div><div class="line">	/**</div><div class="line">	 * 获取请求方法对象</div><div class="line">	 * @param request</div><div class="line">	 * @param site</div><div class="line">	 * @param headers</div><div class="line">	 * @return</div><div class="line">	 */</div><div class="line">	public HttpUriRequest getHttpUriRequest(Request request, Site site, Map&lt;String,String&gt; headers,String host,int port)&#123;</div><div class="line">//		构建方法类对象</div><div class="line">		RequestBuilder builder = selectRequestMethod(request).setUri(request.getUrl());</div><div class="line"></div><div class="line">//		添加请求头数据</div><div class="line">		if(headers != null)&#123;</div><div class="line">			for(Map.Entry&lt;String,String&gt; headerEntry : headers.entrySet())&#123;</div><div class="line">				builder.setHeader(headerEntry.getKey(), headerEntry.getValue());</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">//		设置请求参数</div><div class="line">		RequestConfig.Builder configBuilder = RequestConfig.custom()</div><div class="line">				.setConnectionRequestTimeout(site.getTimeOut())</div><div class="line">				.setConnectTimeout(site.getTimeOut())</div><div class="line">				.setSocketTimeout(site.getTimeOut())</div><div class="line">				.setCookieSpec(CookieSpecs.STANDARD);</div><div class="line">		if(host != null)&#123;</div><div class="line">			configBuilder.setProxy(new HttpHost(host,port));</div><div class="line">		&#125;</div><div class="line"></div><div class="line">//		给方法构建器绑定请求参数</div><div class="line">		builder.setConfig(configBuilder.build());</div><div class="line">		return builder.build();</div><div class="line">	&#125;</div><div class="line">	/**</div><div class="line">	 * 构建一个请求方法类型,并填充相应的参数</div><div class="line">	 * @param request</div><div class="line">	 * @return</div><div class="line">	 */</div><div class="line">	public RequestBuilder selectRequestMethod(Request request)&#123;</div><div class="line">		String method = request.getMethod();</div><div class="line">        if (method == null || method == &quot;GET&quot;) &#123;</div><div class="line">            //default get</div><div class="line">            return RequestBuilder.get();</div><div class="line">        &#125; else if (method == &quot;POST&quot;) &#123;</div><div class="line">            RequestBuilder requestBuilder = RequestBuilder.post();</div><div class="line">            List&lt;NameValuePair&gt; param = new ArrayList&lt;NameValuePair&gt;();</div><div class="line">            for(Map.Entry&lt;String,String&gt; entry : request.getPostData().entrySet())&#123;</div><div class="line">            	param.add(new BasicNameValuePair(entry.getKey(),entry.getValue()));</div><div class="line">            &#125;</div><div class="line">            if (param.size() &gt; 0) &#123;</div><div class="line">                requestBuilder.addParameters((NameValuePair[])param.toArray());</div><div class="line">            &#125;</div><div class="line">            return requestBuilder;</div><div class="line">        &#125;</div><div class="line">        throw new IllegalArgumentException(&quot;Illegal HTTP Method &quot; + method);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	public void setThread(int threadNum) &#123;</div><div class="line">		httpClientGenerator.setPoolSize(threadNum);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	public Page download(Request request, Site site, boolean isUserChrome,String path) &#123;</div><div class="line">		if(!isUserChrome)return download(request,site);</div><div class="line">		SeleniumDownloader chromeLoader = new SeleniumDownloader(path);</div><div class="line">		//使用浏览器进行下载网页</div><div class="line">		String src = chromeLoader.download(request.getUrl());</div><div class="line">		try&#123;</div><div class="line">			chromeLoader.close();</div><div class="line">		&#125;catch (Exception e)&#123;&#125;</div><div class="line"></div><div class="line">		Page page = new Page();</div><div class="line">		page.setHtml(src);</div><div class="line">//		page.setRequest(request);</div><div class="line">		return page;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	public Page download(Request request, Site site, String host, int port) &#123;</div><div class="line">		//		创建请求头以及编码格式参数</div><div class="line">		String charset = null;</div><div class="line">		Map&lt;String,String&gt; headers = null;</div><div class="line">//		初始化参数</div><div class="line">		if(site != null)&#123;</div><div class="line">			charset = site.getCharset();</div><div class="line">			headers = site.getHeader();</div><div class="line">		&#125;</div><div class="line">//		开始执行操作</div><div class="line">		CloseableHttpResponse httpResponse = null;</div><div class="line">		int statusCode = 0;</div><div class="line">		try &#123;</div><div class="line">//			获取请求对象</div><div class="line">			HttpUriRequest httpUriRequest = getHttpUriRequest(request, site, headers,host,port);</div><div class="line">//			执行请求获取相应状态码</div><div class="line">			httpResponse = getHttpClient(site).execute(httpUriRequest);</div><div class="line">			statusCode = httpResponse.getStatusLine().getStatusCode();</div><div class="line">//			将相应状态码放入到请求对象集合中</div><div class="line">			request.setStatusCode(statusCode);</div><div class="line">			if(statusCode == STATUS_CODE_ACCEPT)&#123;</div><div class="line">				Page page = handlerResponse(request,charset,httpResponse);</div><div class="line">				return page;</div><div class="line">			&#125;else&#123;</div><div class="line">				return null;</div><div class="line">			&#125;</div><div class="line">		&#125; catch (Exception e) &#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125;finally&#123;</div><div class="line">			request.setStatusCode(statusCode);</div><div class="line">			try &#123;</div><div class="line">				if(httpResponse != null)&#123;</div><div class="line">					EntityUtils.consume(httpResponse.getEntity());</div><div class="line">				&#125;</div><div class="line">			&#125; catch (Exception e) &#123;</div><div class="line">				e.printStackTrace();</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		return null;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>HttpClientGenerator.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div></pre></td><td class="code"><pre><div class="line">public class HttpClientGenerator &#123;</div><div class="line">	private PoolingHttpClientConnectionManager manager = null;</div><div class="line">	</div><div class="line">	/**</div><div class="line">	 * 创建对象</div><div class="line">	 */</div><div class="line">	public HttpClientGenerator()&#123;</div><div class="line">//		注册链接请求类型</div><div class="line">		Registry&lt;ConnectionSocketFactory&gt; reg = RegistryBuilder.&lt;ConnectionSocketFactory&gt;create()</div><div class="line">				.register(&quot;http&quot;, PlainConnectionSocketFactory.INSTANCE)</div><div class="line">				.register(&quot;https&quot;, SSLConnectionSocketFactory.getSocketFactory())</div><div class="line">				.build();</div><div class="line">//		给链接池绑定注册类型</div><div class="line">		manager = new PoolingHttpClientConnectionManager(reg);</div><div class="line">		manager.setDefaultMaxPerRoute(100);</div><div class="line">	&#125;</div><div class="line">	/**</div><div class="line">	 * 设置连接池大小</div><div class="line">	 * @param size</div><div class="line">	 * @return</div><div class="line">	 */</div><div class="line">	public HttpClientGenerator setPoolSize(int size)&#123;</div><div class="line">		manager.setMaxTotal(size);</div><div class="line">		return this;</div><div class="line">	&#125;</div><div class="line">	/**</div><div class="line">	 * 给定一个站点获取执行下载的httpclient</div><div class="line">	 * @param site</div><div class="line">	 * @return</div><div class="line">	 */</div><div class="line">	public CloseableHttpClient getClient(Site site)&#123;</div><div class="line">		return generateClient(site);</div><div class="line">	&#125;</div><div class="line">	/**</div><div class="line">	 * 通过给定的站点获取指定的下载器对象</div><div class="line">	 * @param site</div><div class="line">	 * @return</div><div class="line">	 */</div><div class="line">	private CloseableHttpClient generateClient(Site site)&#123;</div><div class="line">		HttpClientBuilder httpClientBuilder = HttpClients.custom()</div><div class="line">				.setConnectionManager(manager);</div><div class="line">		if(site != null &amp;&amp; site.getUserAgent() != null)&#123;</div><div class="line">			httpClientBuilder.setUserAgent(site.getUserAgent());</div><div class="line">		&#125;else&#123;</div><div class="line">			httpClientBuilder.setUserAgent(&quot;&quot;);</div><div class="line">		&#125;</div><div class="line">		if(site == null || site.isUseGzip())&#123;</div><div class="line">			httpClientBuilder.addInterceptorFirst(new HttpRequestInterceptor() &#123;</div><div class="line">				public void process(HttpRequest request, HttpContext context)</div><div class="line">						throws HttpException, IOException &#123;</div><div class="line">					if(!request.containsHeader(&quot;Accept-Encoding&quot;))&#123;</div><div class="line">						request.addHeader(&quot;Accept-Encoding&quot;,&quot;gzip&quot;);</div><div class="line">					&#125;</div><div class="line">				&#125;</div><div class="line">			&#125;);</div><div class="line">		&#125;</div><div class="line">//		这是socket参数--&gt;保持连接，是否延长</div><div class="line">		SocketConfig socketConfig = SocketConfig.custom().setSoKeepAlive(true)</div><div class="line">				.setTcpNoDelay(true).build();</div><div class="line">		httpClientBuilder.setDefaultSocketConfig(socketConfig);</div><div class="line">		generateCookie(httpClientBuilder,site);</div><div class="line">		return httpClientBuilder.build();</div><div class="line">	&#125;</div><div class="line">	/**</div><div class="line">	 * 设置默认添加的cookie参数</div><div class="line">	 * @param httpClientBuilder</div><div class="line">	 * @param site</div><div class="line">	 */</div><div class="line">	private void generateCookie(HttpClientBuilder httpClientBuilder, Site site)&#123;</div><div class="line">		CookieStore cookieStore = new BasicCookieStore();</div><div class="line">		if(site.getCookies() != null &amp;&amp; site.getCookies().size() &gt; 0)&#123;</div><div class="line">			for(Map.Entry&lt;String,String&gt; entry : site.getCookies().entrySet())&#123;</div><div class="line">				BasicClientCookie cookie = new BasicClientCookie(entry.getKey(),entry.getValue());</div><div class="line">				cookie.setDomain(site.getDomain());</div><div class="line">				cookieStore.addCookie(cookie);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		httpClientBuilder.setDefaultCookieStore(cookieStore);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>IRequest.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">public interface IRequest &#123;</div><div class="line">	/**</div><div class="line">	 * 设置下载方式</div><div class="line">	 * @param type</div><div class="line">	 */</div><div class="line">	public IRequest addMethodType(String type);</div><div class="line">	/**</div><div class="line">	 * 向请求头中添加数据</div><div class="line">	 * @param key</div><div class="line">	 * @param value</div><div class="line">	 */</div><div class="line">	public IRequest addHeader(String key, String value);</div><div class="line">	/**</div><div class="line">	 * 向请求头中添加cookie信息</div><div class="line">	 * @param key</div><div class="line">	 * @param cookie</div><div class="line">	 * @return</div><div class="line">	 */</div><div class="line">	public IRequest addCookie(String key, String cookie);</div><div class="line">	/**</div><div class="line">	 * 添加data</div><div class="line">	 * @param key</div><div class="line">	 * @param value</div><div class="line">	 * @return</div><div class="line">	 */</div><div class="line">	public IRequest addPostData(String key, String value);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="2-下载编码识别"><a href="#2-下载编码识别" class="headerlink" title="2 下载编码识别"></a>2 下载编码识别</h2><p>编码的识别主要是读取一个指定的自己数组,通过判断字节数组中满足不同编码范围的数据的多少,计算出一个可能性的概率值,通过这个值来判定是那种编码格式,这种方式叫做最大或然算法,具体的代码是转的,如下:</p>
<p>CheckEncoding.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div><div class="line">332</div><div class="line">333</div><div class="line">334</div><div class="line">335</div><div class="line">336</div><div class="line">337</div><div class="line">338</div><div class="line">339</div><div class="line">340</div><div class="line">341</div><div class="line">342</div><div class="line">343</div><div class="line">344</div><div class="line">345</div><div class="line">346</div><div class="line">347</div><div class="line">348</div><div class="line">349</div><div class="line">350</div><div class="line">351</div><div class="line">352</div><div class="line">353</div><div class="line">354</div><div class="line">355</div><div class="line">356</div><div class="line">357</div><div class="line">358</div><div class="line">359</div><div class="line">360</div><div class="line">361</div><div class="line">362</div><div class="line">363</div><div class="line">364</div><div class="line">365</div><div class="line">366</div><div class="line">367</div><div class="line">368</div><div class="line">369</div><div class="line">370</div><div class="line">371</div><div class="line">372</div><div class="line">373</div><div class="line">374</div><div class="line">375</div><div class="line">376</div><div class="line">377</div><div class="line">378</div><div class="line">379</div><div class="line">380</div><div class="line">381</div><div class="line">382</div><div class="line">383</div><div class="line">384</div><div class="line">385</div><div class="line">386</div><div class="line">387</div><div class="line">388</div><div class="line">389</div><div class="line">390</div><div class="line">391</div><div class="line">392</div><div class="line">393</div><div class="line">394</div><div class="line">395</div><div class="line">396</div><div class="line">397</div><div class="line">398</div><div class="line">399</div><div class="line">400</div><div class="line">401</div><div class="line">402</div><div class="line">403</div><div class="line">404</div><div class="line">405</div><div class="line">406</div><div class="line">407</div><div class="line">408</div><div class="line">409</div><div class="line">410</div><div class="line">411</div><div class="line">412</div><div class="line">413</div><div class="line">414</div><div class="line">415</div><div class="line">416</div><div class="line">417</div><div class="line">418</div><div class="line">419</div><div class="line">420</div><div class="line">421</div><div class="line">422</div><div class="line">423</div><div class="line">424</div><div class="line">425</div><div class="line">426</div><div class="line">427</div><div class="line">428</div><div class="line">429</div><div class="line">430</div><div class="line">431</div><div class="line">432</div><div class="line">433</div><div class="line">434</div><div class="line">435</div><div class="line">436</div><div class="line">437</div><div class="line">438</div><div class="line">439</div><div class="line">440</div><div class="line">441</div><div class="line">442</div><div class="line">443</div><div class="line">444</div><div class="line">445</div><div class="line">446</div><div class="line">447</div><div class="line">448</div><div class="line">449</div><div class="line">450</div><div class="line">451</div><div class="line">452</div><div class="line">453</div><div class="line">454</div><div class="line">455</div><div class="line">456</div><div class="line">457</div><div class="line">458</div><div class="line">459</div><div class="line">460</div><div class="line">461</div><div class="line">462</div><div class="line">463</div><div class="line">464</div><div class="line">465</div><div class="line">466</div><div class="line">467</div><div class="line">468</div><div class="line">469</div><div class="line">470</div><div class="line">471</div><div class="line">472</div><div class="line">473</div><div class="line">474</div><div class="line">475</div><div class="line">476</div><div class="line">477</div><div class="line">478</div><div class="line">479</div><div class="line">480</div><div class="line">481</div><div class="line">482</div><div class="line">483</div><div class="line">484</div><div class="line">485</div><div class="line">486</div><div class="line">487</div><div class="line">488</div><div class="line">489</div><div class="line">490</div><div class="line">491</div><div class="line">492</div><div class="line">493</div><div class="line">494</div><div class="line">495</div><div class="line">496</div><div class="line">497</div><div class="line">498</div><div class="line">499</div><div class="line">500</div><div class="line">501</div><div class="line">502</div><div class="line">503</div><div class="line">504</div><div class="line">505</div><div class="line">506</div><div class="line">507</div><div class="line">508</div><div class="line">509</div><div class="line">510</div><div class="line">511</div><div class="line">512</div><div class="line">513</div><div class="line">514</div><div class="line">515</div><div class="line">516</div><div class="line">517</div><div class="line">518</div><div class="line">519</div><div class="line">520</div><div class="line">521</div><div class="line">522</div><div class="line">523</div><div class="line">524</div><div class="line">525</div><div class="line">526</div><div class="line">527</div><div class="line">528</div><div class="line">529</div><div class="line">530</div><div class="line">531</div><div class="line">532</div><div class="line">533</div><div class="line">534</div><div class="line">535</div><div class="line">536</div><div class="line">537</div><div class="line">538</div><div class="line">539</div><div class="line">540</div><div class="line">541</div><div class="line">542</div><div class="line">543</div><div class="line">544</div><div class="line">545</div><div class="line">546</div><div class="line">547</div><div class="line">548</div><div class="line">549</div><div class="line">550</div><div class="line">551</div><div class="line">552</div><div class="line">553</div><div class="line">554</div><div class="line">555</div><div class="line">556</div><div class="line">557</div><div class="line">558</div><div class="line">559</div><div class="line">560</div><div class="line">561</div><div class="line">562</div><div class="line">563</div><div class="line">564</div><div class="line">565</div></pre></td><td class="code"><pre><div class="line">public class CheckEncoding extends Encode&#123;</div><div class="line">	/**</div><div class="line">	 * </div><div class="line">	 * 构造函数</div><div class="line">	 * 作者：zhouyh</div><div class="line">	 */</div><div class="line">	public CheckEncoding() &#123;</div><div class="line">		super();</div><div class="line">		GB2312format = new int[94][94];</div><div class="line">		GBKformat = new int[126][191];</div><div class="line">		Big5format = new int[94][158];</div><div class="line">		EUC_KRformat = new int[94][94];</div><div class="line">		JPformat = new int[94][94];</div><div class="line"></div><div class="line">		// 初始化编码格式</div><div class="line">		init();</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	public String getEncoding(final String path) &#123;</div><div class="line">		return check(getEncodeValue(path));</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	public String getEncoding(final InputStream in) &#123;</div><div class="line">		return check(getEncodeValue(in));</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	public String getEncoding(final byte[] buffer) &#123;</div><div class="line">		return check(getEncodeValue(buffer));</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	public String getEncoding(final URL url) &#123;</div><div class="line">		return check(getEncodeValue(url));</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	public String check(final int result) &#123;</div><div class="line">		if (result == -1) &#123;</div><div class="line">			return nicename[UNKNOWN];</div><div class="line">		&#125;</div><div class="line">		return nicename[result];</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	/**</div><div class="line">	 * 解析指定字符串路径编码所用格式</div><div class="line">	 * </div><div class="line">	 * @param path</div><div class="line">	 * @return</div><div class="line">	 */</div><div class="line">	private int getEncodeValue(String path) &#123;</div><div class="line">		int express = UNKNOWN;</div><div class="line">		if (path.startsWith(&quot;http://&quot;)) &#123;</div><div class="line">			try &#123;</div><div class="line">				express = getEncodeValue(new URL(path));</div><div class="line">			&#125; catch (MalformedURLException e) &#123;</div><div class="line">				express = -1;</div><div class="line">			&#125;</div><div class="line">		&#125; else &#123;</div><div class="line">			express = getEncodeValue(new File(path));</div><div class="line">		&#125;</div><div class="line">		return express;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	/**</div><div class="line">	 * </div><div class="line">	 * 解析指定InputStream所用编码，返回或然率最高的编码类型数值</div><div class="line">	 * </div><div class="line">	 * @param in</div><div class="line">	 * @return</div><div class="line">	 */</div><div class="line">	public int getEncodeValue(InputStream in) &#123;</div><div class="line">		byte[] rawtext = new byte[8192];</div><div class="line">		int bytesread = 0, byteoffset = 0;</div><div class="line">		int express = UNKNOWN;</div><div class="line">		InputStream stream = in;</div><div class="line">		try &#123;</div><div class="line">			while ((bytesread = stream.read(rawtext, byteoffset, rawtext.length- byteoffset)) &gt; 0) &#123;</div><div class="line">				byteoffset += bytesread;</div><div class="line">			&#125;</div><div class="line">			express = getEncodeValue(rawtext);</div><div class="line">		&#125; catch (Exception e) &#123;</div><div class="line">			express = -1;</div><div class="line">		&#125;</div><div class="line">		return express;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	/**</div><div class="line">	 * 解析指定url下数据所用编码，返回或然率最高的编码类型数值</div><div class="line">	 * </div><div class="line">	 * @param url</div><div class="line">	 * @return</div><div class="line">	 */</div><div class="line">	public int getEncodeValue(URL url) &#123;</div><div class="line"></div><div class="line">		InputStream stream;</div><div class="line">		try &#123;</div><div class="line">			stream = url.openStream();</div><div class="line">		&#125; catch (IOException e) &#123;</div><div class="line">			stream = null;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		return getEncodeValue(stream);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	/**</div><div class="line">	 * 解析指定file所用编码，返回或然率最高的编码类型数值</div><div class="line">	 * </div><div class="line">	 * @param file</div><div class="line">	 * @return</div><div class="line">	 */</div><div class="line">	public int getEncodeValue(File file) &#123;</div><div class="line">		byte[] buffer;</div><div class="line">		try &#123;</div><div class="line">			buffer = read(new FileInputStream(file));</div><div class="line">		&#125; catch (FileNotFoundException e) &#123;</div><div class="line">			buffer = null;</div><div class="line">		&#125;</div><div class="line">		return getEncodeValue(buffer);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	/**</div><div class="line">	 * 将inputstream转为byte[]</div><div class="line">	 * </div><div class="line">	 * @param inputStream</div><div class="line">	 * @return</div><div class="line">	 */</div><div class="line">	private final byte[] read(final InputStream inputStream) &#123;</div><div class="line">		byte[] arrayByte = null;</div><div class="line">		ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();</div><div class="line">		byte[] bytes = new byte[8192];</div><div class="line">		try &#123;</div><div class="line">			bytes = new byte[inputStream.available()];</div><div class="line">			int read;</div><div class="line">			while ((read = inputStream.read(bytes)) &gt;= 0) &#123;</div><div class="line">				byteArrayOutputStream.write(bytes, 0, read);</div><div class="line">			&#125;</div><div class="line">			arrayByte = byteArrayOutputStream.toByteArray();</div><div class="line">		&#125; catch (IOException e) &#123;</div><div class="line">			return null;</div><div class="line">		&#125;</div><div class="line">		return arrayByte;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	/**</div><div class="line">	 * 解析指定byte[]所用编码，返回或然率最高的数值类型</div><div class="line">	 * 方法名：getEncodeValue</div><div class="line">	 * 描述：</div><div class="line">	 * @param content</div><div class="line">	 * @return</div><div class="line">	 */</div><div class="line">	public int getEncodeValue(byte[] content) &#123;</div><div class="line">		if (content == null)&#123;</div><div class="line">			return -1;</div><div class="line">		&#125;</div><div class="line">		int[] scores;</div><div class="line">		int index, maxscore = 0;</div><div class="line">		int encoding = UNKNOWN;</div><div class="line">		scores = new int[TOTALT];</div><div class="line">		// 分配或然率</div><div class="line">		scores[GB2312] = gb2312probability(content);</div><div class="line">		scores[GBK] = gbkprobability(content);</div><div class="line">		scores[BIG5] = big5probability(content);</div><div class="line">		scores[UTF8] = utf8probability(content);</div><div class="line">		scores[UNICODE] = utf16probability(content);</div><div class="line">		scores[EUC_KR] = euc_krprobability(content);</div><div class="line">		scores[ASCII] = asciiprobability(content);</div><div class="line">		scores[SJIS] = sjisprobability(content);</div><div class="line">		scores[EUC_JP] = euc_jpprobability(content);</div><div class="line">		scores[UNKNOWN] = 0;</div><div class="line"></div><div class="line">		// 概率比较</div><div class="line">		for (index = 0; index &lt; TOTALT; index++) &#123;</div><div class="line">			if (scores[index] &gt; maxscore) &#123;</div><div class="line">				// 索引</div><div class="line">				encoding = index;</div><div class="line">				// 最大几率</div><div class="line">				maxscore = scores[index];</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		// 返回或然率大于50%的数据</div><div class="line">		if (maxscore &lt;= 50) &#123;</div><div class="line">			encoding = UNKNOWN;</div><div class="line">		&#125;</div><div class="line">		return encoding;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	/**</div><div class="line">	 * 检查为gb2312的或然率</div><div class="line">	 * 方法名：gb2312probability</div><div class="line">	 * 描述：</div><div class="line">	 * @param content</div><div class="line">	 * @return</div><div class="line">	 */</div><div class="line">	private int gb2312probability(byte[] content) &#123;</div><div class="line">		int i, rawtextlen = 0;</div><div class="line">		int dbchars = 1, gbchars = 1;</div><div class="line">		long gbformat = 0, totalformat = 1;</div><div class="line">		float rangeval = 0, formatval = 0;</div><div class="line">		int row, column;</div><div class="line"></div><div class="line">		// 检查是否在亚洲汉字范围内</div><div class="line">		rawtextlen = content.length;</div><div class="line">		for (i = 0; i &lt; rawtextlen - 1; i++) &#123;</div><div class="line">			if (content[i] &gt;= 0) &#123;</div><div class="line">			&#125; else &#123;</div><div class="line">				dbchars++;</div><div class="line">				// 汉字GB码由两个字节组成，每个字节的范围是0xA1 ~ 0xFE</div><div class="line">				if ((byte) 0xA1 &lt;= content[i] &amp;&amp; content[i] &lt;= (byte) 0xF7</div><div class="line">						&amp;&amp; (byte) 0xA1 &lt;= content[i + 1]</div><div class="line">						&amp;&amp; content[i + 1] &lt;= (byte) 0xFE) &#123;</div><div class="line">					gbchars++;</div><div class="line">					totalformat += 500;</div><div class="line">					row = content[i] + 256 - 0xA1;</div><div class="line">					column = content[i + 1] + 256 - 0xA1;</div><div class="line">					if (GB2312format[row][column] != 0) &#123;</div><div class="line">						gbformat += GB2312format[row][column];</div><div class="line">					&#125; else if (15 &lt;= row &amp;&amp; row &lt; 55) &#123;</div><div class="line">						// 在gb编码范围</div><div class="line">						gbformat += 200;</div><div class="line">					&#125;</div><div class="line"></div><div class="line">				&#125;</div><div class="line">				i++;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		rangeval = 50 * ((float) gbchars / (float) dbchars);</div><div class="line">		formatval = 50 * ((float) gbformat / (float) totalformat);</div><div class="line"></div><div class="line">		return (int) (rangeval + formatval);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	/**</div><div class="line">	 * 检查为gbk的或然率</div><div class="line">	 * 方法名：gbkprobability</div><div class="line">	 * 描述：</div><div class="line">	 * @param content</div><div class="line">	 * @return</div><div class="line">	 */</div><div class="line">	private int gbkprobability(byte[] content) &#123;</div><div class="line">		int i, rawtextlen = 0;</div><div class="line"></div><div class="line">		int dbchars = 1, gbchars = 1;</div><div class="line">		long gbformat = 0, totalformat = 1;</div><div class="line">		float rangeval = 0, formatval = 0;</div><div class="line">		int row, column;</div><div class="line">		rawtextlen = content.length;</div><div class="line">		for (i = 0; i &lt; rawtextlen - 1; i++) &#123;</div><div class="line">			if (content[i] &gt;= 0) &#123;</div><div class="line">			&#125; else &#123;</div><div class="line">				dbchars++;</div><div class="line">				if ((byte) 0xA1 &lt;= content[i] &amp;&amp; content[i] &lt;= (byte) 0xF7</div><div class="line">						&amp;&amp; // gb范围</div><div class="line">						(byte) 0xA1 &lt;= content[i + 1]</div><div class="line">						&amp;&amp; content[i + 1] &lt;= (byte) 0xFE) &#123;</div><div class="line">					gbchars++;</div><div class="line">					totalformat += 500;</div><div class="line">					row = content[i] + 256 - 0xA1;</div><div class="line">					column = content[i + 1] + 256 - 0xA1;</div><div class="line">					if (GB2312format[row][column] != 0) &#123;</div><div class="line">						gbformat += GB2312format[row][column];</div><div class="line">					&#125; else if (15 &lt;= row &amp;&amp; row &lt; 55) &#123;</div><div class="line">						gbformat += 200;</div><div class="line">					&#125;</div><div class="line"></div><div class="line">				&#125; else if ((byte) 0x81 &lt;= content[i]</div><div class="line">						&amp;&amp; content[i] &lt;= (byte) 0xFE &amp;&amp; // gb扩展区域</div><div class="line">						(((byte) 0x80 &lt;= content[i + 1] &amp;&amp; content[i + 1] &lt;= (byte) 0xFE) || ((byte) 0x40 &lt;= content[i + 1] &amp;&amp; content[i + 1] &lt;= (byte) 0x7E))) &#123;</div><div class="line">					gbchars++;</div><div class="line">					totalformat += 500;</div><div class="line">					row = content[i] + 256 - 0x81;</div><div class="line">					if (0x40 &lt;= content[i + 1] &amp;&amp; content[i + 1] &lt;= 0x7E) &#123;</div><div class="line">						column = content[i + 1] - 0x40;</div><div class="line">					&#125; else &#123;</div><div class="line">						column = content[i + 1] + 256 - 0x40;</div><div class="line">					&#125;</div><div class="line">					if (GBKformat[row][column] != 0) &#123;</div><div class="line">						gbformat += GBKformat[row][column];</div><div class="line">					&#125;</div><div class="line">				&#125;</div><div class="line">				i++;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		rangeval = 50 * ((float) gbchars / (float) dbchars);</div><div class="line">		formatval = 50 * ((float) gbformat / (float) totalformat);</div><div class="line">		return (int) (rangeval + formatval) - 1;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	/**</div><div class="line">	 * 检查为big5的或然率</div><div class="line">	 * 方法名：big5probability</div><div class="line">	 * 描述：TODO(这里用一句话描述这个方法的作用)</div><div class="line">	 * @param content</div><div class="line">	 * @return</div><div class="line">	 */</div><div class="line">	private int big5probability(byte[] content) &#123;</div><div class="line">		int i, rawtextlen = 0;</div><div class="line">		int dbchars = 1, bfchars = 1;</div><div class="line">		float rangeval = 0, formatval = 0;</div><div class="line">		long bfformat = 0, totalformat = 1;</div><div class="line">		int row, column;</div><div class="line">		rawtextlen = content.length;</div><div class="line">		for (i = 0; i &lt; rawtextlen - 1; i++) &#123;</div><div class="line">			if (content[i] &gt;= 0) &#123;</div><div class="line">			&#125; else &#123;</div><div class="line">				dbchars++;</div><div class="line">				if ((byte) 0xA1 &lt;= content[i]</div><div class="line">						&amp;&amp; content[i] &lt;= (byte) 0xF9</div><div class="line">						&amp;&amp; (((byte) 0x40 &lt;= content[i + 1] &amp;&amp; content[i + 1] &lt;= (byte) 0x7E) || ((byte) 0xA1 &lt;= content[i + 1] &amp;&amp; content[i + 1] &lt;= (byte) 0xFE))) &#123;</div><div class="line">					bfchars++;</div><div class="line">					totalformat += 500;</div><div class="line">					row = content[i] + 256 - 0xA1;</div><div class="line">					if (0x40 &lt;= content[i + 1] &amp;&amp; content[i + 1] &lt;= 0x7E) &#123;</div><div class="line">						column = content[i + 1] - 0x40;</div><div class="line">					&#125; else &#123;</div><div class="line">						column = content[i + 1] + 256 - 0x61;</div><div class="line">					&#125;</div><div class="line">					if (Big5format[row][column] != 0) &#123;</div><div class="line">						bfformat += Big5format[row][column];</div><div class="line">					&#125; else if (3 &lt;= row &amp;&amp; row &lt;= 37) &#123;</div><div class="line">						bfformat += 200;</div><div class="line">					&#125;</div><div class="line">				&#125;</div><div class="line">				i++;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		rangeval = 50 * ((float) bfchars / (float) dbchars);</div><div class="line">		formatval = 50 * ((float) bfformat / (float) totalformat);</div><div class="line"></div><div class="line">		return (int) (rangeval + formatval);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	/**</div><div class="line">	 * 检查为utf-8的或然率</div><div class="line">	 * 方法名：utf8probability</div><div class="line">	 * 描述：TODO(这里用一句话描述这个方法的作用)</div><div class="line">	 * @param content</div><div class="line">	 * @return</div><div class="line">	 */</div><div class="line">	private int utf8probability(byte[] content) &#123;</div><div class="line">		int score = 0;</div><div class="line">		int i, rawtextlen = 0;</div><div class="line">		int goodbytes = 0, asciibytes = 0;</div><div class="line">		// 检查是否为汉字可接受范围</div><div class="line">		rawtextlen = content.length;</div><div class="line">		for (i = 0; i &lt; rawtextlen; i++) &#123;</div><div class="line">			if ((content[i] &amp; (byte) 0x7F) == content[i]) &#123;</div><div class="line">				asciibytes++;</div><div class="line">			&#125; else if (-64 &lt;= content[i] &amp;&amp; content[i] &lt;= -33</div><div class="line">					&amp;&amp; i + 1 &lt; rawtextlen &amp;&amp; -128 &lt;= content[i + 1]</div><div class="line">					&amp;&amp; content[i + 1] &lt;= -65) &#123;</div><div class="line">				goodbytes += 2;</div><div class="line">				i++;</div><div class="line">			&#125; else if (-32 &lt;= content[i] &amp;&amp; content[i] &lt;= -17</div><div class="line">					&amp;&amp; i + 2 &lt; rawtextlen &amp;&amp; -128 &lt;= content[i + 1]</div><div class="line">					&amp;&amp; content[i + 1] &lt;= -65 &amp;&amp; -128 &lt;= content[i + 2]</div><div class="line">					&amp;&amp; content[i + 2] &lt;= -65) &#123;</div><div class="line">				goodbytes += 3;</div><div class="line">				i += 2;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		if (asciibytes == rawtextlen) &#123;</div><div class="line">			return 0;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		score = (int) (100 * ((float) goodbytes / (float) (rawtextlen - asciibytes)));</div><div class="line">		// 如果不高于98则减少到零</div><div class="line">		if (score &gt; 98) &#123;</div><div class="line">			return score;</div><div class="line">		&#125; else if (score &gt; 95 &amp;&amp; goodbytes &gt; 30) &#123;</div><div class="line">			return score;</div><div class="line">		&#125; else &#123;</div><div class="line">			return 0;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">	&#125;</div><div class="line"></div><div class="line">	/**</div><div class="line">	 * 检查为utf-16的或然率</div><div class="line">	 * 方法名：utf16probability</div><div class="line">	 * 描述：TODO(这里用一句话描述这个方法的作用)</div><div class="line">	 * @param content</div><div class="line">	 * @return</div><div class="line">	 */</div><div class="line">	private int utf16probability(byte[] content) &#123;</div><div class="line"></div><div class="line">		if (content.length &gt; 1</div><div class="line">				&amp;&amp; ((byte) 0xFE == content[0] &amp;&amp; (byte) 0xFF == content[1])</div><div class="line">				|| ((byte) 0xFF == content[0] &amp;&amp; (byte) 0xFE == content[1])) &#123;</div><div class="line">			return 100;</div><div class="line">		&#125;</div><div class="line">		return 0;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	/**</div><div class="line">	 * 检查为ascii的或然率</div><div class="line">	 * 方法名：asciiprobability</div><div class="line">	 * 描述：TODO(这里用一句话描述这个方法的作用)</div><div class="line">	 * @param content</div><div class="line">	 * @return</div><div class="line">	 */</div><div class="line">	private int asciiprobability(byte[] content) &#123;</div><div class="line">		int score = 75;</div><div class="line">		int i, rawtextlen;</div><div class="line"></div><div class="line">		rawtextlen = content.length;</div><div class="line"></div><div class="line">		for (i = 0; i &lt; rawtextlen; i++) &#123;</div><div class="line">			if (content[i] &lt; 0) &#123;</div><div class="line">				score = score - 5;</div><div class="line">			&#125; else if (content[i] == (byte) 0x1B) &#123; // ESC (used by ISO 2022)</div><div class="line">				score = score - 5;</div><div class="line">			&#125;</div><div class="line">			if (score &lt;= 0) &#123;</div><div class="line">				return 0;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		return score;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	/**</div><div class="line">	 * 检查为euc_kr的或然率</div><div class="line">	 * 方法名：euc_krprobability</div><div class="line">	 * 描述：TODO(这里用一句话描述这个方法的作用)</div><div class="line">	 * @param content</div><div class="line">	 * @return</div><div class="line">	 */</div><div class="line">	private int euc_krprobability(byte[] content) &#123;</div><div class="line">		int i, rawtextlen = 0;</div><div class="line"></div><div class="line">		int dbchars = 1, krchars = 1;</div><div class="line">		long krformat = 0, totalformat = 1;</div><div class="line">		float rangeval = 0, formatval = 0;</div><div class="line">		int row, column;</div><div class="line">		rawtextlen = content.length;</div><div class="line">		for (i = 0; i &lt; rawtextlen - 1; i++) &#123;</div><div class="line">			if (content[i] &gt;= 0) &#123;</div><div class="line">			&#125; else &#123;</div><div class="line">				dbchars++;</div><div class="line">				if ((byte) 0xA1 &lt;= content[i] &amp;&amp; content[i] &lt;= (byte) 0xFE</div><div class="line">						&amp;&amp; (byte) 0xA1 &lt;= content[i + 1]</div><div class="line">						&amp;&amp; content[i + 1] &lt;= (byte) 0xFE) &#123;</div><div class="line">					krchars++;</div><div class="line">					totalformat += 500;</div><div class="line">					row = content[i] + 256 - 0xA1;</div><div class="line">					column = content[i + 1] + 256 - 0xA1;</div><div class="line">					if (EUC_KRformat[row][column] != 0) &#123;</div><div class="line">						krformat += EUC_KRformat[row][column];</div><div class="line">					&#125; else if (15 &lt;= row &amp;&amp; row &lt; 55) &#123;</div><div class="line">						krformat += 0;</div><div class="line">					&#125;</div><div class="line"></div><div class="line">				&#125;</div><div class="line">				i++;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		rangeval = 50 * ((float) krchars / (float) dbchars);</div><div class="line">		formatval = 50 * ((float) krformat / (float) totalformat);</div><div class="line"></div><div class="line">		return (int) (rangeval + formatval);</div><div class="line">	&#125;</div><div class="line">	/**</div><div class="line">	 * </div><div class="line">	 * 方法名：euc_jpprobability</div><div class="line">	 * 描述：TODO(这里用一句话描述这个方法的作用)</div><div class="line">	 * @param content</div><div class="line">	 * @return</div><div class="line">	 */</div><div class="line">	private int euc_jpprobability(byte[] content) &#123;</div><div class="line">		int i, rawtextlen = 0;</div><div class="line"></div><div class="line">		int dbchars = 1, jpchars = 1;</div><div class="line">		long jpformat = 0, totalformat = 1;</div><div class="line">		float rangeval = 0, formatval = 0;</div><div class="line">		int row, column;</div><div class="line"></div><div class="line">		rawtextlen = content.length;</div><div class="line">		for (i = 0; i &lt; rawtextlen - 1; i++) &#123;</div><div class="line">			if (content[i] &gt;= 0) &#123;</div><div class="line">			&#125; else &#123;</div><div class="line">				dbchars++;</div><div class="line">				if ((byte) 0xA1 &lt;= content[i] &amp;&amp; content[i] &lt;= (byte) 0xFE</div><div class="line">						&amp;&amp; (byte) 0xA1 &lt;= content[i + 1]</div><div class="line">						&amp;&amp; content[i + 1] &lt;= (byte) 0xFE) &#123;</div><div class="line">					jpchars++;</div><div class="line">					totalformat += 500;</div><div class="line">					row = content[i] + 256 - 0xA1;</div><div class="line">					column = content[i + 1] + 256 - 0xA1;</div><div class="line">					if (JPformat[row][column] != 0) &#123;</div><div class="line">						jpformat += JPformat[row][column];</div><div class="line">					&#125; else if (15 &lt;= row &amp;&amp; row &lt; 55) &#123;</div><div class="line">						jpformat += 0;</div><div class="line">					&#125;</div><div class="line"></div><div class="line">				&#125;</div><div class="line">				i++;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		rangeval = 50 * ((float) jpchars / (float) dbchars);</div><div class="line">		formatval = 50 * ((float) jpformat / (float) totalformat);</div><div class="line"></div><div class="line">		return (int) (rangeval + formatval);</div><div class="line">	&#125;</div><div class="line">	/**</div><div class="line">	 * </div><div class="line">	 * 方法名：sjisprobability</div><div class="line">	 * 描述：TODO(这里用一句话描述这个方法的作用)</div><div class="line">	 * @param content</div><div class="line">	 * @return</div><div class="line">	 */</div><div class="line">	private int sjisprobability(byte[] content) &#123;</div><div class="line">		int i, rawtextlen = 0;</div><div class="line"></div><div class="line">		int dbchars = 1, jpchars = 1;</div><div class="line">		long jpformat = 0, totalformat = 1;</div><div class="line">		float rangeval = 0, formatval = 0;</div><div class="line">		int row, column, adjust;</div><div class="line"></div><div class="line">		rawtextlen = content.length;</div><div class="line">		for (i = 0; i &lt; rawtextlen - 1; i++) &#123;</div><div class="line">			if (content[i] &gt;= 0) &#123;</div><div class="line">			&#125; else &#123;</div><div class="line">				dbchars++;</div><div class="line">				if (i + 1 &lt; content.length</div><div class="line">						&amp;&amp; (((byte) 0x81 &lt;= content[i] &amp;&amp; content[i] &lt;= (byte) 0x9F) || ((byte) 0xE0 &lt;= content[i] &amp;&amp; content[i] &lt;= (byte) 0xEF))</div><div class="line">						&amp;&amp; (((byte) 0x40 &lt;= content[i + 1] &amp;&amp; content[i + 1] &lt;= (byte) 0x7E) || ((byte) 0x80 &lt;= content[i + 1] &amp;&amp; content[i + 1] &lt;= (byte) 0xFC))) &#123;</div><div class="line">					jpchars++;</div><div class="line">					totalformat += 500;</div><div class="line">					row = content[i] + 256;</div><div class="line">					column = content[i + 1] + 256;</div><div class="line">					if (column &lt; 0x9f) &#123;</div><div class="line">						adjust = 1;</div><div class="line">						if (column &gt; 0x7f) &#123;</div><div class="line">							column -= 0x20;</div><div class="line">						&#125; else &#123;</div><div class="line">							column -= 0x19;</div><div class="line">						&#125;</div><div class="line">					&#125; else &#123;</div><div class="line">						adjust = 0;</div><div class="line">						column -= 0x7e;</div><div class="line">					&#125;</div><div class="line">					if (row &lt; 0xa0) &#123;</div><div class="line">						row = ((row - 0x70) &lt;&lt; 1) - adjust;</div><div class="line">					&#125; else &#123;</div><div class="line">						row = ((row - 0xb0) &lt;&lt; 1) - adjust;</div><div class="line">					&#125;</div><div class="line"></div><div class="line">					row -= 0x20;</div><div class="line">					column = 0x20;</div><div class="line">					if (row &lt; JPformat.length &amp;&amp; column &lt; JPformat[row].length</div><div class="line">							&amp;&amp; JPformat[row][column] != 0) &#123;</div><div class="line">						jpformat += JPformat[row][column];</div><div class="line">					&#125;</div><div class="line">					i++;</div><div class="line">				&#125; else if ((byte) 0xA1 &lt;= content[i]</div><div class="line">						&amp;&amp; content[i] &lt;= (byte) 0xDF) &#123;</div><div class="line">				&#125;</div><div class="line"></div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		rangeval = 50 * ((float) jpchars / (float) dbchars);</div><div class="line">		formatval = 50 * ((float) jpformat / (float) totalformat);</div><div class="line"></div><div class="line">		return (int) (rangeval + formatval) - 1;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Encode.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div><div class="line">332</div><div class="line">333</div><div class="line">334</div><div class="line">335</div><div class="line">336</div><div class="line">337</div><div class="line">338</div><div class="line">339</div><div class="line">340</div><div class="line">341</div><div class="line">342</div><div class="line">343</div><div class="line">344</div><div class="line">345</div><div class="line">346</div><div class="line">347</div><div class="line">348</div><div class="line">349</div><div class="line">350</div><div class="line">351</div><div class="line">352</div><div class="line">353</div><div class="line">354</div><div class="line">355</div><div class="line">356</div><div class="line">357</div><div class="line">358</div><div class="line">359</div><div class="line">360</div><div class="line">361</div><div class="line">362</div><div class="line">363</div><div class="line">364</div><div class="line">365</div><div class="line">366</div><div class="line">367</div><div class="line">368</div><div class="line">369</div><div class="line">370</div><div class="line">371</div><div class="line">372</div><div class="line">373</div><div class="line">374</div><div class="line">375</div><div class="line">376</div><div class="line">377</div><div class="line">378</div><div class="line">379</div><div class="line">380</div><div class="line">381</div><div class="line">382</div><div class="line">383</div><div class="line">384</div><div class="line">385</div><div class="line">386</div><div class="line">387</div><div class="line">388</div><div class="line">389</div><div class="line">390</div><div class="line">391</div><div class="line">392</div><div class="line">393</div><div class="line">394</div><div class="line">395</div><div class="line">396</div><div class="line">397</div><div class="line">398</div><div class="line">399</div><div class="line">400</div><div class="line">401</div><div class="line">402</div><div class="line">403</div><div class="line">404</div><div class="line">405</div><div class="line">406</div><div class="line">407</div><div class="line">408</div><div class="line">409</div><div class="line">410</div><div class="line">411</div><div class="line">412</div><div class="line">413</div><div class="line">414</div><div class="line">415</div><div class="line">416</div><div class="line">417</div><div class="line">418</div><div class="line">419</div><div class="line">420</div><div class="line">421</div><div class="line">422</div><div class="line">423</div><div class="line">424</div><div class="line">425</div><div class="line">426</div><div class="line">427</div><div class="line">428</div><div class="line">429</div><div class="line">430</div><div class="line">431</div><div class="line">432</div><div class="line">433</div><div class="line">434</div><div class="line">435</div><div class="line">436</div><div class="line">437</div><div class="line">438</div><div class="line">439</div><div class="line">440</div><div class="line">441</div><div class="line">442</div><div class="line">443</div><div class="line">444</div><div class="line">445</div><div class="line">446</div><div class="line">447</div><div class="line">448</div><div class="line">449</div><div class="line">450</div><div class="line">451</div><div class="line">452</div><div class="line">453</div><div class="line">454</div><div class="line">455</div><div class="line">456</div><div class="line">457</div><div class="line">458</div><div class="line">459</div><div class="line">460</div><div class="line">461</div><div class="line">462</div><div class="line">463</div><div class="line">464</div><div class="line">465</div><div class="line">466</div><div class="line">467</div><div class="line">468</div><div class="line">469</div><div class="line">470</div><div class="line">471</div><div class="line">472</div><div class="line">473</div><div class="line">474</div><div class="line">475</div><div class="line">476</div><div class="line">477</div><div class="line">478</div><div class="line">479</div><div class="line">480</div><div class="line">481</div><div class="line">482</div><div class="line">483</div><div class="line">484</div><div class="line">485</div><div class="line">486</div><div class="line">487</div><div class="line">488</div><div class="line">489</div><div class="line">490</div><div class="line">491</div><div class="line">492</div><div class="line">493</div><div class="line">494</div><div class="line">495</div><div class="line">496</div><div class="line">497</div><div class="line">498</div><div class="line">499</div><div class="line">500</div><div class="line">501</div><div class="line">502</div><div class="line">503</div><div class="line">504</div><div class="line">505</div><div class="line">506</div><div class="line">507</div><div class="line">508</div><div class="line">509</div><div class="line">510</div><div class="line">511</div><div class="line">512</div><div class="line">513</div><div class="line">514</div><div class="line">515</div><div class="line">516</div><div class="line">517</div><div class="line">518</div><div class="line">519</div><div class="line">520</div><div class="line">521</div><div class="line">522</div><div class="line">523</div><div class="line">524</div><div class="line">525</div><div class="line">526</div><div class="line">527</div><div class="line">528</div><div class="line">529</div><div class="line">530</div><div class="line">531</div><div class="line">532</div><div class="line">533</div><div class="line">534</div><div class="line">535</div><div class="line">536</div><div class="line">537</div><div class="line">538</div><div class="line">539</div><div class="line">540</div><div class="line">541</div><div class="line">542</div><div class="line">543</div><div class="line">544</div><div class="line">545</div><div class="line">546</div><div class="line">547</div><div class="line">548</div><div class="line">549</div><div class="line">550</div><div class="line">551</div><div class="line">552</div><div class="line">553</div><div class="line">554</div><div class="line">555</div><div class="line">556</div><div class="line">557</div><div class="line">558</div><div class="line">559</div><div class="line">560</div><div class="line">561</div><div class="line">562</div><div class="line">563</div><div class="line">564</div><div class="line">565</div><div class="line">566</div><div class="line">567</div><div class="line">568</div><div class="line">569</div><div class="line">570</div><div class="line">571</div><div class="line">572</div><div class="line">573</div><div class="line">574</div><div class="line">575</div><div class="line">576</div><div class="line">577</div><div class="line">578</div><div class="line">579</div><div class="line">580</div><div class="line">581</div><div class="line">582</div><div class="line">583</div><div class="line">584</div><div class="line">585</div><div class="line">586</div><div class="line">587</div><div class="line">588</div><div class="line">589</div><div class="line">590</div><div class="line">591</div><div class="line">592</div><div class="line">593</div><div class="line">594</div><div class="line">595</div><div class="line">596</div><div class="line">597</div><div class="line">598</div><div class="line">599</div><div class="line">600</div><div class="line">601</div><div class="line">602</div><div class="line">603</div><div class="line">604</div><div class="line">605</div><div class="line">606</div><div class="line">607</div><div class="line">608</div><div class="line">609</div><div class="line">610</div><div class="line">611</div><div class="line">612</div><div class="line">613</div><div class="line">614</div><div class="line">615</div><div class="line">616</div><div class="line">617</div><div class="line">618</div><div class="line">619</div><div class="line">620</div><div class="line">621</div><div class="line">622</div><div class="line">623</div><div class="line">624</div><div class="line">625</div><div class="line">626</div><div class="line">627</div><div class="line">628</div><div class="line">629</div><div class="line">630</div><div class="line">631</div><div class="line">632</div><div class="line">633</div><div class="line">634</div><div class="line">635</div><div class="line">636</div><div class="line">637</div><div class="line">638</div><div class="line">639</div><div class="line">640</div><div class="line">641</div><div class="line">642</div><div class="line">643</div><div class="line">644</div><div class="line">645</div><div class="line">646</div><div class="line">647</div><div class="line">648</div><div class="line">649</div><div class="line">650</div><div class="line">651</div><div class="line">652</div><div class="line">653</div><div class="line">654</div><div class="line">655</div><div class="line">656</div><div class="line">657</div><div class="line">658</div><div class="line">659</div><div class="line">660</div><div class="line">661</div><div class="line">662</div><div class="line">663</div><div class="line">664</div><div class="line">665</div><div class="line">666</div><div class="line">667</div><div class="line">668</div><div class="line">669</div><div class="line">670</div><div class="line">671</div><div class="line">672</div><div class="line">673</div><div class="line">674</div><div class="line">675</div><div class="line">676</div><div class="line">677</div><div class="line">678</div><div class="line">679</div><div class="line">680</div><div class="line">681</div><div class="line">682</div><div class="line">683</div><div class="line">684</div><div class="line">685</div><div class="line">686</div><div class="line">687</div><div class="line">688</div><div class="line">689</div><div class="line">690</div><div class="line">691</div><div class="line">692</div><div class="line">693</div><div class="line">694</div><div class="line">695</div><div class="line">696</div><div class="line">697</div><div class="line">698</div><div class="line">699</div><div class="line">700</div><div class="line">701</div><div class="line">702</div><div class="line">703</div><div class="line">704</div><div class="line">705</div><div class="line">706</div><div class="line">707</div><div class="line">708</div><div class="line">709</div><div class="line">710</div><div class="line">711</div><div class="line">712</div><div class="line">713</div><div class="line">714</div><div class="line">715</div><div class="line">716</div><div class="line">717</div><div class="line">718</div><div class="line">719</div><div class="line">720</div><div class="line">721</div><div class="line">722</div><div class="line">723</div><div class="line">724</div><div class="line">725</div><div class="line">726</div><div class="line">727</div><div class="line">728</div><div class="line">729</div><div class="line">730</div><div class="line">731</div><div class="line">732</div><div class="line">733</div><div class="line">734</div><div class="line">735</div><div class="line">736</div><div class="line">737</div><div class="line">738</div><div class="line">739</div><div class="line">740</div><div class="line">741</div><div class="line">742</div><div class="line">743</div><div class="line">744</div><div class="line">745</div><div class="line">746</div><div class="line">747</div><div class="line">748</div><div class="line">749</div><div class="line">750</div><div class="line">751</div><div class="line">752</div><div class="line">753</div><div class="line">754</div><div class="line">755</div><div class="line">756</div><div class="line">757</div><div class="line">758</div><div class="line">759</div><div class="line">760</div><div class="line">761</div><div class="line">762</div><div class="line">763</div><div class="line">764</div><div class="line">765</div><div class="line">766</div><div class="line">767</div><div class="line">768</div><div class="line">769</div><div class="line">770</div><div class="line">771</div><div class="line">772</div><div class="line">773</div><div class="line">774</div><div class="line">775</div><div class="line">776</div><div class="line">777</div><div class="line">778</div><div class="line">779</div><div class="line">780</div><div class="line">781</div><div class="line">782</div><div class="line">783</div><div class="line">784</div><div class="line">785</div><div class="line">786</div><div class="line">787</div><div class="line">788</div><div class="line">789</div><div class="line">790</div><div class="line">791</div><div class="line">792</div><div class="line">793</div><div class="line">794</div><div class="line">795</div><div class="line">796</div><div class="line">797</div><div class="line">798</div><div class="line">799</div><div class="line">800</div><div class="line">801</div><div class="line">802</div><div class="line">803</div><div class="line">804</div><div class="line">805</div><div class="line">806</div><div class="line">807</div><div class="line">808</div><div class="line">809</div><div class="line">810</div><div class="line">811</div><div class="line">812</div><div class="line">813</div><div class="line">814</div><div class="line">815</div><div class="line">816</div><div class="line">817</div><div class="line">818</div><div class="line">819</div><div class="line">820</div><div class="line">821</div><div class="line">822</div><div class="line">823</div><div class="line">824</div><div class="line">825</div><div class="line">826</div><div class="line">827</div><div class="line">828</div><div class="line">829</div><div class="line">830</div><div class="line">831</div><div class="line">832</div><div class="line">833</div><div class="line">834</div><div class="line">835</div><div class="line">836</div><div class="line">837</div><div class="line">838</div><div class="line">839</div><div class="line">840</div><div class="line">841</div><div class="line">842</div><div class="line">843</div><div class="line">844</div><div class="line">845</div><div class="line">846</div><div class="line">847</div><div class="line">848</div><div class="line">849</div><div class="line">850</div><div class="line">851</div><div class="line">852</div><div class="line">853</div><div class="line">854</div><div class="line">855</div><div class="line">856</div><div class="line">857</div><div class="line">858</div><div class="line">859</div><div class="line">860</div><div class="line">861</div><div class="line">862</div><div class="line">863</div><div class="line">864</div><div class="line">865</div><div class="line">866</div><div class="line">867</div><div class="line">868</div><div class="line">869</div><div class="line">870</div><div class="line">871</div><div class="line">872</div><div class="line">873</div><div class="line">874</div><div class="line">875</div><div class="line">876</div><div class="line">877</div><div class="line">878</div><div class="line">879</div><div class="line">880</div><div class="line">881</div><div class="line">882</div><div class="line">883</div><div class="line">884</div><div class="line">885</div><div class="line">886</div><div class="line">887</div><div class="line">888</div><div class="line">889</div><div class="line">890</div><div class="line">891</div><div class="line">892</div><div class="line">893</div><div class="line">894</div><div class="line">895</div><div class="line">896</div><div class="line">897</div><div class="line">898</div><div class="line">899</div><div class="line">900</div><div class="line">901</div><div class="line">902</div><div class="line">903</div><div class="line">904</div><div class="line">905</div><div class="line">906</div><div class="line">907</div><div class="line">908</div><div class="line">909</div><div class="line">910</div><div class="line">911</div><div class="line">912</div><div class="line">913</div><div class="line">914</div><div class="line">915</div><div class="line">916</div><div class="line">917</div><div class="line">918</div><div class="line">919</div><div class="line">920</div><div class="line">921</div><div class="line">922</div><div class="line">923</div><div class="line">924</div><div class="line">925</div><div class="line">926</div><div class="line">927</div><div class="line">928</div><div class="line">929</div><div class="line">930</div><div class="line">931</div><div class="line">932</div><div class="line">933</div><div class="line">934</div><div class="line">935</div><div class="line">936</div><div class="line">937</div><div class="line">938</div><div class="line">939</div><div class="line">940</div><div class="line">941</div><div class="line">942</div><div class="line">943</div><div class="line">944</div><div class="line">945</div><div class="line">946</div><div class="line">947</div><div class="line">948</div><div class="line">949</div><div class="line">950</div><div class="line">951</div><div class="line">952</div><div class="line">953</div><div class="line">954</div><div class="line">955</div><div class="line">956</div><div class="line">957</div><div class="line">958</div><div class="line">959</div><div class="line">960</div><div class="line">961</div><div class="line">962</div><div class="line">963</div><div class="line">964</div><div class="line">965</div><div class="line">966</div><div class="line">967</div><div class="line">968</div><div class="line">969</div><div class="line">970</div><div class="line">971</div><div class="line">972</div><div class="line">973</div><div class="line">974</div><div class="line">975</div><div class="line">976</div><div class="line">977</div><div class="line">978</div><div class="line">979</div><div class="line">980</div><div class="line">981</div><div class="line">982</div><div class="line">983</div><div class="line">984</div><div class="line">985</div><div class="line">986</div><div class="line">987</div><div class="line">988</div><div class="line">989</div><div class="line">990</div><div class="line">991</div><div class="line">992</div><div class="line">993</div><div class="line">994</div><div class="line">995</div><div class="line">996</div><div class="line">997</div><div class="line">998</div><div class="line">999</div><div class="line">1000</div><div class="line">1001</div><div class="line">1002</div><div class="line">1003</div><div class="line">1004</div><div class="line">1005</div><div class="line">1006</div><div class="line">1007</div><div class="line">1008</div><div class="line">1009</div><div class="line">1010</div><div class="line">1011</div><div class="line">1012</div><div class="line">1013</div><div class="line">1014</div><div class="line">1015</div><div class="line">1016</div><div class="line">1017</div><div class="line">1018</div><div class="line">1019</div><div class="line">1020</div><div class="line">1021</div><div class="line">1022</div><div class="line">1023</div><div class="line">1024</div><div class="line">1025</div><div class="line">1026</div><div class="line">1027</div><div class="line">1028</div><div class="line">1029</div><div class="line">1030</div><div class="line">1031</div><div class="line">1032</div><div class="line">1033</div><div class="line">1034</div><div class="line">1035</div><div class="line">1036</div><div class="line">1037</div><div class="line">1038</div><div class="line">1039</div><div class="line">1040</div><div class="line">1041</div><div class="line">1042</div><div class="line">1043</div><div class="line">1044</div><div class="line">1045</div><div class="line">1046</div><div class="line">1047</div><div class="line">1048</div><div class="line">1049</div><div class="line">1050</div><div class="line">1051</div><div class="line">1052</div><div class="line">1053</div><div class="line">1054</div><div class="line">1055</div><div class="line">1056</div><div class="line">1057</div><div class="line">1058</div><div class="line">1059</div><div class="line">1060</div><div class="line">1061</div><div class="line">1062</div><div class="line">1063</div><div class="line">1064</div><div class="line">1065</div><div class="line">1066</div><div class="line">1067</div><div class="line">1068</div><div class="line">1069</div><div class="line">1070</div><div class="line">1071</div><div class="line">1072</div><div class="line">1073</div><div class="line">1074</div><div class="line">1075</div><div class="line">1076</div><div class="line">1077</div><div class="line">1078</div><div class="line">1079</div><div class="line">1080</div><div class="line">1081</div><div class="line">1082</div><div class="line">1083</div><div class="line">1084</div><div class="line">1085</div><div class="line">1086</div><div class="line">1087</div><div class="line">1088</div><div class="line">1089</div><div class="line">1090</div><div class="line">1091</div><div class="line">1092</div><div class="line">1093</div><div class="line">1094</div><div class="line">1095</div><div class="line">1096</div><div class="line">1097</div><div class="line">1098</div><div class="line">1099</div><div class="line">1100</div><div class="line">1101</div><div class="line">1102</div><div class="line">1103</div><div class="line">1104</div><div class="line">1105</div><div class="line">1106</div><div class="line">1107</div><div class="line">1108</div><div class="line">1109</div><div class="line">1110</div><div class="line">1111</div><div class="line">1112</div><div class="line">1113</div><div class="line">1114</div><div class="line">1115</div><div class="line">1116</div><div class="line">1117</div><div class="line">1118</div><div class="line">1119</div><div class="line">1120</div><div class="line">1121</div><div class="line">1122</div><div class="line">1123</div><div class="line">1124</div><div class="line">1125</div><div class="line">1126</div><div class="line">1127</div><div class="line">1128</div><div class="line">1129</div><div class="line">1130</div><div class="line">1131</div><div class="line">1132</div><div class="line">1133</div><div class="line">1134</div><div class="line">1135</div><div class="line">1136</div><div class="line">1137</div><div class="line">1138</div><div class="line">1139</div><div class="line">1140</div><div class="line">1141</div><div class="line">1142</div><div class="line">1143</div><div class="line">1144</div><div class="line">1145</div><div class="line">1146</div><div class="line">1147</div><div class="line">1148</div><div class="line">1149</div><div class="line">1150</div><div class="line">1151</div><div class="line">1152</div><div class="line">1153</div><div class="line">1154</div><div class="line">1155</div><div class="line">1156</div><div class="line">1157</div><div class="line">1158</div><div class="line">1159</div><div class="line">1160</div><div class="line">1161</div><div class="line">1162</div><div class="line">1163</div><div class="line">1164</div><div class="line">1165</div><div class="line">1166</div><div class="line">1167</div><div class="line">1168</div><div class="line">1169</div><div class="line">1170</div><div class="line">1171</div><div class="line">1172</div><div class="line">1173</div><div class="line">1174</div><div class="line">1175</div><div class="line">1176</div><div class="line">1177</div><div class="line">1178</div><div class="line">1179</div><div class="line">1180</div><div class="line">1181</div><div class="line">1182</div><div class="line">1183</div><div class="line">1184</div><div class="line">1185</div><div class="line">1186</div><div class="line">1187</div><div class="line">1188</div><div class="line">1189</div><div class="line">1190</div><div class="line">1191</div><div class="line">1192</div><div class="line">1193</div><div class="line">1194</div><div class="line">1195</div><div class="line">1196</div><div class="line">1197</div><div class="line">1198</div><div class="line">1199</div><div class="line">1200</div><div class="line">1201</div><div class="line">1202</div><div class="line">1203</div><div class="line">1204</div><div class="line">1205</div><div class="line">1206</div><div class="line">1207</div><div class="line">1208</div><div class="line">1209</div><div class="line">1210</div><div class="line">1211</div><div class="line">1212</div><div class="line">1213</div><div class="line">1214</div><div class="line">1215</div><div class="line">1216</div><div class="line">1217</div><div class="line">1218</div><div class="line">1219</div><div class="line">1220</div><div class="line">1221</div><div class="line">1222</div><div class="line">1223</div><div class="line">1224</div><div class="line">1225</div><div class="line">1226</div><div class="line">1227</div><div class="line">1228</div><div class="line">1229</div><div class="line">1230</div><div class="line">1231</div><div class="line">1232</div><div class="line">1233</div><div class="line">1234</div><div class="line">1235</div><div class="line">1236</div><div class="line">1237</div><div class="line">1238</div><div class="line">1239</div><div class="line">1240</div><div class="line">1241</div><div class="line">1242</div><div class="line">1243</div><div class="line">1244</div><div class="line">1245</div><div class="line">1246</div><div class="line">1247</div><div class="line">1248</div><div class="line">1249</div><div class="line">1250</div><div class="line">1251</div><div class="line">1252</div><div class="line">1253</div><div class="line">1254</div><div class="line">1255</div><div class="line">1256</div><div class="line">1257</div><div class="line">1258</div><div class="line">1259</div><div class="line">1260</div><div class="line">1261</div><div class="line">1262</div><div class="line">1263</div><div class="line">1264</div><div class="line">1265</div><div class="line">1266</div><div class="line">1267</div><div class="line">1268</div><div class="line">1269</div><div class="line">1270</div><div class="line">1271</div><div class="line">1272</div><div class="line">1273</div><div class="line">1274</div><div class="line">1275</div><div class="line">1276</div><div class="line">1277</div><div class="line">1278</div><div class="line">1279</div><div class="line">1280</div><div class="line">1281</div><div class="line">1282</div><div class="line">1283</div><div class="line">1284</div><div class="line">1285</div><div class="line">1286</div><div class="line">1287</div><div class="line">1288</div><div class="line">1289</div><div class="line">1290</div><div class="line">1291</div><div class="line">1292</div><div class="line">1293</div><div class="line">1294</div><div class="line">1295</div><div class="line">1296</div><div class="line">1297</div><div class="line">1298</div><div class="line">1299</div><div class="line">1300</div><div class="line">1301</div><div class="line">1302</div><div class="line">1303</div><div class="line">1304</div><div class="line">1305</div><div class="line">1306</div><div class="line">1307</div><div class="line">1308</div><div class="line">1309</div><div class="line">1310</div><div class="line">1311</div><div class="line">1312</div><div class="line">1313</div><div class="line">1314</div><div class="line">1315</div><div class="line">1316</div><div class="line">1317</div><div class="line">1318</div><div class="line">1319</div><div class="line">1320</div><div class="line">1321</div><div class="line">1322</div><div class="line">1323</div><div class="line">1324</div><div class="line">1325</div><div class="line">1326</div><div class="line">1327</div><div class="line">1328</div><div class="line">1329</div><div class="line">1330</div><div class="line">1331</div><div class="line">1332</div><div class="line">1333</div><div class="line">1334</div><div class="line">1335</div><div class="line">1336</div><div class="line">1337</div><div class="line">1338</div><div class="line">1339</div><div class="line">1340</div><div class="line">1341</div><div class="line">1342</div><div class="line">1343</div><div class="line">1344</div><div class="line">1345</div><div class="line">1346</div><div class="line">1347</div><div class="line">1348</div><div class="line">1349</div><div class="line">1350</div><div class="line">1351</div><div class="line">1352</div><div class="line">1353</div><div class="line">1354</div><div class="line">1355</div><div class="line">1356</div><div class="line">1357</div><div class="line">1358</div><div class="line">1359</div><div class="line">1360</div><div class="line">1361</div><div class="line">1362</div><div class="line">1363</div><div class="line">1364</div><div class="line">1365</div><div class="line">1366</div><div class="line">1367</div><div class="line">1368</div><div class="line">1369</div><div class="line">1370</div><div class="line">1371</div><div class="line">1372</div><div class="line">1373</div><div class="line">1374</div><div class="line">1375</div><div class="line">1376</div><div class="line">1377</div><div class="line">1378</div><div class="line">1379</div><div class="line">1380</div><div class="line">1381</div><div class="line">1382</div><div class="line">1383</div><div class="line">1384</div><div class="line">1385</div><div class="line">1386</div><div class="line">1387</div><div class="line">1388</div><div class="line">1389</div><div class="line">1390</div><div class="line">1391</div><div class="line">1392</div><div class="line">1393</div><div class="line">1394</div><div class="line">1395</div><div class="line">1396</div><div class="line">1397</div><div class="line">1398</div><div class="line">1399</div><div class="line">1400</div><div class="line">1401</div><div class="line">1402</div><div class="line">1403</div><div class="line">1404</div><div class="line">1405</div><div class="line">1406</div><div class="line">1407</div><div class="line">1408</div><div class="line">1409</div><div class="line">1410</div><div class="line">1411</div><div class="line">1412</div><div class="line">1413</div><div class="line">1414</div><div class="line">1415</div><div class="line">1416</div><div class="line">1417</div><div class="line">1418</div><div class="line">1419</div><div class="line">1420</div><div class="line">1421</div><div class="line">1422</div><div class="line">1423</div><div class="line">1424</div><div class="line">1425</div><div class="line">1426</div><div class="line">1427</div><div class="line">1428</div><div class="line">1429</div><div class="line">1430</div><div class="line">1431</div><div class="line">1432</div><div class="line">1433</div><div class="line">1434</div><div class="line">1435</div><div class="line">1436</div><div class="line">1437</div><div class="line">1438</div><div class="line">1439</div><div class="line">1440</div><div class="line">1441</div><div class="line">1442</div><div class="line">1443</div><div class="line">1444</div><div class="line">1445</div><div class="line">1446</div><div class="line">1447</div><div class="line">1448</div><div class="line">1449</div><div class="line">1450</div><div class="line">1451</div><div class="line">1452</div><div class="line">1453</div><div class="line">1454</div><div class="line">1455</div><div class="line">1456</div><div class="line">1457</div><div class="line">1458</div><div class="line">1459</div><div class="line">1460</div><div class="line">1461</div><div class="line">1462</div><div class="line">1463</div><div class="line">1464</div><div class="line">1465</div><div class="line">1466</div><div class="line">1467</div><div class="line">1468</div><div class="line">1469</div><div class="line">1470</div><div class="line">1471</div><div class="line">1472</div><div class="line">1473</div><div class="line">1474</div><div class="line">1475</div><div class="line">1476</div><div class="line">1477</div><div class="line">1478</div><div class="line">1479</div><div class="line">1480</div><div class="line">1481</div><div class="line">1482</div><div class="line">1483</div><div class="line">1484</div><div class="line">1485</div><div class="line">1486</div><div class="line">1487</div><div class="line">1488</div><div class="line">1489</div><div class="line">1490</div><div class="line">1491</div><div class="line">1492</div><div class="line">1493</div><div class="line">1494</div><div class="line">1495</div><div class="line">1496</div><div class="line">1497</div><div class="line">1498</div><div class="line">1499</div><div class="line">1500</div><div class="line">1501</div><div class="line">1502</div><div class="line">1503</div><div class="line">1504</div><div class="line">1505</div><div class="line">1506</div><div class="line">1507</div><div class="line">1508</div><div class="line">1509</div><div class="line">1510</div><div class="line">1511</div><div class="line">1512</div><div class="line">1513</div><div class="line">1514</div><div class="line">1515</div><div class="line">1516</div><div class="line">1517</div><div class="line">1518</div><div class="line">1519</div><div class="line">1520</div><div class="line">1521</div><div class="line">1522</div><div class="line">1523</div><div class="line">1524</div><div class="line">1525</div><div class="line">1526</div><div class="line">1527</div><div class="line">1528</div><div class="line">1529</div><div class="line">1530</div><div class="line">1531</div><div class="line">1532</div><div class="line">1533</div><div class="line">1534</div><div class="line">1535</div><div class="line">1536</div><div class="line">1537</div><div class="line">1538</div><div class="line">1539</div><div class="line">1540</div><div class="line">1541</div><div class="line">1542</div><div class="line">1543</div><div class="line">1544</div><div class="line">1545</div><div class="line">1546</div><div class="line">1547</div><div class="line">1548</div><div class="line">1549</div><div class="line">1550</div><div class="line">1551</div><div class="line">1552</div><div class="line">1553</div><div class="line">1554</div><div class="line">1555</div><div class="line">1556</div><div class="line">1557</div><div class="line">1558</div><div class="line">1559</div><div class="line">1560</div><div class="line">1561</div><div class="line">1562</div><div class="line">1563</div><div class="line">1564</div><div class="line">1565</div><div class="line">1566</div><div class="line">1567</div><div class="line">1568</div><div class="line">1569</div><div class="line">1570</div><div class="line">1571</div><div class="line">1572</div><div class="line">1573</div><div class="line">1574</div><div class="line">1575</div><div class="line">1576</div><div class="line">1577</div><div class="line">1578</div><div class="line">1579</div><div class="line">1580</div><div class="line">1581</div><div class="line">1582</div><div class="line">1583</div><div class="line">1584</div><div class="line">1585</div><div class="line">1586</div><div class="line">1587</div><div class="line">1588</div><div class="line">1589</div><div class="line">1590</div><div class="line">1591</div><div class="line">1592</div><div class="line">1593</div><div class="line">1594</div><div class="line">1595</div><div class="line">1596</div><div class="line">1597</div><div class="line">1598</div><div class="line">1599</div><div class="line">1600</div><div class="line">1601</div><div class="line">1602</div><div class="line">1603</div><div class="line">1604</div><div class="line">1605</div><div class="line">1606</div><div class="line">1607</div><div class="line">1608</div><div class="line">1609</div><div class="line">1610</div><div class="line">1611</div><div class="line">1612</div><div class="line">1613</div><div class="line">1614</div><div class="line">1615</div><div class="line">1616</div><div class="line">1617</div><div class="line">1618</div><div class="line">1619</div><div class="line">1620</div><div class="line">1621</div><div class="line">1622</div><div class="line">1623</div><div class="line">1624</div><div class="line">1625</div><div class="line">1626</div><div class="line">1627</div><div class="line">1628</div><div class="line">1629</div><div class="line">1630</div><div class="line">1631</div><div class="line">1632</div><div class="line">1633</div><div class="line">1634</div><div class="line">1635</div><div class="line">1636</div><div class="line">1637</div><div class="line">1638</div><div class="line">1639</div><div class="line">1640</div><div class="line">1641</div><div class="line">1642</div><div class="line">1643</div><div class="line">1644</div><div class="line">1645</div><div class="line">1646</div><div class="line">1647</div><div class="line">1648</div><div class="line">1649</div><div class="line">1650</div><div class="line">1651</div><div class="line">1652</div><div class="line">1653</div><div class="line">1654</div><div class="line">1655</div><div class="line">1656</div><div class="line">1657</div><div class="line">1658</div><div class="line">1659</div><div class="line">1660</div><div class="line">1661</div><div class="line">1662</div><div class="line">1663</div><div class="line">1664</div><div class="line">1665</div><div class="line">1666</div><div class="line">1667</div><div class="line">1668</div><div class="line">1669</div><div class="line">1670</div><div class="line">1671</div><div class="line">1672</div><div class="line">1673</div><div class="line">1674</div><div class="line">1675</div><div class="line">1676</div><div class="line">1677</div><div class="line">1678</div><div class="line">1679</div><div class="line">1680</div><div class="line">1681</div><div class="line">1682</div><div class="line">1683</div><div class="line">1684</div><div class="line">1685</div><div class="line">1686</div><div class="line">1687</div><div class="line">1688</div><div class="line">1689</div><div class="line">1690</div><div class="line">1691</div><div class="line">1692</div><div class="line">1693</div><div class="line">1694</div><div class="line">1695</div><div class="line">1696</div><div class="line">1697</div><div class="line">1698</div><div class="line">1699</div><div class="line">1700</div><div class="line">1701</div><div class="line">1702</div><div class="line">1703</div><div class="line">1704</div><div class="line">1705</div><div class="line">1706</div><div class="line">1707</div><div class="line">1708</div><div class="line">1709</div><div class="line">1710</div><div class="line">1711</div><div class="line">1712</div><div class="line">1713</div><div class="line">1714</div><div class="line">1715</div><div class="line">1716</div><div class="line">1717</div><div class="line">1718</div><div class="line">1719</div><div class="line">1720</div><div class="line">1721</div><div class="line">1722</div><div class="line">1723</div><div class="line">1724</div><div class="line">1725</div><div class="line">1726</div><div class="line">1727</div><div class="line">1728</div><div class="line">1729</div><div class="line">1730</div><div class="line">1731</div><div class="line">1732</div><div class="line">1733</div><div class="line">1734</div><div class="line">1735</div><div class="line">1736</div><div class="line">1737</div><div class="line">1738</div><div class="line">1739</div><div class="line">1740</div><div class="line">1741</div><div class="line">1742</div><div class="line">1743</div><div class="line">1744</div><div class="line">1745</div><div class="line">1746</div><div class="line">1747</div><div class="line">1748</div><div class="line">1749</div><div class="line">1750</div><div class="line">1751</div><div class="line">1752</div><div class="line">1753</div><div class="line">1754</div><div class="line">1755</div><div class="line">1756</div><div class="line">1757</div><div class="line">1758</div><div class="line">1759</div><div class="line">1760</div><div class="line">1761</div><div class="line">1762</div><div class="line">1763</div><div class="line">1764</div><div class="line">1765</div><div class="line">1766</div><div class="line">1767</div><div class="line">1768</div><div class="line">1769</div><div class="line">1770</div><div class="line">1771</div><div class="line">1772</div><div class="line">1773</div><div class="line">1774</div><div class="line">1775</div><div class="line">1776</div><div class="line">1777</div><div class="line">1778</div><div class="line">1779</div><div class="line">1780</div><div class="line">1781</div><div class="line">1782</div><div class="line">1783</div><div class="line">1784</div><div class="line">1785</div><div class="line">1786</div><div class="line">1787</div><div class="line">1788</div><div class="line">1789</div><div class="line">1790</div><div class="line">1791</div><div class="line">1792</div><div class="line">1793</div><div class="line">1794</div><div class="line">1795</div><div class="line">1796</div><div class="line">1797</div><div class="line">1798</div><div class="line">1799</div><div class="line">1800</div><div class="line">1801</div><div class="line">1802</div><div class="line">1803</div><div class="line">1804</div><div class="line">1805</div><div class="line">1806</div><div class="line">1807</div><div class="line">1808</div><div class="line">1809</div><div class="line">1810</div><div class="line">1811</div><div class="line">1812</div><div class="line">1813</div><div class="line">1814</div><div class="line">1815</div><div class="line">1816</div><div class="line">1817</div><div class="line">1818</div><div class="line">1819</div><div class="line">1820</div><div class="line">1821</div><div class="line">1822</div><div class="line">1823</div><div class="line">1824</div><div class="line">1825</div><div class="line">1826</div><div class="line">1827</div><div class="line">1828</div><div class="line">1829</div><div class="line">1830</div><div class="line">1831</div><div class="line">1832</div><div class="line">1833</div><div class="line">1834</div><div class="line">1835</div><div class="line">1836</div><div class="line">1837</div><div class="line">1838</div><div class="line">1839</div><div class="line">1840</div><div class="line">1841</div><div class="line">1842</div><div class="line">1843</div><div class="line">1844</div><div class="line">1845</div><div class="line">1846</div><div class="line">1847</div><div class="line">1848</div><div class="line">1849</div><div class="line">1850</div><div class="line">1851</div><div class="line">1852</div><div class="line">1853</div><div class="line">1854</div><div class="line">1855</div><div class="line">1856</div><div class="line">1857</div><div class="line">1858</div><div class="line">1859</div><div class="line">1860</div><div class="line">1861</div><div class="line">1862</div><div class="line">1863</div><div class="line">1864</div><div class="line">1865</div><div class="line">1866</div><div class="line">1867</div><div class="line">1868</div><div class="line">1869</div><div class="line">1870</div><div class="line">1871</div><div class="line">1872</div><div class="line">1873</div><div class="line">1874</div><div class="line">1875</div><div class="line">1876</div><div class="line">1877</div><div class="line">1878</div><div class="line">1879</div><div class="line">1880</div><div class="line">1881</div><div class="line">1882</div><div class="line">1883</div><div class="line">1884</div><div class="line">1885</div><div class="line">1886</div><div class="line">1887</div><div class="line">1888</div><div class="line">1889</div><div class="line">1890</div><div class="line">1891</div><div class="line">1892</div><div class="line">1893</div><div class="line">1894</div><div class="line">1895</div><div class="line">1896</div><div class="line">1897</div><div class="line">1898</div><div class="line">1899</div><div class="line">1900</div><div class="line">1901</div><div class="line">1902</div><div class="line">1903</div><div class="line">1904</div><div class="line">1905</div><div class="line">1906</div><div class="line">1907</div><div class="line">1908</div><div class="line">1909</div><div class="line">1910</div><div class="line">1911</div><div class="line">1912</div><div class="line">1913</div><div class="line">1914</div><div class="line">1915</div><div class="line">1916</div><div class="line">1917</div><div class="line">1918</div><div class="line">1919</div><div class="line">1920</div><div class="line">1921</div><div class="line">1922</div><div class="line">1923</div><div class="line">1924</div><div class="line">1925</div><div class="line">1926</div><div class="line">1927</div><div class="line">1928</div><div class="line">1929</div><div class="line">1930</div><div class="line">1931</div><div class="line">1932</div><div class="line">1933</div><div class="line">1934</div><div class="line">1935</div><div class="line">1936</div><div class="line">1937</div><div class="line">1938</div><div class="line">1939</div><div class="line">1940</div><div class="line">1941</div><div class="line">1942</div><div class="line">1943</div><div class="line">1944</div><div class="line">1945</div><div class="line">1946</div><div class="line">1947</div><div class="line">1948</div><div class="line">1949</div><div class="line">1950</div><div class="line">1951</div><div class="line">1952</div><div class="line">1953</div><div class="line">1954</div><div class="line">1955</div><div class="line">1956</div><div class="line">1957</div><div class="line">1958</div><div class="line">1959</div><div class="line">1960</div><div class="line">1961</div><div class="line">1962</div><div class="line">1963</div><div class="line">1964</div><div class="line">1965</div><div class="line">1966</div><div class="line">1967</div><div class="line">1968</div><div class="line">1969</div><div class="line">1970</div><div class="line">1971</div><div class="line">1972</div><div class="line">1973</div><div class="line">1974</div><div class="line">1975</div><div class="line">1976</div><div class="line">1977</div><div class="line">1978</div><div class="line">1979</div><div class="line">1980</div><div class="line">1981</div><div class="line">1982</div><div class="line">1983</div><div class="line">1984</div><div class="line">1985</div><div class="line">1986</div><div class="line">1987</div><div class="line">1988</div><div class="line">1989</div><div class="line">1990</div><div class="line">1991</div><div class="line">1992</div><div class="line">1993</div><div class="line">1994</div><div class="line">1995</div><div class="line">1996</div><div class="line">1997</div><div class="line">1998</div><div class="line">1999</div><div class="line">2000</div><div class="line">2001</div><div class="line">2002</div><div class="line">2003</div><div class="line">2004</div><div class="line">2005</div><div class="line">2006</div><div class="line">2007</div><div class="line">2008</div><div class="line">2009</div><div class="line">2010</div><div class="line">2011</div><div class="line">2012</div><div class="line">2013</div><div class="line">2014</div><div class="line">2015</div><div class="line">2016</div><div class="line">2017</div><div class="line">2018</div><div class="line">2019</div><div class="line">2020</div><div class="line">2021</div><div class="line">2022</div><div class="line">2023</div><div class="line">2024</div><div class="line">2025</div><div class="line">2026</div><div class="line">2027</div><div class="line">2028</div><div class="line">2029</div><div class="line">2030</div><div class="line">2031</div><div class="line">2032</div><div class="line">2033</div><div class="line">2034</div><div class="line">2035</div><div class="line">2036</div><div class="line">2037</div><div class="line">2038</div><div class="line">2039</div><div class="line">2040</div><div class="line">2041</div><div class="line">2042</div><div class="line">2043</div><div class="line">2044</div><div class="line">2045</div><div class="line">2046</div><div class="line">2047</div><div class="line">2048</div><div class="line">2049</div><div class="line">2050</div><div class="line">2051</div><div class="line">2052</div><div class="line">2053</div><div class="line">2054</div><div class="line">2055</div><div class="line">2056</div><div class="line">2057</div><div class="line">2058</div><div class="line">2059</div><div class="line">2060</div><div class="line">2061</div><div class="line">2062</div><div class="line">2063</div><div class="line">2064</div><div class="line">2065</div><div class="line">2066</div><div class="line">2067</div><div class="line">2068</div><div class="line">2069</div><div class="line">2070</div><div class="line">2071</div><div class="line">2072</div><div class="line">2073</div><div class="line">2074</div><div class="line">2075</div><div class="line">2076</div><div class="line">2077</div><div class="line">2078</div><div class="line">2079</div><div class="line">2080</div><div class="line">2081</div><div class="line">2082</div><div class="line">2083</div><div class="line">2084</div><div class="line">2085</div><div class="line">2086</div><div class="line">2087</div><div class="line">2088</div><div class="line">2089</div><div class="line">2090</div><div class="line">2091</div><div class="line">2092</div><div class="line">2093</div><div class="line">2094</div><div class="line">2095</div><div class="line">2096</div><div class="line">2097</div><div class="line">2098</div><div class="line">2099</div><div class="line">2100</div><div class="line">2101</div><div class="line">2102</div><div class="line">2103</div><div class="line">2104</div><div class="line">2105</div><div class="line">2106</div><div class="line">2107</div><div class="line">2108</div><div class="line">2109</div><div class="line">2110</div><div class="line">2111</div><div class="line">2112</div><div class="line">2113</div><div class="line">2114</div><div class="line">2115</div><div class="line">2116</div><div class="line">2117</div><div class="line">2118</div><div class="line">2119</div><div class="line">2120</div><div class="line">2121</div><div class="line">2122</div><div class="line">2123</div><div class="line">2124</div><div class="line">2125</div><div class="line">2126</div><div class="line">2127</div><div class="line">2128</div><div class="line">2129</div><div class="line">2130</div><div class="line">2131</div><div class="line">2132</div><div class="line">2133</div><div class="line">2134</div><div class="line">2135</div><div class="line">2136</div><div class="line">2137</div><div class="line">2138</div><div class="line">2139</div><div class="line">2140</div><div class="line">2141</div><div class="line">2142</div><div class="line">2143</div><div class="line">2144</div><div class="line">2145</div><div class="line">2146</div><div class="line">2147</div><div class="line">2148</div><div class="line">2149</div><div class="line">2150</div><div class="line">2151</div><div class="line">2152</div><div class="line">2153</div><div class="line">2154</div><div class="line">2155</div><div class="line">2156</div><div class="line">2157</div><div class="line">2158</div><div class="line">2159</div><div class="line">2160</div><div class="line">2161</div><div class="line">2162</div><div class="line">2163</div><div class="line">2164</div><div class="line">2165</div><div class="line">2166</div><div class="line">2167</div><div class="line">2168</div><div class="line">2169</div><div class="line">2170</div><div class="line">2171</div><div class="line">2172</div><div class="line">2173</div><div class="line">2174</div><div class="line">2175</div><div class="line">2176</div><div class="line">2177</div><div class="line">2178</div><div class="line">2179</div><div class="line">2180</div><div class="line">2181</div><div class="line">2182</div><div class="line">2183</div><div class="line">2184</div><div class="line">2185</div><div class="line">2186</div><div class="line">2187</div><div class="line">2188</div><div class="line">2189</div><div class="line">2190</div><div class="line">2191</div><div class="line">2192</div><div class="line">2193</div><div class="line">2194</div><div class="line">2195</div><div class="line">2196</div><div class="line">2197</div><div class="line">2198</div><div class="line">2199</div><div class="line">2200</div><div class="line">2201</div><div class="line">2202</div><div class="line">2203</div><div class="line">2204</div><div class="line">2205</div><div class="line">2206</div><div class="line">2207</div><div class="line">2208</div><div class="line">2209</div><div class="line">2210</div><div class="line">2211</div><div class="line">2212</div><div class="line">2213</div><div class="line">2214</div><div class="line">2215</div><div class="line">2216</div><div class="line">2217</div><div class="line">2218</div><div class="line">2219</div><div class="line">2220</div><div class="line">2221</div><div class="line">2222</div><div class="line">2223</div><div class="line">2224</div><div class="line">2225</div><div class="line">2226</div><div class="line">2227</div><div class="line">2228</div><div class="line">2229</div><div class="line">2230</div><div class="line">2231</div><div class="line">2232</div><div class="line">2233</div><div class="line">2234</div><div class="line">2235</div><div class="line">2236</div><div class="line">2237</div><div class="line">2238</div><div class="line">2239</div><div class="line">2240</div><div class="line">2241</div><div class="line">2242</div><div class="line">2243</div><div class="line">2244</div><div class="line">2245</div><div class="line">2246</div><div class="line">2247</div><div class="line">2248</div><div class="line">2249</div><div class="line">2250</div><div class="line">2251</div><div class="line">2252</div><div class="line">2253</div><div class="line">2254</div><div class="line">2255</div><div class="line">2256</div><div class="line">2257</div><div class="line">2258</div><div class="line">2259</div><div class="line">2260</div><div class="line">2261</div><div class="line">2262</div><div class="line">2263</div><div class="line">2264</div><div class="line">2265</div><div class="line">2266</div><div class="line">2267</div><div class="line">2268</div><div class="line">2269</div><div class="line">2270</div><div class="line">2271</div><div class="line">2272</div><div class="line">2273</div><div class="line">2274</div><div class="line">2275</div><div class="line">2276</div><div class="line">2277</div><div class="line">2278</div><div class="line">2279</div><div class="line">2280</div><div class="line">2281</div><div class="line">2282</div><div class="line">2283</div><div class="line">2284</div><div class="line">2285</div><div class="line">2286</div><div class="line">2287</div><div class="line">2288</div><div class="line">2289</div><div class="line">2290</div><div class="line">2291</div><div class="line">2292</div><div class="line">2293</div><div class="line">2294</div><div class="line">2295</div><div class="line">2296</div><div class="line">2297</div><div class="line">2298</div><div class="line">2299</div><div class="line">2300</div><div class="line">2301</div><div class="line">2302</div><div class="line">2303</div><div class="line">2304</div><div class="line">2305</div><div class="line">2306</div><div class="line">2307</div><div class="line">2308</div><div class="line">2309</div><div class="line">2310</div><div class="line">2311</div><div class="line">2312</div><div class="line">2313</div><div class="line">2314</div><div class="line">2315</div><div class="line">2316</div><div class="line">2317</div><div class="line">2318</div><div class="line">2319</div><div class="line">2320</div><div class="line">2321</div><div class="line">2322</div><div class="line">2323</div><div class="line">2324</div><div class="line">2325</div><div class="line">2326</div><div class="line">2327</div><div class="line">2328</div><div class="line">2329</div><div class="line">2330</div><div class="line">2331</div><div class="line">2332</div><div class="line">2333</div><div class="line">2334</div><div class="line">2335</div><div class="line">2336</div><div class="line">2337</div><div class="line">2338</div><div class="line">2339</div><div class="line">2340</div><div class="line">2341</div><div class="line">2342</div><div class="line">2343</div><div class="line">2344</div><div class="line">2345</div><div class="line">2346</div><div class="line">2347</div><div class="line">2348</div><div class="line">2349</div><div class="line">2350</div><div class="line">2351</div><div class="line">2352</div><div class="line">2353</div><div class="line">2354</div><div class="line">2355</div><div class="line">2356</div><div class="line">2357</div><div class="line">2358</div><div class="line">2359</div><div class="line">2360</div><div class="line">2361</div><div class="line">2362</div><div class="line">2363</div><div class="line">2364</div><div class="line">2365</div><div class="line">2366</div><div class="line">2367</div><div class="line">2368</div><div class="line">2369</div><div class="line">2370</div><div class="line">2371</div><div class="line">2372</div><div class="line">2373</div><div class="line">2374</div><div class="line">2375</div><div class="line">2376</div><div class="line">2377</div><div class="line">2378</div><div class="line">2379</div><div class="line">2380</div><div class="line">2381</div><div class="line">2382</div><div class="line">2383</div><div class="line">2384</div><div class="line">2385</div><div class="line">2386</div><div class="line">2387</div><div class="line">2388</div><div class="line">2389</div><div class="line">2390</div><div class="line">2391</div><div class="line">2392</div><div class="line">2393</div><div class="line">2394</div><div class="line">2395</div><div class="line">2396</div><div class="line">2397</div><div class="line">2398</div><div class="line">2399</div><div class="line">2400</div><div class="line">2401</div><div class="line">2402</div><div class="line">2403</div><div class="line">2404</div><div class="line">2405</div><div class="line">2406</div><div class="line">2407</div><div class="line">2408</div><div class="line">2409</div><div class="line">2410</div><div class="line">2411</div><div class="line">2412</div><div class="line">2413</div><div class="line">2414</div><div class="line">2415</div><div class="line">2416</div><div class="line">2417</div><div class="line">2418</div><div class="line">2419</div><div class="line">2420</div><div class="line">2421</div><div class="line">2422</div><div class="line">2423</div><div class="line">2424</div><div class="line">2425</div><div class="line">2426</div><div class="line">2427</div><div class="line">2428</div><div class="line">2429</div><div class="line">2430</div><div class="line">2431</div><div class="line">2432</div><div class="line">2433</div><div class="line">2434</div><div class="line">2435</div><div class="line">2436</div><div class="line">2437</div><div class="line">2438</div><div class="line">2439</div><div class="line">2440</div><div class="line">2441</div><div class="line">2442</div><div class="line">2443</div><div class="line">2444</div><div class="line">2445</div><div class="line">2446</div><div class="line">2447</div><div class="line">2448</div><div class="line">2449</div><div class="line">2450</div><div class="line">2451</div><div class="line">2452</div><div class="line">2453</div><div class="line">2454</div><div class="line">2455</div><div class="line">2456</div><div class="line">2457</div><div class="line">2458</div><div class="line">2459</div><div class="line">2460</div></pre></td><td class="code"><pre><div class="line">public abstract class Encode extends Encoding &#123;</div><div class="line">	/* ps:EUC为双字节编码,超过10000个字符 */</div><div class="line"></div><div class="line">	int GB2312format[][]; // gb</div><div class="line"></div><div class="line">	int GBKformat[][]; // gbk</div><div class="line"></div><div class="line">	int Big5format[][]; // big5编码</div><div class="line"></div><div class="line">	int EUC_KRformat[][]; // euc-kr</div><div class="line"></div><div class="line">	int JPformat[][]; // jp</div><div class="line"></div><div class="line">	void init() &#123;</div><div class="line">		int i, j;</div><div class="line"></div><div class="line">		for (i = 0; i &lt; 94; i++) &#123;</div><div class="line">			for (j = 0; j &lt; 94; j++) &#123;</div><div class="line">				GB2312format[i][j] = 0;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		for (i = 0; i &lt; 126; i++) &#123;</div><div class="line">			for (j = 0; j &lt; 191; j++) &#123;</div><div class="line">				GBKformat[i][j] = 0;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		for (i = 0; i &lt; 94; i++) &#123;</div><div class="line">			for (j = 0; j &lt; 158; j++) &#123;</div><div class="line">				Big5format[i][j] = 0;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line"></div><div class="line"></div><div class="line">		for (i = 0; i &lt; 94; i++) &#123;</div><div class="line">			for (j = 0; j &lt; 94; j++) &#123;</div><div class="line">				JPformat[i][j] = 0;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">		GB2312format[20][35] = 599;</div><div class="line">		GB2312format[49][26] = 598;</div><div class="line">		GB2312format[41][38] = 597;</div><div class="line">		GB2312format[17][26] = 596;</div><div class="line">		GB2312format[32][42] = 595;</div><div class="line">		GB2312format[39][42] = 594;</div><div class="line">		GB2312format[45][49] = 593;</div><div class="line">		GB2312format[51][57] = 592;</div><div class="line">		GB2312format[50][47] = 591;</div><div class="line">		GB2312format[42][90] = 590;</div><div class="line">		GB2312format[52][65] = 589;</div><div class="line">		GB2312format[53][47] = 588;</div><div class="line">		GB2312format[19][82] = 587;</div><div class="line">		GB2312format[31][19] = 586;</div><div class="line">		GB2312format[40][46] = 585;</div><div class="line">		GB2312format[24][89] = 584;</div><div class="line">		GB2312format[23][85] = 583;</div><div class="line">		GB2312format[20][28] = 582;</div><div class="line">		GB2312format[42][20] = 581;</div><div class="line">		GB2312format[34][38] = 580;</div><div class="line">		GB2312format[45][9] = 579;</div><div class="line">		GB2312format[54][50] = 578;</div><div class="line">		GB2312format[25][44] = 577;</div><div class="line">		GB2312format[35][66] = 576;</div><div class="line">		GB2312format[20][55] = 575;</div><div class="line">		GB2312format[18][85] = 574;</div><div class="line">		GB2312format[20][31] = 573;</div><div class="line">		GB2312format[49][17] = 572;</div><div class="line">		GB2312format[41][16] = 571;</div><div class="line">		GB2312format[35][73] = 570;</div><div class="line">		GB2312format[20][34] = 569;</div><div class="line">		GB2312format[29][44] = 568;</div><div class="line">		GB2312format[35][38] = 567;</div><div class="line">		GB2312format[49][9] = 566;</div><div class="line">		GB2312format[46][33] = 565;</div><div class="line">		GB2312format[49][51] = 564;</div><div class="line">		GB2312format[40][89] = 563;</div><div class="line">		GB2312format[26][64] = 562;</div><div class="line">		GB2312format[54][51] = 561;</div><div class="line">		GB2312format[54][36] = 560;</div><div class="line">		GB2312format[39][4] = 559;</div><div class="line">		GB2312format[53][13] = 558;</div><div class="line">		GB2312format[24][92] = 557;</div><div class="line">		GB2312format[27][49] = 556;</div><div class="line">		GB2312format[48][6] = 555;</div><div class="line">		GB2312format[21][51] = 554;</div><div class="line">		GB2312format[30][40] = 553;</div><div class="line">		GB2312format[42][92] = 552;</div><div class="line">		GB2312format[31][78] = 551;</div><div class="line">		GB2312format[25][82] = 550;</div><div class="line">		GB2312format[47][0] = 549;</div><div class="line">		GB2312format[34][19] = 548;</div><div class="line">		GB2312format[47][35] = 547;</div><div class="line">		GB2312format[21][63] = 546;</div><div class="line">		GB2312format[43][75] = 545;</div><div class="line">		GB2312format[21][87] = 544;</div><div class="line">		GB2312format[35][59] = 543;</div><div class="line">		GB2312format[25][34] = 542;</div><div class="line">		GB2312format[21][27] = 541;</div><div class="line">		GB2312format[39][26] = 540;</div><div class="line">		GB2312format[34][26] = 539;</div><div class="line">		GB2312format[39][52] = 538;</div><div class="line">		GB2312format[50][57] = 537;</div><div class="line">		GB2312format[37][79] = 536;</div><div class="line">		GB2312format[26][24] = 535;</div><div class="line">		GB2312format[22][1] = 534;</div><div class="line">		GB2312format[18][40] = 533;</div><div class="line">		GB2312format[41][33] = 532;</div><div class="line">		GB2312format[53][26] = 531;</div><div class="line">		GB2312format[54][86] = 530;</div><div class="line">		GB2312format[20][16] = 529;</div><div class="line">		GB2312format[46][74] = 528;</div><div class="line">		GB2312format[30][19] = 527;</div><div class="line">		GB2312format[45][35] = 526;</div><div class="line">		GB2312format[45][61] = 525;</div><div class="line">		GB2312format[30][9] = 524;</div><div class="line">		GB2312format[41][53] = 523;</div><div class="line">		GB2312format[41][13] = 522;</div><div class="line">		GB2312format[50][34] = 521;</div><div class="line">		GB2312format[53][86] = 520;</div><div class="line">		GB2312format[47][47] = 519;</div><div class="line">		GB2312format[22][28] = 518;</div><div class="line">		GB2312format[50][53] = 517;</div><div class="line">		GB2312format[39][70] = 516;</div><div class="line">		GB2312format[38][15] = 515;</div><div class="line">		GB2312format[42][88] = 514;</div><div class="line">		GB2312format[16][29] = 513;</div><div class="line">		GB2312format[27][90] = 512;</div><div class="line">		GB2312format[29][12] = 511;</div><div class="line">		GB2312format[44][22] = 510;</div><div class="line">		GB2312format[34][69] = 509;</div><div class="line">		GB2312format[24][10] = 508;</div><div class="line">		GB2312format[44][11] = 507;</div><div class="line">		GB2312format[39][92] = 506;</div><div class="line">		GB2312format[49][48] = 505;</div><div class="line">		GB2312format[31][46] = 504;</div><div class="line">		GB2312format[19][50] = 503;</div><div class="line">		GB2312format[21][14] = 502;</div><div class="line">		GB2312format[32][28] = 501;</div><div class="line">		GB2312format[18][3] = 500;</div><div class="line">		GB2312format[53][9] = 499;</div><div class="line">		GB2312format[34][80] = 498;</div><div class="line">		GB2312format[48][88] = 497;</div><div class="line">		GB2312format[46][53] = 496;</div><div class="line">		GB2312format[22][53] = 495;</div><div class="line">		GB2312format[28][10] = 494;</div><div class="line">		GB2312format[44][65] = 493;</div><div class="line">		GB2312format[20][10] = 492;</div><div class="line">		GB2312format[40][76] = 491;</div><div class="line">		GB2312format[47][8] = 490;</div><div class="line">		GB2312format[50][74] = 489;</div><div class="line">		GB2312format[23][62] = 488;</div><div class="line">		GB2312format[49][65] = 487;</div><div class="line">		GB2312format[28][87] = 486;</div><div class="line">		GB2312format[15][48] = 485;</div><div class="line">		GB2312format[22][7] = 484;</div><div class="line">		GB2312format[19][42] = 483;</div><div class="line">		GB2312format[41][20] = 482;</div><div class="line">		GB2312format[26][55] = 481;</div><div class="line">		GB2312format[21][93] = 480;</div><div class="line">		GB2312format[31][76] = 479;</div><div class="line">		GB2312format[34][31] = 478;</div><div class="line">		GB2312format[20][66] = 477;</div><div class="line">		GB2312format[51][33] = 476;</div><div class="line">		GB2312format[34][86] = 475;</div><div class="line">		GB2312format[37][67] = 474;</div><div class="line">		GB2312format[53][53] = 473;</div><div class="line">		GB2312format[40][88] = 472;</div><div class="line">		GB2312format[39][10] = 471;</div><div class="line">		GB2312format[24][3] = 470;</div><div class="line">		GB2312format[27][25] = 469;</div><div class="line">		GB2312format[26][15] = 468;</div><div class="line">		GB2312format[21][88] = 467;</div><div class="line">		GB2312format[52][62] = 466;</div><div class="line">		GB2312format[46][81] = 465;</div><div class="line">		GB2312format[38][72] = 464;</div><div class="line">		GB2312format[17][30] = 463;</div><div class="line">		GB2312format[52][92] = 462;</div><div class="line">		GB2312format[34][90] = 461;</div><div class="line">		GB2312format[21][7] = 460;</div><div class="line">		GB2312format[36][13] = 459;</div><div class="line">		GB2312format[45][41] = 458;</div><div class="line">		GB2312format[32][5] = 457;</div><div class="line">		GB2312format[26][89] = 456;</div><div class="line">		GB2312format[23][87] = 455;</div><div class="line">		GB2312format[20][39] = 454;</div><div class="line">		GB2312format[27][23] = 453;</div><div class="line">		GB2312format[25][59] = 452;</div><div class="line">		GB2312format[49][20] = 451;</div><div class="line">		GB2312format[54][77] = 450;</div><div class="line">		GB2312format[27][67] = 449;</div><div class="line">		GB2312format[47][33] = 448;</div><div class="line">		GB2312format[41][17] = 447;</div><div class="line">		GB2312format[19][81] = 446;</div><div class="line">		GB2312format[16][66] = 445;</div><div class="line">		GB2312format[45][26] = 444;</div><div class="line">		GB2312format[49][81] = 443;</div><div class="line">		GB2312format[53][55] = 442;</div><div class="line">		GB2312format[16][26] = 441;</div><div class="line">		GB2312format[54][62] = 440;</div><div class="line">		GB2312format[20][70] = 439;</div><div class="line">		GB2312format[42][35] = 438;</div><div class="line">		GB2312format[20][57] = 437;</div><div class="line">		GB2312format[34][36] = 436;</div><div class="line">		GB2312format[46][63] = 435;</div><div class="line">		GB2312format[19][45] = 434;</div><div class="line">		GB2312format[21][10] = 433;</div><div class="line">		GB2312format[52][93] = 432;</div><div class="line">		GB2312format[25][2] = 431;</div><div class="line">		GB2312format[30][57] = 430;</div><div class="line">		GB2312format[41][24] = 429;</div><div class="line">		GB2312format[28][43] = 428;</div><div class="line">		GB2312format[45][86] = 427;</div><div class="line">		GB2312format[51][56] = 426;</div><div class="line">		GB2312format[37][28] = 425;</div><div class="line">		GB2312format[52][69] = 424;</div><div class="line">		GB2312format[43][92] = 423;</div><div class="line">		GB2312format[41][31] = 422;</div><div class="line">		GB2312format[37][87] = 421;</div><div class="line">		GB2312format[47][36] = 420;</div><div class="line">		GB2312format[16][16] = 419;</div><div class="line">		GB2312format[40][56] = 418;</div><div class="line">		GB2312format[24][55] = 417;</div><div class="line">		GB2312format[17][1] = 416;</div><div class="line">		GB2312format[35][57] = 415;</div><div class="line">		GB2312format[27][50] = 414;</div><div class="line">		GB2312format[26][14] = 413;</div><div class="line">		GB2312format[50][40] = 412;</div><div class="line">		GB2312format[39][19] = 411;</div><div class="line">		GB2312format[19][89] = 410;</div><div class="line">		GB2312format[29][91] = 409;</div><div class="line">		GB2312format[17][89] = 408;</div><div class="line">		GB2312format[39][74] = 407;</div><div class="line">		GB2312format[46][39] = 406;</div><div class="line">		GB2312format[40][28] = 405;</div><div class="line">		GB2312format[45][68] = 404;</div><div class="line">		GB2312format[43][10] = 403;</div><div class="line">		GB2312format[42][13] = 402;</div><div class="line">		GB2312format[44][81] = 401;</div><div class="line">		GB2312format[41][47] = 400;</div><div class="line">		GB2312format[48][58] = 399;</div><div class="line">		GB2312format[43][68] = 398;</div><div class="line">		GB2312format[16][79] = 397;</div><div class="line">		GB2312format[19][5] = 396;</div><div class="line">		GB2312format[54][59] = 395;</div><div class="line">		GB2312format[17][36] = 394;</div><div class="line">		GB2312format[18][0] = 393;</div><div class="line">		GB2312format[41][5] = 392;</div><div class="line">		GB2312format[41][72] = 391;</div><div class="line">		GB2312format[16][39] = 390;</div><div class="line">		GB2312format[54][0] = 389;</div><div class="line">		GB2312format[51][16] = 388;</div><div class="line">		GB2312format[29][36] = 387;</div><div class="line">		GB2312format[47][5] = 386;</div><div class="line">		GB2312format[47][51] = 385;</div><div class="line">		GB2312format[44][7] = 384;</div><div class="line">		GB2312format[35][30] = 383;</div><div class="line">		GB2312format[26][9] = 382;</div><div class="line">		GB2312format[16][7] = 381;</div><div class="line">		GB2312format[32][1] = 380;</div><div class="line">		GB2312format[33][76] = 379;</div><div class="line">		GB2312format[34][91] = 378;</div><div class="line">		GB2312format[52][36] = 377;</div><div class="line">		GB2312format[26][77] = 376;</div><div class="line">		GB2312format[35][48] = 375;</div><div class="line">		GB2312format[40][80] = 374;</div><div class="line">		GB2312format[41][92] = 373;</div><div class="line">		GB2312format[27][93] = 372;</div><div class="line">		GB2312format[15][17] = 371;</div><div class="line">		GB2312format[16][76] = 370;</div><div class="line">		GB2312format[51][12] = 369;</div><div class="line">		GB2312format[18][20] = 368;</div><div class="line">		GB2312format[15][54] = 367;</div><div class="line">		GB2312format[50][5] = 366;</div><div class="line">		GB2312format[33][22] = 365;</div><div class="line">		GB2312format[37][57] = 364;</div><div class="line">		GB2312format[28][47] = 363;</div><div class="line">		GB2312format[42][31] = 362;</div><div class="line">		GB2312format[18][2] = 361;</div><div class="line">		GB2312format[43][64] = 360;</div><div class="line">		GB2312format[23][47] = 359;</div><div class="line">		GB2312format[28][79] = 358;</div><div class="line">		GB2312format[25][45] = 357;</div><div class="line">		GB2312format[23][91] = 356;</div><div class="line">		GB2312format[22][19] = 355;</div><div class="line">		GB2312format[25][46] = 354;</div><div class="line">		GB2312format[22][36] = 353;</div><div class="line">		GB2312format[54][85] = 352;</div><div class="line">		GB2312format[46][20] = 351;</div><div class="line">		GB2312format[27][37] = 350;</div><div class="line">		GB2312format[26][81] = 349;</div><div class="line">		GB2312format[42][29] = 348;</div><div class="line">		GB2312format[31][90] = 347;</div><div class="line">		GB2312format[41][59] = 346;</div><div class="line">		GB2312format[24][65] = 345;</div><div class="line">		GB2312format[44][84] = 344;</div><div class="line">		GB2312format[24][90] = 343;</div><div class="line">		GB2312format[38][54] = 342;</div><div class="line">		GB2312format[28][70] = 341;</div><div class="line">		GB2312format[27][15] = 340;</div><div class="line">		GB2312format[28][80] = 339;</div><div class="line">		GB2312format[29][8] = 338;</div><div class="line">		GB2312format[45][80] = 337;</div><div class="line">		GB2312format[53][37] = 336;</div><div class="line">		GB2312format[28][65] = 335;</div><div class="line">		GB2312format[23][86] = 334;</div><div class="line">		GB2312format[39][45] = 333;</div><div class="line">		GB2312format[53][32] = 332;</div><div class="line">		GB2312format[38][68] = 331;</div><div class="line">		GB2312format[45][78] = 330;</div><div class="line">		GB2312format[43][7] = 329;</div><div class="line">		GB2312format[46][82] = 328;</div><div class="line">		GB2312format[27][38] = 327;</div><div class="line">		GB2312format[16][62] = 326;</div><div class="line">		GB2312format[24][17] = 325;</div><div class="line">		GB2312format[22][70] = 324;</div><div class="line">		GB2312format[52][28] = 323;</div><div class="line">		GB2312format[23][40] = 322;</div><div class="line">		GB2312format[28][50] = 321;</div><div class="line">		GB2312format[42][91] = 320;</div><div class="line">		GB2312format[47][76] = 319;</div><div class="line">		GB2312format[15][42] = 318;</div><div class="line">		GB2312format[43][55] = 317;</div><div class="line">		GB2312format[29][84] = 316;</div><div class="line">		GB2312format[44][90] = 315;</div><div class="line">		GB2312format[53][16] = 314;</div><div class="line">		GB2312format[22][93] = 313;</div><div class="line">		GB2312format[34][10] = 312;</div><div class="line">		GB2312format[32][53] = 311;</div><div class="line">		GB2312format[43][65] = 310;</div><div class="line">		GB2312format[28][7] = 309;</div><div class="line">		GB2312format[35][46] = 308;</div><div class="line">		GB2312format[21][39] = 307;</div><div class="line">		GB2312format[44][18] = 306;</div><div class="line">		GB2312format[40][10] = 305;</div><div class="line">		GB2312format[54][53] = 304;</div><div class="line">		GB2312format[38][74] = 303;</div><div class="line">		GB2312format[28][26] = 302;</div><div class="line">		GB2312format[15][13] = 301;</div><div class="line">		GB2312format[39][34] = 300;</div><div class="line">		GB2312format[39][46] = 299;</div><div class="line">		GB2312format[42][66] = 298;</div><div class="line">		GB2312format[33][58] = 297;</div><div class="line">		GB2312format[15][56] = 296;</div><div class="line">		GB2312format[18][51] = 295;</div><div class="line">		GB2312format[49][68] = 294;</div><div class="line">		GB2312format[30][37] = 293;</div><div class="line">		GB2312format[51][84] = 292;</div><div class="line">		GB2312format[51][9] = 291;</div><div class="line">		GB2312format[40][70] = 290;</div><div class="line">		GB2312format[41][84] = 289;</div><div class="line">		GB2312format[28][64] = 288;</div><div class="line">		GB2312format[32][88] = 287;</div><div class="line">		GB2312format[24][5] = 286;</div><div class="line">		GB2312format[53][23] = 285;</div><div class="line">		GB2312format[42][27] = 284;</div><div class="line">		GB2312format[22][38] = 283;</div><div class="line">		GB2312format[32][86] = 282;</div><div class="line">		GB2312format[34][30] = 281;</div><div class="line">		GB2312format[38][63] = 280;</div><div class="line">		GB2312format[24][59] = 279;</div><div class="line">		GB2312format[22][81] = 278;</div><div class="line">		GB2312format[32][11] = 277;</div><div class="line">		GB2312format[51][21] = 276;</div><div class="line">		GB2312format[54][41] = 275;</div><div class="line">		GB2312format[21][50] = 274;</div><div class="line">		GB2312format[23][89] = 273;</div><div class="line">		GB2312format[19][87] = 272;</div><div class="line">		GB2312format[26][7] = 271;</div><div class="line">		GB2312format[30][75] = 270;</div><div class="line">		GB2312format[43][84] = 269;</div><div class="line">		GB2312format[51][25] = 268;</div><div class="line">		GB2312format[16][67] = 267;</div><div class="line">		GB2312format[32][9] = 266;</div><div class="line">		GB2312format[48][51] = 265;</div><div class="line">		GB2312format[39][7] = 264;</div><div class="line">		GB2312format[44][88] = 263;</div><div class="line">		GB2312format[52][24] = 262;</div><div class="line">		GB2312format[23][34] = 261;</div><div class="line">		GB2312format[32][75] = 260;</div><div class="line">		GB2312format[19][10] = 259;</div><div class="line">		GB2312format[28][91] = 258;</div><div class="line">		GB2312format[32][83] = 257;</div><div class="line">		GB2312format[25][75] = 256;</div><div class="line">		GB2312format[53][45] = 255;</div><div class="line">		GB2312format[29][85] = 254;</div><div class="line">		GB2312format[53][59] = 253;</div><div class="line">		GB2312format[16][2] = 252;</div><div class="line">		GB2312format[19][78] = 251;</div><div class="line">		GB2312format[15][75] = 250;</div><div class="line">		GB2312format[51][42] = 249;</div><div class="line">		GB2312format[45][67] = 248;</div><div class="line">		GB2312format[15][74] = 247;</div><div class="line">		GB2312format[25][81] = 246;</div><div class="line">		GB2312format[37][62] = 245;</div><div class="line">		GB2312format[16][55] = 244;</div><div class="line">		GB2312format[18][38] = 243;</div><div class="line">		GB2312format[23][23] = 242;</div><div class="line">		GB2312format[38][30] = 241;</div><div class="line">		GB2312format[17][28] = 240;</div><div class="line">		GB2312format[44][73] = 239;</div><div class="line">		GB2312format[23][78] = 238;</div><div class="line">		GB2312format[40][77] = 237;</div><div class="line">		GB2312format[38][87] = 236;</div><div class="line">		GB2312format[27][19] = 235;</div><div class="line">		GB2312format[38][82] = 234;</div><div class="line">		GB2312format[37][22] = 233;</div><div class="line">		GB2312format[41][30] = 232;</div><div class="line">		GB2312format[54][9] = 231;</div><div class="line">		GB2312format[32][30] = 230;</div><div class="line">		GB2312format[30][52] = 229;</div><div class="line">		GB2312format[40][84] = 228;</div><div class="line">		GB2312format[53][57] = 227;</div><div class="line">		GB2312format[27][27] = 226;</div><div class="line">		GB2312format[38][64] = 225;</div><div class="line">		GB2312format[18][43] = 224;</div><div class="line">		GB2312format[23][69] = 223;</div><div class="line">		GB2312format[28][12] = 222;</div><div class="line">		GB2312format[50][78] = 221;</div><div class="line">		GB2312format[50][1] = 220;</div><div class="line">		GB2312format[26][88] = 219;</div><div class="line">		GB2312format[36][40] = 218;</div><div class="line">		GB2312format[33][89] = 217;</div><div class="line">		GB2312format[41][28] = 216;</div><div class="line">		GB2312format[31][77] = 215;</div><div class="line">		GB2312format[46][1] = 214;</div><div class="line">		GB2312format[47][19] = 213;</div><div class="line">		GB2312format[35][55] = 212;</div><div class="line">		GB2312format[41][21] = 211;</div><div class="line">		GB2312format[27][10] = 210;</div><div class="line">		GB2312format[32][77] = 209;</div><div class="line">		GB2312format[26][37] = 208;</div><div class="line">		GB2312format[20][33] = 207;</div><div class="line">		GB2312format[41][52] = 206;</div><div class="line">		GB2312format[32][18] = 205;</div><div class="line">		GB2312format[38][13] = 204;</div><div class="line">		GB2312format[20][18] = 203;</div><div class="line">		GB2312format[20][24] = 202;</div><div class="line">		GB2312format[45][19] = 201;</div><div class="line">		GB2312format[18][53] = 200;</div><div class="line">		/*</div><div class="line">		 * GB2312format[39][0] = 199; GB2312format[40][71] = 198;</div><div class="line">		 * GB2312format[41][27] = 197; GB2312format[15][69] = 196;</div><div class="line">		 * GB2312format[42][10] = 195; GB2312format[31][89] = 194;</div><div class="line">		 * GB2312format[51][28] = 193; GB2312format[41][22] = 192;</div><div class="line">		 * GB2312format[40][43] = 191; GB2312format[38][6] = 190;</div><div class="line">		 * GB2312format[37][11] = 189; GB2312format[39][60] = 188;</div><div class="line">		 * GB2312format[48][47] = 187; GB2312format[46][80] = 186;</div><div class="line">		 * GB2312format[52][49] = 185; GB2312format[50][48] = 184;</div><div class="line">		 * GB2312format[25][1] = 183; GB2312format[52][29] = 182;</div><div class="line">		 * GB2312format[24][66] = 181; GB2312format[23][35] = 180;</div><div class="line">		 * GB2312format[49][72] = 179; GB2312format[47][45] = 178;</div><div class="line">		 * GB2312format[45][14] = 177; GB2312format[51][70] = 176;</div><div class="line">		 * GB2312format[22][30] = 175; GB2312format[49][83] = 174;</div><div class="line">		 * GB2312format[26][79] = 173; GB2312format[27][41] = 172;</div><div class="line">		 * GB2312format[51][81] = 171; GB2312format[41][54] = 170;</div><div class="line">		 * GB2312format[20][4] = 169; GB2312format[29][60] = 168;</div><div class="line">		 * GB2312format[20][27] = 167; GB2312format[50][15] = 166;</div><div class="line">		 * GB2312format[41][6] = 165; GB2312format[35][34] = 164;</div><div class="line">		 * GB2312format[44][87] = 163; GB2312format[46][66] = 162;</div><div class="line">		 * GB2312format[42][37] = 161; GB2312format[42][24] = 160;</div><div class="line">		 * GB2312format[54][7] = 159; GB2312format[41][14] = 158;</div><div class="line">		 * GB2312format[39][83] = 157; GB2312format[16][87] = 156;</div><div class="line">		 * GB2312format[20][59] = 155; GB2312format[42][12] = 154;</div><div class="line">		 * GB2312format[47][2] = 153; GB2312format[21][32] = 152;</div><div class="line">		 * GB2312format[53][29] = 151; GB2312format[22][40] = 150;</div><div class="line">		 * GB2312format[24][58] = 149; GB2312format[52][88] = 148;</div><div class="line">		 * GB2312format[29][30] = 147; GB2312format[15][91] = 146;</div><div class="line">		 * GB2312format[54][72] = 145; GB2312format[51][75] = 144;</div><div class="line">		 * GB2312format[33][67] = 143; GB2312format[41][50] = 142;</div><div class="line">		 * GB2312format[27][34] = 141; GB2312format[46][17] = 140;</div><div class="line">		 * GB2312format[31][74] = 139; GB2312format[42][67] = 138;</div><div class="line">		 * GB2312format[54][87] = 137; GB2312format[27][14] = 136;</div><div class="line">		 * GB2312format[16][63] = 135; GB2312format[16][5] = 134;</div><div class="line">		 * GB2312format[43][23] = 133; GB2312format[23][13] = 132;</div><div class="line">		 * GB2312format[31][12] = 131; GB2312format[25][57] = 130;</div><div class="line">		 * GB2312format[38][49] = 129; GB2312format[42][69] = 128;</div><div class="line">		 * GB2312format[23][80] = 127; GB2312format[29][0] = 126;</div><div class="line">		 * GB2312format[28][2] = 125; GB2312format[28][17] = 124;</div><div class="line">		 * GB2312format[17][27] = 123; GB2312format[40][16] = 122;</div><div class="line">		 * GB2312format[45][1] = 121; GB2312format[36][33] = 120;</div><div class="line">		 * GB2312format[35][23] = 119; GB2312format[20][86] = 118;</div><div class="line">		 * GB2312format[29][53] = 117; GB2312format[23][88] = 116;</div><div class="line">		 * GB2312format[51][87] = 115; GB2312format[54][27] = 114;</div><div class="line">		 * GB2312format[44][36] = 113; GB2312format[21][45] = 112;</div><div class="line">		 * GB2312format[53][52] = 111; GB2312format[31][53] = 110;</div><div class="line">		 * GB2312format[38][47] = 109; GB2312format[27][21] = 108;</div><div class="line">		 * GB2312format[30][42] = 107; GB2312format[29][10] = 106;</div><div class="line">		 * GB2312format[35][35] = 105; GB2312format[24][56] = 104;</div><div class="line">		 * GB2312format[41][29] = 103; GB2312format[18][68] = 102;</div><div class="line">		 * GB2312format[29][24] = 101; GB2312format[25][84] = 100;</div><div class="line">		 * GB2312format[35][47] = 99; GB2312format[29][56] = 98;</div><div class="line">		 * GB2312format[30][44] = 97; GB2312format[53][3] = 96;</div><div class="line">		 * GB2312format[30][63] = 95; GB2312format[52][52] = 94;</div><div class="line">		 * GB2312format[54][1] = 93; GB2312format[22][48] = 92;</div><div class="line">		 * GB2312format[54][66] = 91; GB2312format[21][90] = 90;</div><div class="line">		 * GB2312format[52][47] = 89; GB2312format[39][25] = 88;</div><div class="line">		 * GB2312format[39][39] = 87; GB2312format[44][37] = 86;</div><div class="line">		 * GB2312format[44][76] = 85; GB2312format[46][75] = 84;</div><div class="line">		 * GB2312format[18][37] = 83; GB2312format[47][42] = 82;</div><div class="line">		 * GB2312format[19][92] = 81; GB2312format[51][27] = 80;</div><div class="line">		 * GB2312format[48][83] = 79; GB2312format[23][70] = 78;</div><div class="line">		 * GB2312format[29][9] = 77; GB2312format[33][79] = 76;</div><div class="line">		 * GB2312format[52][90] = 75; GB2312format[53][6] = 74;</div><div class="line">		 * GB2312format[24][36] = 73; GB2312format[25][25] = 72;</div><div class="line">		 * GB2312format[44][26] = 71; GB2312format[25][36] = 70;</div><div class="line">		 * GB2312format[29][87] = 69; GB2312format[48][0] = 68;</div><div class="line">		 * GB2312format[15][40] = 67; GB2312format[17][45] = 66;</div><div class="line">		 * GB2312format[30][14] = 65; GB2312format[48][38] = 64;</div><div class="line">		 * GB2312format[23][19] = 63; GB2312format[40][42] = 62;</div><div class="line">		 * GB2312format[31][63] = 61; GB2312format[16][23] = 60;</div><div class="line">		 * GB2312format[26][21] = 59; GB2312format[32][76] = 58;</div><div class="line">		 * GB2312format[23][58] = 57; GB2312format[41][37] = 56;</div><div class="line">		 * GB2312format[30][43] = 55; GB2312format[47][38] = 54;</div><div class="line">		 * GB2312format[21][46] = 53; GB2312format[18][33] = 52;</div><div class="line">		 * GB2312format[52][37] = 51; GB2312format[36][8] = 50;</div><div class="line">		 * GB2312format[49][24] = 49; GB2312format[15][66] = 48;</div><div class="line">		 * GB2312format[35][77] = 47; GB2312format[27][58] = 46;</div><div class="line">		 * GB2312format[35][51] = 45; GB2312format[24][69] = 44;</div><div class="line">		 * GB2312format[20][54] = 43; GB2312format[24][41] = 42;</div><div class="line">		 * GB2312format[41][0] = 41; GB2312format[33][71] = 40;</div><div class="line">		 * GB2312format[23][52] = 39; GB2312format[29][67] = 38;</div><div class="line">		 * GB2312format[46][51] = 37; GB2312format[46][90] = 36;</div><div class="line">		 * GB2312format[49][33] = 35; GB2312format[33][28] = 34;</div><div class="line">		 * GB2312format[37][86] = 33; GB2312format[39][22] = 32;</div><div class="line">		 * GB2312format[37][37] = 31; GB2312format[29][62] = 30;</div><div class="line">		 * GB2312format[29][50] = 29; GB2312format[36][89] = 28;</div><div class="line">		 * GB2312format[42][44] = 27; GB2312format[51][82] = 26;</div><div class="line">		 * GB2312format[28][83] = 25; GB2312format[15][78] = 24;</div><div class="line">		 * GB2312format[46][62] = 23; GB2312format[19][69] = 22;</div><div class="line">		 * GB2312format[51][23] = 21; GB2312format[37][69] = 20;</div><div class="line">		 * GB2312format[25][5] = 19; GB2312format[51][85] = 18;</div><div class="line">		 * GB2312format[48][77] = 17; GB2312format[32][46] = 16;</div><div class="line">		 * GB2312format[53][60] = 15; GB2312format[28][57] = 14;</div><div class="line">		 * GB2312format[54][82] = 13; GB2312format[54][15] = 12;</div><div class="line">		 * GB2312format[49][54] = 11; GB2312format[53][87] = 10;</div><div class="line">		 * GB2312format[27][16] = 9; GB2312format[29][34] = 8;</div><div class="line">		 * GB2312format[20][44] = 7; GB2312format[42][73] = 6;</div><div class="line">		 * GB2312format[47][71] = 5; GB2312format[29][37] = 4;</div><div class="line">		 * GB2312format[25][50] = 3; GB2312format[18][84] = 2;</div><div class="line">		 * GB2312format[50][45] = 1; GB2312format[48][46] = 0;</div><div class="line">		 */</div><div class="line">		// GB2312format[43][89] = -1; GB2312format[54][68] = -2;</div><div class="line">		Big5format[9][89] = 600;</div><div class="line">		Big5format[11][15] = 599;</div><div class="line">		Big5format[3][66] = 598;</div><div class="line">		Big5format[6][121] = 597;</div><div class="line">		Big5format[3][0] = 596;</div><div class="line">		Big5format[5][82] = 595;</div><div class="line">		Big5format[3][42] = 594;</div><div class="line">		Big5format[5][34] = 593;</div><div class="line">		Big5format[3][8] = 592;</div><div class="line">		Big5format[3][6] = 591;</div><div class="line">		Big5format[3][67] = 590;</div><div class="line">		Big5format[7][139] = 589;</div><div class="line">		Big5format[23][137] = 588;</div><div class="line">		Big5format[12][46] = 587;</div><div class="line">		Big5format[4][8] = 586;</div><div class="line">		Big5format[4][41] = 585;</div><div class="line">		Big5format[18][47] = 584;</div><div class="line">		Big5format[12][114] = 583;</div><div class="line">		Big5format[6][1] = 582;</div><div class="line">		Big5format[22][60] = 581;</div><div class="line">		Big5format[5][46] = 580;</div><div class="line">		Big5format[11][79] = 579;</div><div class="line">		Big5format[3][23] = 578;</div><div class="line">		Big5format[7][114] = 577;</div><div class="line">		Big5format[29][102] = 576;</div><div class="line">		Big5format[19][14] = 575;</div><div class="line">		Big5format[4][133] = 574;</div><div class="line">		Big5format[3][29] = 573;</div><div class="line">		Big5format[4][109] = 572;</div><div class="line">		Big5format[14][127] = 571;</div><div class="line">		Big5format[5][48] = 570;</div><div class="line">		Big5format[13][104] = 569;</div><div class="line">		Big5format[3][132] = 568;</div><div class="line">		Big5format[26][64] = 567;</div><div class="line">		Big5format[7][19] = 566;</div><div class="line">		Big5format[4][12] = 565;</div><div class="line">		Big5format[11][124] = 564;</div><div class="line">		Big5format[7][89] = 563;</div><div class="line">		Big5format[15][124] = 562;</div><div class="line">		Big5format[4][108] = 561;</div><div class="line">		Big5format[19][66] = 560;</div><div class="line">		Big5format[3][21] = 559;</div><div class="line">		Big5format[24][12] = 558;</div><div class="line">		Big5format[28][111] = 557;</div><div class="line">		Big5format[12][107] = 556;</div><div class="line">		Big5format[3][112] = 555;</div><div class="line">		Big5format[8][113] = 554;</div><div class="line">		Big5format[5][40] = 553;</div><div class="line">		Big5format[26][145] = 552;</div><div class="line">		Big5format[3][48] = 551;</div><div class="line">		Big5format[3][70] = 550;</div><div class="line">		Big5format[22][17] = 549;</div><div class="line">		Big5format[16][47] = 548;</div><div class="line">		Big5format[3][53] = 547;</div><div class="line">		Big5format[4][24] = 546;</div><div class="line">		Big5format[32][120] = 545;</div><div class="line">		Big5format[24][49] = 544;</div><div class="line">		Big5format[24][142] = 543;</div><div class="line">		Big5format[18][66] = 542;</div><div class="line">		Big5format[29][150] = 541;</div><div class="line">		Big5format[5][122] = 540;</div><div class="line">		Big5format[5][114] = 539;</div><div class="line">		Big5format[3][44] = 538;</div><div class="line">		Big5format[10][128] = 537;</div><div class="line">		Big5format[15][20] = 536;</div><div class="line">		Big5format[13][33] = 535;</div><div class="line">		Big5format[14][87] = 534;</div><div class="line">		Big5format[3][126] = 533;</div><div class="line">		Big5format[4][53] = 532;</div><div class="line">		Big5format[4][40] = 531;</div><div class="line">		Big5format[9][93] = 530;</div><div class="line">		Big5format[15][137] = 529;</div><div class="line">		Big5format[10][123] = 528;</div><div class="line">		Big5format[4][56] = 527;</div><div class="line">		Big5format[5][71] = 526;</div><div class="line">		Big5format[10][8] = 525;</div><div class="line">		Big5format[5][16] = 524;</div><div class="line">		Big5format[5][146] = 523;</div><div class="line">		Big5format[18][88] = 522;</div><div class="line">		Big5format[24][4] = 521;</div><div class="line">		Big5format[20][47] = 520;</div><div class="line">		Big5format[5][33] = 519;</div><div class="line">		Big5format[9][43] = 518;</div><div class="line">		Big5format[20][12] = 517;</div><div class="line">		Big5format[20][13] = 516;</div><div class="line">		Big5format[5][156] = 515;</div><div class="line">		Big5format[22][140] = 514;</div><div class="line">		Big5format[8][146] = 513;</div><div class="line">		Big5format[21][123] = 512;</div><div class="line">		Big5format[4][90] = 511;</div><div class="line">		Big5format[5][62] = 510;</div><div class="line">		Big5format[17][59] = 509;</div><div class="line">		Big5format[10][37] = 508;</div><div class="line">		Big5format[18][107] = 507;</div><div class="line">		Big5format[14][53] = 506;</div><div class="line">		Big5format[22][51] = 505;</div><div class="line">		Big5format[8][13] = 504;</div><div class="line">		Big5format[5][29] = 503;</div><div class="line">		Big5format[9][7] = 502;</div><div class="line">		Big5format[22][14] = 501;</div><div class="line">		Big5format[8][55] = 500;</div><div class="line">		Big5format[33][9] = 499;</div><div class="line">		Big5format[16][64] = 498;</div><div class="line">		Big5format[7][131] = 497;</div><div class="line">		Big5format[34][4] = 496;</div><div class="line">		Big5format[7][101] = 495;</div><div class="line">		Big5format[11][139] = 494;</div><div class="line">		Big5format[3][135] = 493;</div><div class="line">		Big5format[7][102] = 492;</div><div class="line">		Big5format[17][13] = 491;</div><div class="line">		Big5format[3][20] = 490;</div><div class="line">		Big5format[27][106] = 489;</div><div class="line">		Big5format[5][88] = 488;</div><div class="line">		Big5format[6][33] = 487;</div><div class="line">		Big5format[5][139] = 486;</div><div class="line">		Big5format[6][0] = 485;</div><div class="line">		Big5format[17][58] = 484;</div><div class="line">		Big5format[5][133] = 483;</div><div class="line">		Big5format[9][107] = 482;</div><div class="line">		Big5format[23][39] = 481;</div><div class="line">		Big5format[5][23] = 480;</div><div class="line">		Big5format[3][79] = 479;</div><div class="line">		Big5format[32][97] = 478;</div><div class="line">		Big5format[3][136] = 477;</div><div class="line">		Big5format[4][94] = 476;</div><div class="line">		Big5format[21][61] = 475;</div><div class="line">		Big5format[23][123] = 474;</div><div class="line">		Big5format[26][16] = 473;</div><div class="line">		Big5format[24][137] = 472;</div><div class="line">		Big5format[22][18] = 471;</div><div class="line">		Big5format[5][1] = 470;</div><div class="line">		Big5format[20][119] = 469;</div><div class="line">		Big5format[3][7] = 468;</div><div class="line">		Big5format[10][79] = 467;</div><div class="line">		Big5format[15][105] = 466;</div><div class="line">		Big5format[3][144] = 465;</div><div class="line">		Big5format[12][80] = 464;</div><div class="line">		Big5format[15][73] = 463;</div><div class="line">		Big5format[3][19] = 462;</div><div class="line">		Big5format[8][109] = 461;</div><div class="line">		Big5format[3][15] = 460;</div><div class="line">		Big5format[31][82] = 459;</div><div class="line">		Big5format[3][43] = 458;</div><div class="line">		Big5format[25][119] = 457;</div><div class="line">		Big5format[16][111] = 456;</div><div class="line">		Big5format[7][77] = 455;</div><div class="line">		Big5format[3][95] = 454;</div><div class="line">		Big5format[24][82] = 453;</div><div class="line">		Big5format[7][52] = 452;</div><div class="line">		Big5format[9][151] = 451;</div><div class="line">		Big5format[3][129] = 450;</div><div class="line">		Big5format[5][87] = 449;</div><div class="line">		Big5format[3][55] = 448;</div><div class="line">		Big5format[8][153] = 447;</div><div class="line">		Big5format[4][83] = 446;</div><div class="line">		Big5format[3][114] = 445;</div><div class="line">		Big5format[23][147] = 444;</div><div class="line">		Big5format[15][31] = 443;</div><div class="line">		Big5format[3][54] = 442;</div><div class="line">		Big5format[11][122] = 441;</div><div class="line">		Big5format[4][4] = 440;</div><div class="line">		Big5format[34][149] = 439;</div><div class="line">		Big5format[3][17] = 438;</div><div class="line">		Big5format[21][64] = 437;</div><div class="line">		Big5format[26][144] = 436;</div><div class="line">		Big5format[4][62] = 435;</div><div class="line">		Big5format[8][15] = 434;</div><div class="line">		Big5format[35][80] = 433;</div><div class="line">		Big5format[7][110] = 432;</div><div class="line">		Big5format[23][114] = 431;</div><div class="line">		Big5format[3][108] = 430;</div><div class="line">		Big5format[3][62] = 429;</div><div class="line">		Big5format[21][41] = 428;</div><div class="line">		Big5format[15][99] = 427;</div><div class="line">		Big5format[5][47] = 426;</div><div class="line">		Big5format[4][96] = 425;</div><div class="line">		Big5format[20][122] = 424;</div><div class="line">		Big5format[5][21] = 423;</div><div class="line">		Big5format[4][157] = 422;</div><div class="line">		Big5format[16][14] = 421;</div><div class="line">		Big5format[3][117] = 420;</div><div class="line">		Big5format[7][129] = 419;</div><div class="line">		Big5format[4][27] = 418;</div><div class="line">		Big5format[5][30] = 417;</div><div class="line">		Big5format[22][16] = 416;</div><div class="line">		Big5format[5][64] = 415;</div><div class="line">		Big5format[17][99] = 414;</div><div class="line">		Big5format[17][57] = 413;</div><div class="line">		Big5format[8][105] = 412;</div><div class="line">		Big5format[5][112] = 411;</div><div class="line">		Big5format[20][59] = 410;</div><div class="line">		Big5format[6][129] = 409;</div><div class="line">		Big5format[18][17] = 408;</div><div class="line">		Big5format[3][92] = 407;</div><div class="line">		Big5format[28][118] = 406;</div><div class="line">		Big5format[3][109] = 405;</div><div class="line">		Big5format[31][51] = 404;</div><div class="line">		Big5format[13][116] = 403;</div><div class="line">		Big5format[6][15] = 402;</div><div class="line">		Big5format[36][136] = 401;</div><div class="line">		Big5format[12][74] = 400;</div><div class="line">		Big5format[20][88] = 399;</div><div class="line">		Big5format[36][68] = 398;</div><div class="line">		Big5format[3][147] = 397;</div><div class="line">		Big5format[15][84] = 396;</div><div class="line">		Big5format[16][32] = 395;</div><div class="line">		Big5format[16][58] = 394;</div><div class="line">		Big5format[7][66] = 393;</div><div class="line">		Big5format[23][107] = 392;</div><div class="line">		Big5format[9][6] = 391;</div><div class="line">		Big5format[12][86] = 390;</div><div class="line">		Big5format[23][112] = 389;</div><div class="line">		Big5format[37][23] = 388;</div><div class="line">		Big5format[3][138] = 387;</div><div class="line">		Big5format[20][68] = 386;</div><div class="line">		Big5format[15][116] = 385;</div><div class="line">		Big5format[18][64] = 384;</div><div class="line">		Big5format[12][139] = 383;</div><div class="line">		Big5format[11][155] = 382;</div><div class="line">		Big5format[4][156] = 381;</div><div class="line">		Big5format[12][84] = 380;</div><div class="line">		Big5format[18][49] = 379;</div><div class="line">		Big5format[25][125] = 378;</div><div class="line">		Big5format[25][147] = 377;</div><div class="line">		Big5format[15][110] = 376;</div><div class="line">		Big5format[19][96] = 375;</div><div class="line">		Big5format[30][152] = 374;</div><div class="line">		Big5format[6][31] = 373;</div><div class="line">		Big5format[27][117] = 372;</div><div class="line">		Big5format[3][10] = 371;</div><div class="line">		Big5format[6][131] = 370;</div><div class="line">		Big5format[13][112] = 369;</div><div class="line">		Big5format[36][156] = 368;</div><div class="line">		Big5format[4][60] = 367;</div><div class="line">		Big5format[15][121] = 366;</div><div class="line">		Big5format[4][112] = 365;</div><div class="line">		Big5format[30][142] = 364;</div><div class="line">		Big5format[23][154] = 363;</div><div class="line">		Big5format[27][101] = 362;</div><div class="line">		Big5format[9][140] = 361;</div><div class="line">		Big5format[3][89] = 360;</div><div class="line">		Big5format[18][148] = 359;</div><div class="line">		Big5format[4][69] = 358;</div><div class="line">		Big5format[16][49] = 357;</div><div class="line">		Big5format[6][117] = 356;</div><div class="line">		Big5format[36][55] = 355;</div><div class="line">		Big5format[5][123] = 354;</div><div class="line">		Big5format[4][126] = 353;</div><div class="line">		Big5format[4][119] = 352;</div><div class="line">		Big5format[9][95] = 351;</div><div class="line">		Big5format[5][24] = 350;</div><div class="line">		Big5format[16][133] = 349;</div><div class="line">		Big5format[10][134] = 348;</div><div class="line">		Big5format[26][59] = 347;</div><div class="line">		Big5format[6][41] = 346;</div><div class="line">		Big5format[6][146] = 345;</div><div class="line">		Big5format[19][24] = 344;</div><div class="line">		Big5format[5][113] = 343;</div><div class="line">		Big5format[10][118] = 342;</div><div class="line">		Big5format[34][151] = 341;</div><div class="line">		Big5format[9][72] = 340;</div><div class="line">		Big5format[31][25] = 339;</div><div class="line">		Big5format[18][126] = 338;</div><div class="line">		Big5format[18][28] = 337;</div><div class="line">		Big5format[4][153] = 336;</div><div class="line">		Big5format[3][84] = 335;</div><div class="line">		Big5format[21][18] = 334;</div><div class="line">		Big5format[25][129] = 333;</div><div class="line">		Big5format[6][107] = 332;</div><div class="line">		Big5format[12][25] = 331;</div><div class="line">		Big5format[17][109] = 330;</div><div class="line">		Big5format[7][76] = 329;</div><div class="line">		Big5format[15][15] = 328;</div><div class="line">		Big5format[4][14] = 327;</div><div class="line">		Big5format[23][88] = 326;</div><div class="line">		Big5format[18][2] = 325;</div><div class="line">		Big5format[6][88] = 324;</div><div class="line">		Big5format[16][84] = 323;</div><div class="line">		Big5format[12][48] = 322;</div><div class="line">		Big5format[7][68] = 321;</div><div class="line">		Big5format[5][50] = 320;</div><div class="line">		Big5format[13][54] = 319;</div><div class="line">		Big5format[7][98] = 318;</div><div class="line">		Big5format[11][6] = 317;</div><div class="line">		Big5format[9][80] = 316;</div><div class="line">		Big5format[16][41] = 315;</div><div class="line">		Big5format[7][43] = 314;</div><div class="line">		Big5format[28][117] = 313;</div><div class="line">		Big5format[3][51] = 312;</div><div class="line">		Big5format[7][3] = 311;</div><div class="line">		Big5format[20][81] = 310;</div><div class="line">		Big5format[4][2] = 309;</div><div class="line">		Big5format[11][16] = 308;</div><div class="line">		Big5format[10][4] = 307;</div><div class="line">		Big5format[10][119] = 306;</div><div class="line">		Big5format[6][142] = 305;</div><div class="line">		Big5format[18][51] = 304;</div><div class="line">		Big5format[8][144] = 303;</div><div class="line">		Big5format[10][65] = 302;</div><div class="line">		Big5format[11][64] = 301;</div><div class="line">		Big5format[11][130] = 300;</div><div class="line">		Big5format[9][92] = 299;</div><div class="line">		Big5format[18][29] = 298;</div><div class="line">		Big5format[18][78] = 297;</div><div class="line">		Big5format[18][151] = 296;</div><div class="line">		Big5format[33][127] = 295;</div><div class="line">		Big5format[35][113] = 294;</div><div class="line">		Big5format[10][155] = 293;</div><div class="line">		Big5format[3][76] = 292;</div><div class="line">		Big5format[36][123] = 291;</div><div class="line">		Big5format[13][143] = 290;</div><div class="line">		Big5format[5][135] = 289;</div><div class="line">		Big5format[23][116] = 288;</div><div class="line">		Big5format[6][101] = 287;</div><div class="line">		Big5format[14][74] = 286;</div><div class="line">		Big5format[7][153] = 285;</div><div class="line">		Big5format[3][101] = 284;</div><div class="line">		Big5format[9][74] = 283;</div><div class="line">		Big5format[3][156] = 282;</div><div class="line">		Big5format[4][147] = 281;</div><div class="line">		Big5format[9][12] = 280;</div><div class="line">		Big5format[18][133] = 279;</div><div class="line">		Big5format[4][0] = 278;</div><div class="line">		Big5format[7][155] = 277;</div><div class="line">		Big5format[9][144] = 276;</div><div class="line">		Big5format[23][49] = 275;</div><div class="line">		Big5format[5][89] = 274;</div><div class="line">		Big5format[10][11] = 273;</div><div class="line">		Big5format[3][110] = 272;</div><div class="line">		Big5format[3][40] = 271;</div><div class="line">		Big5format[29][115] = 270;</div><div class="line">		Big5format[9][100] = 269;</div><div class="line">		Big5format[21][67] = 268;</div><div class="line">		Big5format[23][145] = 267;</div><div class="line">		Big5format[10][47] = 266;</div><div class="line">		Big5format[4][31] = 265;</div><div class="line">		Big5format[4][81] = 264;</div><div class="line">		Big5format[22][62] = 263;</div><div class="line">		Big5format[4][28] = 262;</div><div class="line">		Big5format[27][39] = 261;</div><div class="line">		Big5format[27][54] = 260;</div><div class="line">		Big5format[32][46] = 259;</div><div class="line">		Big5format[4][76] = 258;</div><div class="line">		Big5format[26][15] = 257;</div><div class="line">		Big5format[12][154] = 256;</div><div class="line">		Big5format[9][150] = 255;</div><div class="line">		Big5format[15][17] = 254;</div><div class="line">		Big5format[5][129] = 253;</div><div class="line">		Big5format[10][40] = 252;</div><div class="line">		Big5format[13][37] = 251;</div><div class="line">		Big5format[31][104] = 250;</div><div class="line">		Big5format[3][152] = 249;</div><div class="line">		Big5format[5][22] = 248;</div><div class="line">		Big5format[8][48] = 247;</div><div class="line">		Big5format[4][74] = 246;</div><div class="line">		Big5format[6][17] = 245;</div><div class="line">		Big5format[30][82] = 244;</div><div class="line">		Big5format[4][116] = 243;</div><div class="line">		Big5format[16][42] = 242;</div><div class="line">		Big5format[5][55] = 241;</div><div class="line">		Big5format[4][64] = 240;</div><div class="line">		Big5format[14][19] = 239;</div><div class="line">		Big5format[35][82] = 238;</div><div class="line">		Big5format[30][139] = 237;</div><div class="line">		Big5format[26][152] = 236;</div><div class="line">		Big5format[32][32] = 235;</div><div class="line">		Big5format[21][102] = 234;</div><div class="line">		Big5format[10][131] = 233;</div><div class="line">		Big5format[9][128] = 232;</div><div class="line">		Big5format[3][87] = 231;</div><div class="line">		Big5format[4][51] = 230;</div><div class="line">		Big5format[10][15] = 229;</div><div class="line">		Big5format[4][150] = 228;</div><div class="line">		Big5format[7][4] = 227;</div><div class="line">		Big5format[7][51] = 226;</div><div class="line">		Big5format[7][157] = 225;</div><div class="line">		Big5format[4][146] = 224;</div><div class="line">		Big5format[4][91] = 223;</div><div class="line">		Big5format[7][13] = 222;</div><div class="line">		Big5format[17][116] = 221;</div><div class="line">		Big5format[23][21] = 220;</div><div class="line">		Big5format[5][106] = 219;</div><div class="line">		Big5format[14][100] = 218;</div><div class="line">		Big5format[10][152] = 217;</div><div class="line">		Big5format[14][89] = 216;</div><div class="line">		Big5format[6][138] = 215;</div><div class="line">		Big5format[12][157] = 214;</div><div class="line">		Big5format[10][102] = 213;</div><div class="line">		Big5format[19][94] = 212;</div><div class="line">		Big5format[7][74] = 211;</div><div class="line">		Big5format[18][128] = 210;</div><div class="line">		Big5format[27][111] = 209;</div><div class="line">		Big5format[11][57] = 208;</div><div class="line">		Big5format[3][131] = 207;</div><div class="line">		Big5format[30][23] = 206;</div><div class="line">		Big5format[30][126] = 205;</div><div class="line">		Big5format[4][36] = 204;</div><div class="line">		Big5format[26][124] = 203;</div><div class="line">		Big5format[4][19] = 202;</div><div class="line">		Big5format[9][152] = 201;</div><div class="line">	</div><div class="line">		GBKformat[52][132] = 600;</div><div class="line">		GBKformat[73][135] = 599;</div><div class="line">		GBKformat[49][123] = 598;</div><div class="line">		GBKformat[77][146] = 597;</div><div class="line">		GBKformat[81][123] = 596;</div><div class="line">		GBKformat[82][144] = 595;</div><div class="line">		GBKformat[51][179] = 594;</div><div class="line">		GBKformat[83][154] = 593;</div><div class="line">		GBKformat[71][139] = 592;</div><div class="line">		GBKformat[64][139] = 591;</div><div class="line">		GBKformat[85][144] = 590;</div><div class="line">		GBKformat[52][125] = 589;</div><div class="line">		GBKformat[88][25] = 588;</div><div class="line">		GBKformat[81][106] = 587;</div><div class="line">		GBKformat[81][148] = 586;</div><div class="line">		GBKformat[62][137] = 585;</div><div class="line">		GBKformat[94][0] = 584;</div><div class="line">		GBKformat[1][64] = 583;</div><div class="line">		GBKformat[67][163] = 582;</div><div class="line">		GBKformat[20][190] = 581;</div><div class="line">		GBKformat[57][131] = 580;</div><div class="line">		GBKformat[29][169] = 579;</div><div class="line">		GBKformat[72][143] = 578;</div><div class="line">		GBKformat[0][173] = 577;</div><div class="line">		GBKformat[11][23] = 576;</div><div class="line">		GBKformat[61][141] = 575;</div><div class="line">		GBKformat[60][123] = 574;</div><div class="line">		GBKformat[81][114] = 573;</div><div class="line">		GBKformat[82][131] = 572;</div><div class="line">		GBKformat[67][156] = 571;</div><div class="line">		GBKformat[71][167] = 570;</div><div class="line">		GBKformat[20][50] = 569;</div><div class="line">		GBKformat[77][132] = 568;</div><div class="line">		GBKformat[84][38] = 567;</div><div class="line">		GBKformat[26][29] = 566;</div><div class="line">		GBKformat[74][187] = 565;</div><div class="line">		GBKformat[62][116] = 564;</div><div class="line">		GBKformat[67][135] = 563;</div><div class="line">		GBKformat[5][86] = 562;</div><div class="line">		GBKformat[72][186] = 561;</div><div class="line">		GBKformat[75][161] = 560;</div><div class="line">		GBKformat[78][130] = 559;</div><div class="line">		GBKformat[94][30] = 558;</div><div class="line">		GBKformat[84][72] = 557;</div><div class="line">		GBKformat[1][67] = 556;</div><div class="line">		GBKformat[75][172] = 555;</div><div class="line">		GBKformat[74][185] = 554;</div><div class="line">		GBKformat[53][160] = 553;</div><div class="line">		GBKformat[123][14] = 552;</div><div class="line">		GBKformat[79][97] = 551;</div><div class="line">		GBKformat[85][110] = 550;</div><div class="line">		GBKformat[78][171] = 549;</div><div class="line">		GBKformat[52][131] = 548;</div><div class="line">		GBKformat[56][100] = 547;</div><div class="line">		GBKformat[50][182] = 546;</div><div class="line">		GBKformat[94][64] = 545;</div><div class="line">		GBKformat[106][74] = 544;</div><div class="line">		GBKformat[11][102] = 543;</div><div class="line">		GBKformat[53][124] = 542;</div><div class="line">		GBKformat[24][3] = 541;</div><div class="line">		GBKformat[86][148] = 540;</div><div class="line">		GBKformat[53][184] = 539;</div><div class="line">		GBKformat[86][147] = 538;</div><div class="line">		GBKformat[96][161] = 537;</div><div class="line">		GBKformat[82][77] = 536;</div><div class="line">		GBKformat[59][146] = 535;</div><div class="line">		GBKformat[84][126] = 534;</div><div class="line">		GBKformat[79][132] = 533;</div><div class="line">		GBKformat[85][123] = 532;</div><div class="line">		GBKformat[71][101] = 531;</div><div class="line">		GBKformat[85][106] = 530;</div><div class="line">		GBKformat[6][184] = 529;</div><div class="line">		GBKformat[57][156] = 528;</div><div class="line">		GBKformat[75][104] = 527;</div><div class="line">		GBKformat[50][137] = 526;</div><div class="line">		GBKformat[79][133] = 525;</div><div class="line">		GBKformat[76][108] = 524;</div><div class="line">		GBKformat[57][142] = 523;</div><div class="line">		GBKformat[84][130] = 522;</div><div class="line">		GBKformat[52][128] = 521;</div><div class="line">		GBKformat[47][44] = 520;</div><div class="line">		GBKformat[52][152] = 519;</div><div class="line">		GBKformat[54][104] = 518;</div><div class="line">		GBKformat[30][47] = 517;</div><div class="line">		GBKformat[71][123] = 516;</div><div class="line">		GBKformat[52][107] = 515;</div><div class="line">		GBKformat[45][84] = 514;</div><div class="line">		GBKformat[107][118] = 513;</div><div class="line">		GBKformat[5][161] = 512;</div><div class="line">		GBKformat[48][126] = 511;</div><div class="line">		GBKformat[67][170] = 510;</div><div class="line">		GBKformat[43][6] = 509;</div><div class="line">		GBKformat[70][112] = 508;</div><div class="line">		GBKformat[86][174] = 507;</div><div class="line">		GBKformat[84][166] = 506;</div><div class="line">		GBKformat[79][130] = 505;</div><div class="line">		GBKformat[57][141] = 504;</div><div class="line">		GBKformat[81][178] = 503;</div><div class="line">		GBKformat[56][187] = 502;</div><div class="line">		GBKformat[81][162] = 501;</div><div class="line">		GBKformat[53][104] = 500;</div><div class="line">		GBKformat[123][35] = 499;</div><div class="line">		GBKformat[70][169] = 498;</div><div class="line">		GBKformat[69][164] = 497;</div><div class="line">		GBKformat[109][61] = 496;</div><div class="line">		GBKformat[73][130] = 495;</div><div class="line">		GBKformat[62][134] = 494;</div><div class="line">		GBKformat[54][125] = 493;</div><div class="line">		GBKformat[79][105] = 492;</div><div class="line">		GBKformat[70][165] = 491;</div><div class="line">		GBKformat[71][189] = 490;</div><div class="line">		GBKformat[23][147] = 489;</div><div class="line">		GBKformat[51][139] = 488;</div><div class="line">		GBKformat[47][137] = 487;</div><div class="line">		GBKformat[77][123] = 486;</div><div class="line">		GBKformat[86][183] = 485;</div><div class="line">		GBKformat[63][173] = 484;</div><div class="line">		GBKformat[79][144] = 483;</div><div class="line">		GBKformat[84][159] = 482;</div><div class="line">		GBKformat[60][91] = 481;</div><div class="line">		GBKformat[66][187] = 480;</div><div class="line">		GBKformat[73][114] = 479;</div><div class="line">		GBKformat[85][56] = 478;</div><div class="line">		GBKformat[71][149] = 477;</div><div class="line">		GBKformat[84][189] = 476;</div><div class="line">		GBKformat[104][31] = 475;</div><div class="line">		GBKformat[83][82] = 474;</div><div class="line">		GBKformat[68][35] = 473;</div><div class="line">		GBKformat[11][77] = 472;</div><div class="line">		GBKformat[15][155] = 471;</div><div class="line">		GBKformat[83][153] = 470;</div><div class="line">		GBKformat[71][1] = 469;</div><div class="line">		GBKformat[53][190] = 468;</div><div class="line">		GBKformat[50][135] = 467;</div><div class="line">		GBKformat[3][147] = 466;</div><div class="line">		GBKformat[48][136] = 465;</div><div class="line">		GBKformat[66][166] = 464;</div><div class="line">		GBKformat[55][159] = 463;</div><div class="line">		GBKformat[82][150] = 462;</div><div class="line">		GBKformat[58][178] = 461;</div><div class="line">		GBKformat[64][102] = 460;</div><div class="line">		GBKformat[16][106] = 459;</div><div class="line">		GBKformat[68][110] = 458;</div><div class="line">		GBKformat[54][14] = 457;</div><div class="line">		GBKformat[60][140] = 456;</div><div class="line">		GBKformat[91][71] = 455;</div><div class="line">		GBKformat[54][150] = 454;</div><div class="line">		GBKformat[78][177] = 453;</div><div class="line">		GBKformat[78][117] = 452;</div><div class="line">		GBKformat[104][12] = 451;</div><div class="line">		GBKformat[73][150] = 450;</div><div class="line">		GBKformat[51][142] = 449;</div><div class="line">		GBKformat[81][145] = 448;</div><div class="line">		GBKformat[66][183] = 447;</div><div class="line">		GBKformat[51][178] = 446;</div><div class="line">		GBKformat[75][107] = 445;</div><div class="line">		GBKformat[65][119] = 444;</div><div class="line">		GBKformat[69][176] = 443;</div><div class="line">		GBKformat[59][122] = 442;</div><div class="line">		GBKformat[78][160] = 441;</div><div class="line">		GBKformat[85][183] = 440;</div><div class="line">		GBKformat[105][16] = 439;</div><div class="line">		GBKformat[73][110] = 438;</div><div class="line">		GBKformat[104][39] = 437;</div><div class="line">		GBKformat[119][16] = 436;</div><div class="line">		GBKformat[76][162] = 435;</div><div class="line">		GBKformat[67][152] = 434;</div><div class="line">		GBKformat[82][24] = 433;</div><div class="line">		GBKformat[73][121] = 432;</div><div class="line">		GBKformat[83][83] = 431;</div><div class="line">		GBKformat[82][145] = 430;</div><div class="line">		GBKformat[49][133] = 429;</div><div class="line">		GBKformat[94][13] = 428;</div><div class="line">		GBKformat[58][139] = 427;</div><div class="line">		GBKformat[74][189] = 426;</div><div class="line">		GBKformat[66][177] = 425;</div><div class="line">		GBKformat[85][184] = 424;</div><div class="line">		GBKformat[55][183] = 423;</div><div class="line">		GBKformat[71][107] = 422;</div><div class="line">		GBKformat[11][98] = 421;</div><div class="line">		GBKformat[72][153] = 420;</div><div class="line">		GBKformat[2][137] = 419;</div><div class="line">		GBKformat[59][147] = 418;</div><div class="line">		GBKformat[58][152] = 417;</div><div class="line">		GBKformat[55][144] = 416;</div><div class="line">		GBKformat[73][125] = 415;</div><div class="line">		GBKformat[52][154] = 414;</div><div class="line">		GBKformat[70][178] = 413;</div><div class="line">		GBKformat[79][148] = 412;</div><div class="line">		GBKformat[63][143] = 411;</div><div class="line">		GBKformat[50][140] = 410;</div><div class="line">		GBKformat[47][145] = 409;</div><div class="line">		GBKformat[48][123] = 408;</div><div class="line">		GBKformat[56][107] = 407;</div><div class="line">		GBKformat[84][83] = 406;</div><div class="line">		GBKformat[59][112] = 405;</div><div class="line">		GBKformat[124][72] = 404;</div><div class="line">		GBKformat[79][99] = 403;</div><div class="line">		GBKformat[3][37] = 402;</div><div class="line">		GBKformat[114][55] = 401;</div><div class="line">		GBKformat[85][152] = 400;</div><div class="line">		GBKformat[60][47] = 399;</div><div class="line">		GBKformat[65][96] = 398;</div><div class="line">		GBKformat[74][110] = 397;</div><div class="line">		GBKformat[86][182] = 396;</div><div class="line">		GBKformat[50][99] = 395;</div><div class="line">		GBKformat[67][186] = 394;</div><div class="line">		GBKformat[81][74] = 393;</div><div class="line">		GBKformat[80][37] = 392;</div><div class="line">		GBKformat[21][60] = 391;</div><div class="line">		GBKformat[110][12] = 390;</div><div class="line">		GBKformat[60][162] = 389;</div><div class="line">		GBKformat[29][115] = 388;</div><div class="line">		GBKformat[83][130] = 387;</div><div class="line">		GBKformat[52][136] = 386;</div><div class="line">		GBKformat[63][114] = 385;</div><div class="line">		GBKformat[49][127] = 384;</div><div class="line">		GBKformat[83][109] = 383;</div><div class="line">		GBKformat[66][128] = 382;</div><div class="line">		GBKformat[78][136] = 381;</div><div class="line">		GBKformat[81][180] = 380;</div><div class="line">		GBKformat[76][104] = 379;</div><div class="line">		GBKformat[56][156] = 378;</div><div class="line">		GBKformat[61][23] = 377;</div><div class="line">		GBKformat[4][30] = 376;</div><div class="line">		GBKformat[69][154] = 375;</div><div class="line">		GBKformat[100][37] = 374;</div><div class="line">		GBKformat[54][177] = 373;</div><div class="line">		GBKformat[23][119] = 372;</div><div class="line">		GBKformat[71][171] = 371;</div><div class="line">		GBKformat[84][146] = 370;</div><div class="line">		GBKformat[20][184] = 369;</div><div class="line">		GBKformat[86][76] = 368;</div><div class="line">		GBKformat[74][132] = 367;</div><div class="line">		GBKformat[47][97] = 366;</div><div class="line">		GBKformat[82][137] = 365;</div><div class="line">		GBKformat[94][56] = 364;</div><div class="line">		GBKformat[92][30] = 363;</div><div class="line">		GBKformat[19][117] = 362;</div><div class="line">		GBKformat[48][173] = 361;</div><div class="line">		GBKformat[2][136] = 360;</div><div class="line">		GBKformat[7][182] = 359;</div><div class="line">		GBKformat[74][188] = 358;</div><div class="line">		GBKformat[14][132] = 357;</div><div class="line">		GBKformat[62][172] = 356;</div><div class="line">		GBKformat[25][39] = 355;</div><div class="line">		GBKformat[85][129] = 354;</div><div class="line">		GBKformat[64][98] = 353;</div><div class="line">		GBKformat[67][127] = 352;</div><div class="line">		GBKformat[72][167] = 351;</div><div class="line">		GBKformat[57][143] = 350;</div><div class="line">		GBKformat[76][187] = 349;</div><div class="line">		GBKformat[83][181] = 348;</div><div class="line">		GBKformat[84][10] = 347;</div><div class="line">		GBKformat[55][166] = 346;</div><div class="line">		GBKformat[55][188] = 345;</div><div class="line">		GBKformat[13][151] = 344;</div><div class="line">		GBKformat[62][124] = 343;</div><div class="line">		GBKformat[53][136] = 342;</div><div class="line">		GBKformat[106][57] = 341;</div><div class="line">		GBKformat[47][166] = 340;</div><div class="line">		GBKformat[109][30] = 339;</div><div class="line">		GBKformat[78][114] = 338;</div><div class="line">		GBKformat[83][19] = 337;</div><div class="line">		GBKformat[56][162] = 336;</div><div class="line">		GBKformat[60][177] = 335;</div><div class="line">		GBKformat[88][9] = 334;</div><div class="line">		GBKformat[74][163] = 333;</div><div class="line">		GBKformat[52][156] = 332;</div><div class="line">		GBKformat[71][180] = 331;</div><div class="line">		GBKformat[60][57] = 330;</div><div class="line">		GBKformat[72][173] = 329;</div><div class="line">		GBKformat[82][91] = 328;</div><div class="line">		GBKformat[51][186] = 327;</div><div class="line">		GBKformat[75][86] = 326;</div><div class="line">		GBKformat[75][78] = 325;</div><div class="line">		GBKformat[76][170] = 324;</div><div class="line">		GBKformat[60][147] = 323;</div><div class="line">		GBKformat[82][75] = 322;</div><div class="line">		GBKformat[80][148] = 321;</div><div class="line">		GBKformat[86][150] = 320;</div><div class="line">		GBKformat[13][95] = 319;</div><div class="line">		GBKformat[0][11] = 318;</div><div class="line">		GBKformat[84][190] = 317;</div><div class="line">		GBKformat[76][166] = 316;</div><div class="line">		GBKformat[14][72] = 315;</div><div class="line">		GBKformat[67][144] = 314;</div><div class="line">		GBKformat[84][44] = 313;</div><div class="line">		GBKformat[72][125] = 312;</div><div class="line">		GBKformat[66][127] = 311;</div><div class="line">		GBKformat[60][25] = 310;</div><div class="line">		GBKformat[70][146] = 309;</div><div class="line">		GBKformat[79][135] = 308;</div><div class="line">		GBKformat[54][135] = 307;</div><div class="line">		GBKformat[60][104] = 306;</div><div class="line">		GBKformat[55][132] = 305;</div><div class="line">		GBKformat[94][2] = 304;</div><div class="line">		GBKformat[54][133] = 303;</div><div class="line">		GBKformat[56][190] = 302;</div><div class="line">		GBKformat[58][174] = 301;</div><div class="line">		GBKformat[80][144] = 300;</div><div class="line">		GBKformat[85][113] = 299;</div><div class="line">		EUC_KRformat[31][43] = 600;</div><div class="line">		EUC_KRformat[19][56] = 599;</div><div class="line">		EUC_KRformat[38][46] = 598;</div><div class="line">		EUC_KRformat[3][3] = 597;</div><div class="line">		EUC_KRformat[29][77] = 596;</div><div class="line">		EUC_KRformat[19][33] = 595;</div><div class="line">		EUC_KRformat[30][0] = 594;</div><div class="line">		EUC_KRformat[29][89] = 593;</div><div class="line">		EUC_KRformat[31][26] = 592;</div><div class="line">		EUC_KRformat[31][38] = 591;</div><div class="line">		EUC_KRformat[32][85] = 590;</div><div class="line">		EUC_KRformat[15][0] = 589;</div><div class="line">		EUC_KRformat[16][54] = 588;</div><div class="line">		EUC_KRformat[15][76] = 587;</div><div class="line">		EUC_KRformat[31][25] = 586;</div><div class="line">		EUC_KRformat[23][13] = 585;</div><div class="line">		EUC_KRformat[28][34] = 584;</div><div class="line">		EUC_KRformat[18][9] = 583;</div><div class="line">		EUC_KRformat[29][37] = 582;</div><div class="line">		EUC_KRformat[22][45] = 581;</div><div class="line">		EUC_KRformat[19][46] = 580;</div><div class="line">		EUC_KRformat[16][65] = 579;</div><div class="line">		EUC_KRformat[23][5] = 578;</div><div class="line">		EUC_KRformat[26][70] = 577;</div><div class="line">		EUC_KRformat[31][53] = 576;</div><div class="line">		EUC_KRformat[27][12] = 575;</div><div class="line">		EUC_KRformat[30][67] = 574;</div><div class="line">		EUC_KRformat[31][57] = 573;</div><div class="line">		EUC_KRformat[20][20] = 572;</div><div class="line">		EUC_KRformat[30][31] = 571;</div><div class="line">		EUC_KRformat[20][72] = 570;</div><div class="line">		EUC_KRformat[15][51] = 569;</div><div class="line">		EUC_KRformat[3][8] = 568;</div><div class="line">		EUC_KRformat[32][53] = 567;</div><div class="line">		EUC_KRformat[27][85] = 566;</div><div class="line">		EUC_KRformat[25][23] = 565;</div><div class="line">		EUC_KRformat[15][44] = 564;</div><div class="line">		EUC_KRformat[32][3] = 563;</div><div class="line">		EUC_KRformat[31][68] = 562;</div><div class="line">		EUC_KRformat[30][24] = 561;</div><div class="line">		EUC_KRformat[29][49] = 560;</div><div class="line">		EUC_KRformat[27][49] = 559;</div><div class="line">		EUC_KRformat[23][23] = 558;</div><div class="line">		EUC_KRformat[31][91] = 557;</div><div class="line">		EUC_KRformat[31][46] = 556;</div><div class="line">		EUC_KRformat[19][74] = 555;</div><div class="line">		EUC_KRformat[27][27] = 554;</div><div class="line">		EUC_KRformat[3][17] = 553;</div><div class="line">		EUC_KRformat[20][38] = 552;</div><div class="line">		EUC_KRformat[21][82] = 551;</div><div class="line">		EUC_KRformat[28][25] = 550;</div><div class="line">		EUC_KRformat[32][5] = 549;</div><div class="line">		EUC_KRformat[31][23] = 548;</div><div class="line">		EUC_KRformat[25][45] = 547;</div><div class="line">		EUC_KRformat[32][87] = 546;</div><div class="line">		EUC_KRformat[18][26] = 545;</div><div class="line">		EUC_KRformat[24][10] = 544;</div><div class="line">		EUC_KRformat[26][82] = 543;</div><div class="line">		EUC_KRformat[15][89] = 542;</div><div class="line">		EUC_KRformat[28][36] = 541;</div><div class="line">		EUC_KRformat[28][31] = 540;</div><div class="line">		EUC_KRformat[16][23] = 539;</div><div class="line">		EUC_KRformat[16][77] = 538;</div><div class="line">		EUC_KRformat[19][84] = 537;</div><div class="line">		EUC_KRformat[23][72] = 536;</div><div class="line">		EUC_KRformat[38][48] = 535;</div><div class="line">		EUC_KRformat[23][2] = 534;</div><div class="line">		EUC_KRformat[30][20] = 533;</div><div class="line">		EUC_KRformat[38][47] = 532;</div><div class="line">		EUC_KRformat[39][12] = 531;</div><div class="line">		EUC_KRformat[23][21] = 530;</div><div class="line">		EUC_KRformat[18][17] = 529;</div><div class="line">		EUC_KRformat[30][87] = 528;</div><div class="line">		EUC_KRformat[29][62] = 527;</div><div class="line">		EUC_KRformat[29][87] = 526;</div><div class="line">		EUC_KRformat[34][53] = 525;</div><div class="line">		EUC_KRformat[32][29] = 524;</div><div class="line">		EUC_KRformat[35][0] = 523;</div><div class="line">		EUC_KRformat[24][43] = 522;</div><div class="line">		EUC_KRformat[36][44] = 521;</div><div class="line">		EUC_KRformat[20][30] = 520;</div><div class="line">		EUC_KRformat[39][86] = 519;</div><div class="line">		EUC_KRformat[22][14] = 518;</div><div class="line">		EUC_KRformat[29][39] = 517;</div><div class="line">		EUC_KRformat[28][38] = 516;</div><div class="line">		EUC_KRformat[23][79] = 515;</div><div class="line">		EUC_KRformat[24][56] = 514;</div><div class="line">		EUC_KRformat[29][63] = 513;</div><div class="line">		EUC_KRformat[31][45] = 512;</div><div class="line">		EUC_KRformat[23][26] = 511;</div><div class="line">		EUC_KRformat[15][87] = 510;</div><div class="line">		EUC_KRformat[30][74] = 509;</div><div class="line">		EUC_KRformat[24][69] = 508;</div><div class="line">		EUC_KRformat[20][4] = 507;</div><div class="line">		EUC_KRformat[27][50] = 506;</div><div class="line">		EUC_KRformat[30][75] = 505;</div><div class="line">		EUC_KRformat[24][13] = 504;</div><div class="line">		EUC_KRformat[30][8] = 503;</div><div class="line">		EUC_KRformat[31][6] = 502;</div><div class="line">		EUC_KRformat[25][80] = 501;</div><div class="line">		EUC_KRformat[36][8] = 500;</div><div class="line">		EUC_KRformat[15][18] = 499;</div><div class="line">		EUC_KRformat[39][23] = 498;</div><div class="line">		EUC_KRformat[16][24] = 497;</div><div class="line">		EUC_KRformat[31][89] = 496;</div><div class="line">		EUC_KRformat[15][71] = 495;</div><div class="line">		EUC_KRformat[15][57] = 494;</div><div class="line">		EUC_KRformat[30][11] = 493;</div><div class="line">		EUC_KRformat[15][36] = 492;</div><div class="line">		EUC_KRformat[16][60] = 491;</div><div class="line">		EUC_KRformat[24][45] = 490;</div><div class="line">		EUC_KRformat[37][35] = 489;</div><div class="line">		EUC_KRformat[24][87] = 488;</div><div class="line">		EUC_KRformat[20][45] = 487;</div><div class="line">		EUC_KRformat[31][90] = 486;</div><div class="line">		EUC_KRformat[32][21] = 485;</div><div class="line">		EUC_KRformat[19][70] = 484;</div><div class="line">		EUC_KRformat[24][15] = 483;</div><div class="line">		EUC_KRformat[26][92] = 482;</div><div class="line">		EUC_KRformat[37][13] = 481;</div><div class="line">		EUC_KRformat[39][2] = 480;</div><div class="line">		EUC_KRformat[23][70] = 479;</div><div class="line">		EUC_KRformat[27][25] = 478;</div><div class="line">		EUC_KRformat[15][69] = 477;</div><div class="line">		EUC_KRformat[19][61] = 476;</div><div class="line">		EUC_KRformat[31][58] = 475;</div><div class="line">		EUC_KRformat[24][57] = 474;</div><div class="line">		EUC_KRformat[36][74] = 473;</div><div class="line">		EUC_KRformat[21][6] = 472;</div><div class="line">		EUC_KRformat[30][44] = 471;</div><div class="line">		EUC_KRformat[15][91] = 470;</div><div class="line">		EUC_KRformat[27][16] = 469;</div><div class="line">		EUC_KRformat[29][42] = 468;</div><div class="line">		EUC_KRformat[33][86] = 467;</div><div class="line">		EUC_KRformat[29][41] = 466;</div><div class="line">		EUC_KRformat[20][68] = 465;</div><div class="line">		EUC_KRformat[25][47] = 464;</div><div class="line">		EUC_KRformat[22][0] = 463;</div><div class="line">		EUC_KRformat[18][14] = 462;</div><div class="line">		EUC_KRformat[31][28] = 461;</div><div class="line">		EUC_KRformat[15][2] = 460;</div><div class="line">		EUC_KRformat[23][76] = 459;</div><div class="line">		EUC_KRformat[38][32] = 458;</div><div class="line">		EUC_KRformat[29][82] = 457;</div><div class="line">		EUC_KRformat[21][86] = 456;</div><div class="line">		EUC_KRformat[24][62] = 455;</div><div class="line">		EUC_KRformat[31][64] = 454;</div><div class="line">		EUC_KRformat[38][26] = 453;</div><div class="line">		EUC_KRformat[32][86] = 452;</div><div class="line">		EUC_KRformat[22][32] = 451;</div><div class="line">		EUC_KRformat[19][59] = 450;</div><div class="line">		EUC_KRformat[34][18] = 449;</div><div class="line">		EUC_KRformat[18][54] = 448;</div><div class="line">		EUC_KRformat[38][63] = 447;</div><div class="line">		EUC_KRformat[36][23] = 446;</div><div class="line">		EUC_KRformat[35][35] = 445;</div><div class="line">		EUC_KRformat[32][62] = 444;</div><div class="line">		EUC_KRformat[28][35] = 443;</div><div class="line">		EUC_KRformat[27][13] = 442;</div><div class="line">		EUC_KRformat[31][59] = 441;</div><div class="line">		EUC_KRformat[29][29] = 440;</div><div class="line">		EUC_KRformat[15][64] = 439;</div><div class="line">		EUC_KRformat[26][84] = 438;</div><div class="line">		EUC_KRformat[21][90] = 437;</div><div class="line">		EUC_KRformat[20][24] = 436;</div><div class="line">		EUC_KRformat[16][18] = 435;</div><div class="line">		EUC_KRformat[22][23] = 434;</div><div class="line">		EUC_KRformat[31][14] = 433;</div><div class="line">		EUC_KRformat[15][1] = 432;</div><div class="line">		EUC_KRformat[18][63] = 431;</div><div class="line">		EUC_KRformat[19][10] = 430;</div><div class="line">		EUC_KRformat[25][49] = 429;</div><div class="line">		EUC_KRformat[36][57] = 428;</div><div class="line">		EUC_KRformat[20][22] = 427;</div><div class="line">		EUC_KRformat[15][15] = 426;</div><div class="line">		EUC_KRformat[31][51] = 425;</div><div class="line">		EUC_KRformat[24][60] = 424;</div><div class="line">		EUC_KRformat[31][70] = 423;</div><div class="line">		EUC_KRformat[15][7] = 422;</div><div class="line">		EUC_KRformat[28][40] = 421;</div><div class="line">		EUC_KRformat[18][41] = 420;</div><div class="line">		EUC_KRformat[15][38] = 419;</div><div class="line">		EUC_KRformat[32][0] = 418;</div><div class="line">		EUC_KRformat[19][51] = 417;</div><div class="line">		EUC_KRformat[34][62] = 416;</div><div class="line">		EUC_KRformat[16][27] = 415;</div><div class="line">		EUC_KRformat[20][70] = 414;</div><div class="line">		EUC_KRformat[22][33] = 413;</div><div class="line">		EUC_KRformat[26][73] = 412;</div><div class="line">		EUC_KRformat[20][79] = 411;</div><div class="line">		EUC_KRformat[23][6] = 410;</div><div class="line">		EUC_KRformat[24][85] = 409;</div><div class="line">		EUC_KRformat[38][51] = 408;</div><div class="line">		EUC_KRformat[29][88] = 407;</div><div class="line">		EUC_KRformat[38][55] = 406;</div><div class="line">		EUC_KRformat[32][32] = 405;</div><div class="line">		EUC_KRformat[27][18] = 404;</div><div class="line">		EUC_KRformat[23][87] = 403;</div><div class="line">		EUC_KRformat[35][6] = 402;</div><div class="line">		EUC_KRformat[34][27] = 401;</div><div class="line">		EUC_KRformat[39][35] = 400;</div><div class="line">		EUC_KRformat[30][88] = 399;</div><div class="line">		EUC_KRformat[32][92] = 398;</div><div class="line">		EUC_KRformat[32][49] = 397;</div><div class="line">		EUC_KRformat[24][61] = 396;</div><div class="line">		EUC_KRformat[18][74] = 395;</div><div class="line">		EUC_KRformat[23][77] = 394;</div><div class="line">		EUC_KRformat[23][50] = 393;</div><div class="line">		EUC_KRformat[23][32] = 392;</div><div class="line">		EUC_KRformat[23][36] = 391;</div><div class="line">		EUC_KRformat[38][38] = 390;</div><div class="line">		EUC_KRformat[29][86] = 389;</div><div class="line">		EUC_KRformat[36][15] = 388;</div><div class="line">		EUC_KRformat[31][50] = 387;</div><div class="line">		EUC_KRformat[15][86] = 386;</div><div class="line">		EUC_KRformat[39][13] = 385;</div><div class="line">		EUC_KRformat[34][26] = 384;</div><div class="line">		EUC_KRformat[19][34] = 383;</div><div class="line">		EUC_KRformat[16][3] = 382;</div><div class="line">		EUC_KRformat[26][93] = 381;</div><div class="line">		EUC_KRformat[19][67] = 380;</div><div class="line">		EUC_KRformat[24][72] = 379;</div><div class="line">		EUC_KRformat[29][17] = 378;</div><div class="line">		EUC_KRformat[23][24] = 377;</div><div class="line">		EUC_KRformat[25][19] = 376;</div><div class="line">		EUC_KRformat[18][65] = 375;</div><div class="line">		EUC_KRformat[30][78] = 374;</div><div class="line">		EUC_KRformat[27][52] = 373;</div><div class="line">		EUC_KRformat[22][18] = 372;</div><div class="line">		EUC_KRformat[16][38] = 371;</div><div class="line">		EUC_KRformat[21][26] = 370;</div><div class="line">		EUC_KRformat[34][20] = 369;</div><div class="line">		EUC_KRformat[15][42] = 368;</div><div class="line">		EUC_KRformat[16][71] = 367;</div><div class="line">		EUC_KRformat[17][17] = 366;</div><div class="line">		EUC_KRformat[24][71] = 365;</div><div class="line">		EUC_KRformat[18][84] = 364;</div><div class="line">		EUC_KRformat[15][40] = 363;</div><div class="line">		EUC_KRformat[31][62] = 362;</div><div class="line">		EUC_KRformat[15][8] = 361;</div><div class="line">		EUC_KRformat[16][69] = 360;</div><div class="line">		EUC_KRformat[29][79] = 359;</div><div class="line">		EUC_KRformat[38][91] = 358;</div><div class="line">		EUC_KRformat[31][92] = 357;</div><div class="line">		EUC_KRformat[20][77] = 356;</div><div class="line">		EUC_KRformat[3][16] = 355;</div><div class="line">		EUC_KRformat[27][87] = 354;</div><div class="line">		EUC_KRformat[16][25] = 353;</div><div class="line">		EUC_KRformat[36][33] = 352;</div><div class="line">		EUC_KRformat[37][76] = 351;</div><div class="line">		EUC_KRformat[30][12] = 350;</div><div class="line">		EUC_KRformat[26][75] = 349;</div><div class="line">		EUC_KRformat[25][14] = 348;</div><div class="line">		EUC_KRformat[32][26] = 347;</div><div class="line">		EUC_KRformat[23][22] = 346;</div><div class="line">		EUC_KRformat[20][90] = 345;</div><div class="line">		EUC_KRformat[19][8] = 344;</div><div class="line">		EUC_KRformat[38][41] = 343;</div><div class="line">		EUC_KRformat[34][2] = 342;</div><div class="line">		EUC_KRformat[39][4] = 341;</div><div class="line">		EUC_KRformat[27][89] = 340;</div><div class="line">		EUC_KRformat[28][41] = 339;</div><div class="line">		EUC_KRformat[28][44] = 338;</div><div class="line">		EUC_KRformat[24][92] = 337;</div><div class="line">		EUC_KRformat[34][65] = 336;</div><div class="line">		EUC_KRformat[39][14] = 335;</div><div class="line">		EUC_KRformat[21][38] = 334;</div><div class="line">		EUC_KRformat[19][31] = 333;</div><div class="line">		EUC_KRformat[37][39] = 332;</div><div class="line">		EUC_KRformat[33][41] = 331;</div><div class="line">		EUC_KRformat[38][4] = 330;</div><div class="line">		EUC_KRformat[23][80] = 329;</div><div class="line">		EUC_KRformat[25][24] = 328;</div><div class="line">		EUC_KRformat[37][17] = 327;</div><div class="line">		EUC_KRformat[22][16] = 326;</div><div class="line">		EUC_KRformat[22][46] = 325;</div><div class="line">		EUC_KRformat[33][91] = 324;</div><div class="line">		EUC_KRformat[24][89] = 323;</div><div class="line">		EUC_KRformat[30][52] = 322;</div><div class="line">		EUC_KRformat[29][38] = 321;</div><div class="line">		EUC_KRformat[38][85] = 320;</div><div class="line">		EUC_KRformat[15][12] = 319;</div><div class="line">		EUC_KRformat[27][58] = 318;</div><div class="line">		EUC_KRformat[29][52] = 317;</div><div class="line">		EUC_KRformat[37][38] = 316;</div><div class="line">		EUC_KRformat[34][41] = 315;</div><div class="line">		EUC_KRformat[31][65] = 314;</div><div class="line">		EUC_KRformat[29][53] = 313;</div><div class="line">		EUC_KRformat[22][47] = 312;</div><div class="line">		EUC_KRformat[22][19] = 311;</div><div class="line">		EUC_KRformat[26][0] = 310;</div><div class="line">		EUC_KRformat[37][86] = 309;</div><div class="line">		EUC_KRformat[35][4] = 308;</div><div class="line">		EUC_KRformat[36][54] = 307;</div><div class="line">		EUC_KRformat[20][76] = 306;</div><div class="line">		EUC_KRformat[30][9] = 305;</div><div class="line">		EUC_KRformat[30][33] = 304;</div><div class="line">		EUC_KRformat[23][17] = 303;</div><div class="line">		EUC_KRformat[23][33] = 302;</div><div class="line">		EUC_KRformat[38][52] = 301;</div><div class="line">		EUC_KRformat[15][19] = 300;</div><div class="line">		EUC_KRformat[28][45] = 299;</div><div class="line">		EUC_KRformat[29][78] = 298;</div><div class="line">		EUC_KRformat[23][15] = 297;</div><div class="line">		EUC_KRformat[33][5] = 296;</div><div class="line">		EUC_KRformat[17][40] = 295;</div><div class="line">		EUC_KRformat[30][83] = 294;</div><div class="line">		EUC_KRformat[18][1] = 293;</div><div class="line">		EUC_KRformat[30][81] = 292;</div><div class="line">		EUC_KRformat[19][40] = 291;</div><div class="line">		EUC_KRformat[24][47] = 290;</div><div class="line">		EUC_KRformat[17][56] = 289;</div><div class="line">		EUC_KRformat[39][80] = 288;</div><div class="line">		EUC_KRformat[30][46] = 287;</div><div class="line">		EUC_KRformat[16][61] = 286;</div><div class="line">		EUC_KRformat[26][78] = 285;</div><div class="line">		EUC_KRformat[26][57] = 284;</div><div class="line">		EUC_KRformat[20][46] = 283;</div><div class="line">		EUC_KRformat[25][15] = 282;</div><div class="line">		EUC_KRformat[25][91] = 281;</div><div class="line">		EUC_KRformat[21][83] = 280;</div><div class="line">		EUC_KRformat[30][77] = 279;</div><div class="line">		EUC_KRformat[35][30] = 278;</div><div class="line">		EUC_KRformat[30][34] = 277;</div><div class="line">		EUC_KRformat[20][69] = 276;</div><div class="line">		EUC_KRformat[35][10] = 275;</div><div class="line">		EUC_KRformat[29][70] = 274;</div><div class="line">		EUC_KRformat[22][50] = 273;</div><div class="line">		EUC_KRformat[18][0] = 272;</div><div class="line">		EUC_KRformat[22][64] = 271;</div><div class="line">		EUC_KRformat[38][65] = 270;</div><div class="line">		EUC_KRformat[22][70] = 269;</div><div class="line">		EUC_KRformat[24][58] = 268;</div><div class="line">		EUC_KRformat[19][66] = 267;</div><div class="line">		EUC_KRformat[30][59] = 266;</div><div class="line">		EUC_KRformat[37][14] = 265;</div><div class="line">		EUC_KRformat[16][56] = 264;</div><div class="line">		EUC_KRformat[29][85] = 263;</div><div class="line">		EUC_KRformat[31][15] = 262;</div><div class="line">		EUC_KRformat[36][84] = 261;</div><div class="line">		EUC_KRformat[39][15] = 260;</div><div class="line">		EUC_KRformat[39][90] = 259;</div><div class="line">		EUC_KRformat[18][12] = 258;</div><div class="line">		EUC_KRformat[21][93] = 257;</div><div class="line">		EUC_KRformat[24][66] = 256;</div><div class="line">		EUC_KRformat[27][90] = 255;</div><div class="line">		EUC_KRformat[25][90] = 254;</div><div class="line">		EUC_KRformat[22][24] = 253;</div><div class="line">		EUC_KRformat[36][67] = 252;</div><div class="line">		EUC_KRformat[33][90] = 251;</div><div class="line">		EUC_KRformat[15][60] = 250;</div><div class="line">		EUC_KRformat[23][85] = 249;</div><div class="line">		EUC_KRformat[34][1] = 248;</div><div class="line">		EUC_KRformat[39][37] = 247;</div><div class="line">		EUC_KRformat[21][18] = 246;</div><div class="line">		EUC_KRformat[34][4] = 245;</div><div class="line">		EUC_KRformat[28][33] = 244;</div><div class="line">		EUC_KRformat[15][13] = 243;</div><div class="line">		EUC_KRformat[32][22] = 242;</div><div class="line">		EUC_KRformat[30][76] = 241;</div><div class="line">		EUC_KRformat[20][21] = 240;</div><div class="line">		EUC_KRformat[38][66] = 239;</div><div class="line">		EUC_KRformat[32][55] = 238;</div><div class="line">		EUC_KRformat[32][89] = 237;</div><div class="line">		EUC_KRformat[25][26] = 236;</div><div class="line">		EUC_KRformat[16][80] = 235;</div><div class="line">		EUC_KRformat[15][43] = 234;</div><div class="line">		EUC_KRformat[38][54] = 233;</div><div class="line">		EUC_KRformat[39][68] = 232;</div><div class="line">		EUC_KRformat[22][88] = 231;</div><div class="line">		EUC_KRformat[21][84] = 230;</div><div class="line">		EUC_KRformat[21][17] = 229;</div><div class="line">		EUC_KRformat[20][28] = 228;</div><div class="line">		EUC_KRformat[32][1] = 227;</div><div class="line">		EUC_KRformat[33][87] = 226;</div><div class="line">		EUC_KRformat[38][71] = 225;</div><div class="line">		EUC_KRformat[37][47] = 224;</div><div class="line">		EUC_KRformat[18][77] = 223;</div><div class="line">		EUC_KRformat[37][58] = 222;</div><div class="line">		EUC_KRformat[34][74] = 221;</div><div class="line">		EUC_KRformat[32][54] = 220;</div><div class="line">		EUC_KRformat[27][33] = 219;</div><div class="line">		EUC_KRformat[32][93] = 218;</div><div class="line">		EUC_KRformat[23][51] = 217;</div><div class="line">		EUC_KRformat[20][57] = 216;</div><div class="line">		EUC_KRformat[22][37] = 215;</div><div class="line">		EUC_KRformat[39][10] = 214;</div><div class="line">		EUC_KRformat[39][17] = 213;</div><div class="line">		EUC_KRformat[33][4] = 212;</div><div class="line">		EUC_KRformat[32][84] = 211;</div><div class="line">		EUC_KRformat[34][3] = 210;</div><div class="line">		EUC_KRformat[28][27] = 209;</div><div class="line">		EUC_KRformat[15][79] = 208;</div><div class="line">		EUC_KRformat[34][21] = 207;</div><div class="line">		EUC_KRformat[34][69] = 206;</div><div class="line">		EUC_KRformat[21][62] = 205;</div><div class="line">		EUC_KRformat[36][24] = 204;</div><div class="line">		EUC_KRformat[16][89] = 203;</div><div class="line">		EUC_KRformat[18][48] = 202;</div><div class="line">		EUC_KRformat[38][15] = 201;</div><div class="line">		EUC_KRformat[36][58] = 200;</div><div class="line">		EUC_KRformat[21][56] = 199;</div><div class="line">		EUC_KRformat[34][48] = 198;</div><div class="line">		EUC_KRformat[21][15] = 197;</div><div class="line">		EUC_KRformat[39][3] = 196;</div><div class="line">		EUC_KRformat[16][44] = 195;</div><div class="line">		EUC_KRformat[18][79] = 194;</div><div class="line">		EUC_KRformat[25][13] = 193;</div><div class="line">		EUC_KRformat[29][47] = 192;</div><div class="line">		EUC_KRformat[38][88] = 191;</div><div class="line">		EUC_KRformat[20][71] = 190;</div><div class="line">		EUC_KRformat[16][58] = 189;</div><div class="line">		EUC_KRformat[35][57] = 188;</div><div class="line">		EUC_KRformat[29][30] = 187;</div><div class="line">		EUC_KRformat[29][23] = 186;</div><div class="line">		EUC_KRformat[34][93] = 185;</div><div class="line">		EUC_KRformat[30][85] = 184;</div><div class="line">		EUC_KRformat[15][80] = 183;</div><div class="line">		EUC_KRformat[32][78] = 182;</div><div class="line">		EUC_KRformat[37][82] = 181;</div><div class="line">		EUC_KRformat[22][40] = 180;</div><div class="line">		EUC_KRformat[21][69] = 179;</div><div class="line">		EUC_KRformat[26][85] = 178;</div><div class="line">		EUC_KRformat[31][31] = 177;</div><div class="line">		EUC_KRformat[28][64] = 176;</div><div class="line">		EUC_KRformat[38][13] = 175;</div><div class="line">		EUC_KRformat[25][2] = 174;</div><div class="line">		EUC_KRformat[22][34] = 173;</div><div class="line">		EUC_KRformat[28][28] = 172;</div><div class="line">		EUC_KRformat[24][91] = 171;</div><div class="line">		EUC_KRformat[33][74] = 170;</div><div class="line">		EUC_KRformat[29][40] = 169;</div><div class="line">		EUC_KRformat[15][77] = 168;</div><div class="line">		EUC_KRformat[32][80] = 167;</div><div class="line">		EUC_KRformat[30][41] = 166;</div><div class="line">		EUC_KRformat[23][30] = 165;</div><div class="line">		EUC_KRformat[24][63] = 164;</div><div class="line">		EUC_KRformat[30][53] = 163;</div><div class="line">		EUC_KRformat[39][70] = 162;</div><div class="line">		EUC_KRformat[23][61] = 161;</div><div class="line">		EUC_KRformat[37][27] = 160;</div><div class="line">		EUC_KRformat[16][55] = 159;</div><div class="line">		EUC_KRformat[22][74] = 158;</div><div class="line">		EUC_KRformat[26][50] = 157;</div><div class="line">		EUC_KRformat[16][10] = 156;</div><div class="line">		EUC_KRformat[34][63] = 155;</div><div class="line">		EUC_KRformat[35][14] = 154;</div><div class="line">		EUC_KRformat[17][7] = 153;</div><div class="line">		EUC_KRformat[15][59] = 152;</div><div class="line">		EUC_KRformat[27][23] = 151;</div><div class="line">		EUC_KRformat[18][70] = 150;</div><div class="line">		EUC_KRformat[32][56] = 149;</div><div class="line">		EUC_KRformat[37][87] = 148;</div><div class="line">		EUC_KRformat[17][61] = 147;</div><div class="line">		EUC_KRformat[18][83] = 146;</div><div class="line">		EUC_KRformat[23][86] = 145;</div><div class="line">		EUC_KRformat[17][31] = 144;</div><div class="line">		EUC_KRformat[23][83] = 143;</div><div class="line">		EUC_KRformat[35][2] = 142;</div><div class="line">		EUC_KRformat[18][64] = 141;</div><div class="line">		EUC_KRformat[27][43] = 140;</div><div class="line">		EUC_KRformat[32][42] = 139;</div><div class="line">		EUC_KRformat[25][76] = 138;</div><div class="line">		EUC_KRformat[19][85] = 137;</div><div class="line">		EUC_KRformat[37][81] = 136;</div><div class="line">		EUC_KRformat[38][83] = 135;</div><div class="line">		EUC_KRformat[35][7] = 134;</div><div class="line">		EUC_KRformat[16][51] = 133;</div><div class="line">		EUC_KRformat[27][22] = 132;</div><div class="line">		EUC_KRformat[16][76] = 131;</div><div class="line">		EUC_KRformat[22][4] = 130;</div><div class="line">		EUC_KRformat[38][84] = 129;</div><div class="line">		EUC_KRformat[17][83] = 128;</div><div class="line">		EUC_KRformat[24][46] = 127;</div><div class="line">		EUC_KRformat[33][15] = 126;</div><div class="line">		EUC_KRformat[20][48] = 125;</div><div class="line">		EUC_KRformat[17][30] = 124;</div><div class="line">		EUC_KRformat[30][93] = 123;</div><div class="line">		EUC_KRformat[28][11] = 122;</div><div class="line">		EUC_KRformat[28][30] = 121;</div><div class="line">		EUC_KRformat[15][62] = 120;</div><div class="line">		EUC_KRformat[17][87] = 119;</div><div class="line">		EUC_KRformat[32][81] = 118;</div><div class="line">		EUC_KRformat[23][37] = 117;</div><div class="line">		EUC_KRformat[30][22] = 116;</div><div class="line">		EUC_KRformat[32][66] = 115;</div><div class="line">		EUC_KRformat[33][78] = 114;</div><div class="line">		EUC_KRformat[21][4] = 113;</div><div class="line">		EUC_KRformat[31][17] = 112;</div><div class="line">		EUC_KRformat[39][61] = 111;</div><div class="line">		EUC_KRformat[18][76] = 110;</div><div class="line">		EUC_KRformat[15][85] = 109;</div><div class="line">		EUC_KRformat[31][47] = 108;</div><div class="line">		EUC_KRformat[19][57] = 107;</div><div class="line">		EUC_KRformat[23][55] = 106;</div><div class="line">		EUC_KRformat[27][29] = 105;</div><div class="line">		EUC_KRformat[29][46] = 104;</div><div class="line">		EUC_KRformat[33][0] = 103;</div><div class="line">		EUC_KRformat[16][83] = 102;</div><div class="line">		EUC_KRformat[39][78] = 101;</div><div class="line">		EUC_KRformat[32][77] = 100;</div><div class="line">		EUC_KRformat[36][25] = 99;</div><div class="line">		EUC_KRformat[34][19] = 98;</div><div class="line">		EUC_KRformat[38][49] = 97;</div><div class="line">		EUC_KRformat[19][25] = 96;</div><div class="line">		EUC_KRformat[23][53] = 95;</div><div class="line">		EUC_KRformat[28][43] = 94;</div><div class="line">		EUC_KRformat[31][44] = 93;</div><div class="line">		EUC_KRformat[36][34] = 92;</div><div class="line">		EUC_KRformat[16][34] = 91;</div><div class="line">		EUC_KRformat[35][1] = 90;</div><div class="line">		EUC_KRformat[19][87] = 89;</div><div class="line">		EUC_KRformat[18][53] = 88;</div><div class="line">		EUC_KRformat[29][54] = 87;</div><div class="line">		EUC_KRformat[22][41] = 86;</div><div class="line">		EUC_KRformat[38][18] = 85;</div><div class="line">		EUC_KRformat[22][2] = 84;</div><div class="line">		EUC_KRformat[20][3] = 83;</div><div class="line">		EUC_KRformat[39][69] = 82;</div><div class="line">		EUC_KRformat[30][29] = 81;</div><div class="line">		EUC_KRformat[28][19] = 80;</div><div class="line">		EUC_KRformat[29][90] = 79;</div><div class="line">		EUC_KRformat[17][86] = 78;</div><div class="line">		EUC_KRformat[15][9] = 77;</div><div class="line">		EUC_KRformat[39][73] = 76;</div><div class="line">		EUC_KRformat[15][37] = 75;</div><div class="line">		EUC_KRformat[35][40] = 74;</div><div class="line">		EUC_KRformat[33][77] = 73;</div><div class="line">		EUC_KRformat[27][86] = 72;</div><div class="line">		EUC_KRformat[36][79] = 71;</div><div class="line">		EUC_KRformat[23][18] = 70;</div><div class="line">		EUC_KRformat[34][87] = 69;</div><div class="line">		EUC_KRformat[39][24] = 68;</div><div class="line">		EUC_KRformat[26][8] = 67;</div><div class="line">		EUC_KRformat[33][48] = 66;</div><div class="line">		EUC_KRformat[39][30] = 65;</div><div class="line">		EUC_KRformat[33][28] = 64;</div><div class="line">		EUC_KRformat[16][67] = 63;</div><div class="line">		EUC_KRformat[31][78] = 62;</div><div class="line">		EUC_KRformat[32][23] = 61;</div><div class="line">		EUC_KRformat[24][55] = 60;</div><div class="line">		EUC_KRformat[30][68] = 59;</div><div class="line">		EUC_KRformat[18][60] = 58;</div><div class="line">		EUC_KRformat[15][17] = 57;</div><div class="line">		EUC_KRformat[23][34] = 56;</div><div class="line">		EUC_KRformat[20][49] = 55;</div><div class="line">		EUC_KRformat[15][78] = 54;</div><div class="line">		EUC_KRformat[24][14] = 53;</div><div class="line">		EUC_KRformat[19][41] = 52;</div><div class="line">		EUC_KRformat[31][55] = 51;</div><div class="line">		EUC_KRformat[21][39] = 50;</div><div class="line">		EUC_KRformat[35][9] = 49;</div><div class="line">		EUC_KRformat[30][15] = 48;</div><div class="line">		EUC_KRformat[20][52] = 47;</div><div class="line">		EUC_KRformat[35][71] = 46;</div><div class="line">		EUC_KRformat[20][7] = 45;</div><div class="line">		EUC_KRformat[29][72] = 44;</div><div class="line">		EUC_KRformat[37][77] = 43;</div><div class="line">		EUC_KRformat[22][35] = 42;</div><div class="line">		EUC_KRformat[20][61] = 41;</div><div class="line">		EUC_KRformat[31][60] = 40;</div><div class="line">		EUC_KRformat[20][93] = 39;</div><div class="line">		EUC_KRformat[27][92] = 38;</div><div class="line">		EUC_KRformat[28][16] = 37;</div><div class="line">		EUC_KRformat[36][26] = 36;</div><div class="line">		EUC_KRformat[18][89] = 35;</div><div class="line">		EUC_KRformat[21][63] = 34;</div><div class="line">		EUC_KRformat[22][52] = 33;</div><div class="line">		EUC_KRformat[24][65] = 32;</div><div class="line">		EUC_KRformat[31][8] = 31;</div><div class="line">		EUC_KRformat[31][49] = 30;</div><div class="line">		EUC_KRformat[33][30] = 29;</div><div class="line">		EUC_KRformat[37][15] = 28;</div><div class="line">		EUC_KRformat[18][18] = 27;</div><div class="line">		EUC_KRformat[25][50] = 26;</div><div class="line">		EUC_KRformat[29][20] = 25;</div><div class="line">		EUC_KRformat[35][48] = 24;</div><div class="line">		EUC_KRformat[38][75] = 23;</div><div class="line">		EUC_KRformat[26][83] = 22;</div><div class="line">		EUC_KRformat[21][87] = 21;</div><div class="line">		EUC_KRformat[27][71] = 20;</div><div class="line">		EUC_KRformat[32][91] = 19;</div><div class="line">		EUC_KRformat[25][73] = 18;</div><div class="line">		EUC_KRformat[16][84] = 17;</div><div class="line">		EUC_KRformat[25][31] = 16;</div><div class="line">		EUC_KRformat[17][90] = 15;</div><div class="line">		EUC_KRformat[18][40] = 14;</div><div class="line">		EUC_KRformat[17][77] = 13;</div><div class="line">		EUC_KRformat[17][35] = 12;</div><div class="line">		EUC_KRformat[23][52] = 11;</div><div class="line">		EUC_KRformat[23][35] = 10;</div><div class="line">		EUC_KRformat[16][5] = 9;</div><div class="line">		EUC_KRformat[23][58] = 8;</div><div class="line">		EUC_KRformat[19][60] = 7;</div><div class="line">		EUC_KRformat[30][32] = 6;</div><div class="line">		EUC_KRformat[38][34] = 5;</div><div class="line">		EUC_KRformat[23][4] = 4;</div><div class="line">		EUC_KRformat[23][1] = 3;</div><div class="line">		EUC_KRformat[27][57] = 2;</div><div class="line">		EUC_KRformat[39][38] = 1;</div><div class="line">		EUC_KRformat[32][33] = 0;</div><div class="line"></div><div class="line">		JPformat[3][74] = 600;</div><div class="line">		JPformat[3][45] = 599;</div><div class="line">		JPformat[3][3] = 598;</div><div class="line">		JPformat[3][24] = 597;</div><div class="line">		JPformat[3][30] = 596;</div><div class="line">		JPformat[3][42] = 595;</div><div class="line">		JPformat[3][46] = 594;</div><div class="line">		JPformat[3][39] = 593;</div><div class="line">		JPformat[3][11] = 592;</div><div class="line">		JPformat[3][37] = 591;</div><div class="line">		JPformat[3][38] = 590;</div><div class="line">		JPformat[3][31] = 589;</div><div class="line">		JPformat[3][41] = 588;</div><div class="line">		JPformat[3][5] = 587;</div><div class="line">		JPformat[3][10] = 586;</div><div class="line">		JPformat[3][75] = 585;</div><div class="line">		JPformat[3][65] = 584;</div><div class="line">		JPformat[3][72] = 583;</div><div class="line">		JPformat[37][91] = 582;</div><div class="line">		JPformat[0][27] = 581;</div><div class="line">		JPformat[3][18] = 580;</div><div class="line">		JPformat[3][22] = 579;</div><div class="line">		JPformat[3][61] = 578;</div><div class="line">		JPformat[3][14] = 577;</div><div class="line">		JPformat[24][80] = 576;</div><div class="line">		JPformat[4][82] = 575;</div><div class="line">		JPformat[17][80] = 574;</div><div class="line">		JPformat[30][44] = 573;</div><div class="line">		JPformat[3][73] = 572;</div><div class="line">		JPformat[3][64] = 571;</div><div class="line">		JPformat[38][14] = 570;</div><div class="line">		JPformat[33][70] = 569;</div><div class="line">		JPformat[3][1] = 568;</div><div class="line">		JPformat[3][16] = 567;</div><div class="line">		JPformat[3][35] = 566;</div><div class="line">		JPformat[3][40] = 565;</div><div class="line">		JPformat[4][74] = 564;</div><div class="line">		JPformat[4][24] = 563;</div><div class="line">		JPformat[42][59] = 562;</div><div class="line">		JPformat[3][7] = 561;</div><div class="line">		JPformat[3][71] = 560;</div><div class="line">		JPformat[3][12] = 559;</div><div class="line">		JPformat[15][75] = 558;</div><div class="line">		JPformat[3][20] = 557;</div><div class="line">		JPformat[4][39] = 556;</div><div class="line">		JPformat[34][69] = 555;</div><div class="line">		JPformat[3][28] = 554;</div><div class="line">		JPformat[35][24] = 553;</div><div class="line">		JPformat[3][82] = 552;</div><div class="line">		JPformat[28][47] = 551;</div><div class="line">		JPformat[3][67] = 550;</div><div class="line">		JPformat[37][16] = 549;</div><div class="line">		JPformat[26][93] = 548;</div><div class="line">		JPformat[4][1] = 547;</div><div class="line">		JPformat[26][85] = 546;</div><div class="line">		JPformat[31][14] = 545;</div><div class="line">		JPformat[4][3] = 544;</div><div class="line">		JPformat[4][72] = 543;</div><div class="line">		JPformat[24][51] = 542;</div><div class="line">		JPformat[27][51] = 541;</div><div class="line">		JPformat[27][49] = 540;</div><div class="line">		JPformat[22][77] = 539;</div><div class="line">		JPformat[27][10] = 538;</div><div class="line">		JPformat[29][68] = 537;</div><div class="line">		JPformat[20][35] = 536;</div><div class="line">		JPformat[41][11] = 535;</div><div class="line">		JPformat[24][70] = 534;</div><div class="line">		JPformat[36][61] = 533;</div><div class="line">		JPformat[31][23] = 532;</div><div class="line">		JPformat[43][16] = 531;</div><div class="line">		JPformat[23][68] = 530;</div><div class="line">		JPformat[32][15] = 529;</div><div class="line">		JPformat[3][32] = 528;</div><div class="line">		JPformat[19][53] = 527;</div><div class="line">		JPformat[40][83] = 526;</div><div class="line">		JPformat[4][14] = 525;</div><div class="line">		JPformat[36][9] = 524;</div><div class="line">		JPformat[4][73] = 523;</div><div class="line">		JPformat[23][10] = 522;</div><div class="line">		JPformat[3][63] = 521;</div><div class="line">		JPformat[39][14] = 520;</div><div class="line">		JPformat[3][78] = 519;</div><div class="line">		JPformat[33][47] = 518;</div><div class="line">		JPformat[21][39] = 517;</div><div class="line">		JPformat[34][46] = 516;</div><div class="line">		JPformat[36][75] = 515;</div><div class="line">		JPformat[41][92] = 514;</div><div class="line">		JPformat[37][93] = 513;</div><div class="line">		JPformat[4][34] = 512;</div><div class="line">		JPformat[15][86] = 511;</div><div class="line">		JPformat[46][1] = 510;</div><div class="line">		JPformat[37][65] = 509;</div><div class="line">		JPformat[3][62] = 508;</div><div class="line">		JPformat[32][73] = 507;</div><div class="line">		JPformat[21][65] = 506;</div><div class="line">		JPformat[29][75] = 505;</div><div class="line">		JPformat[26][51] = 504;</div><div class="line">		JPformat[3][34] = 503;</div><div class="line">		JPformat[4][10] = 502;</div><div class="line">		JPformat[30][22] = 501;</div><div class="line">		JPformat[35][73] = 500;</div><div class="line">		JPformat[17][82] = 499;</div><div class="line">		JPformat[45][8] = 498;</div><div class="line">		JPformat[27][73] = 497;</div><div class="line">		JPformat[18][55] = 496;</div><div class="line">		JPformat[25][2] = 495;</div><div class="line">		JPformat[3][26] = 494;</div><div class="line">		JPformat[45][46] = 493;</div><div class="line">		JPformat[4][22] = 492;</div><div class="line">		JPformat[4][40] = 491;</div><div class="line">		JPformat[18][10] = 490;</div><div class="line">		JPformat[32][9] = 489;</div><div class="line">		JPformat[26][49] = 488;</div><div class="line">		JPformat[3][47] = 487;</div><div class="line">		JPformat[24][65] = 486;</div><div class="line">		JPformat[4][76] = 485;</div><div class="line">		JPformat[43][67] = 484;</div><div class="line">		JPformat[3][9] = 483;</div><div class="line">		JPformat[41][37] = 482;</div><div class="line">		JPformat[33][68] = 481;</div><div class="line">		JPformat[43][31] = 480;</div><div class="line">		JPformat[19][55] = 479;</div><div class="line">		JPformat[4][30] = 478;</div><div class="line">		JPformat[27][33] = 477;</div><div class="line">		JPformat[16][62] = 476;</div><div class="line">		JPformat[36][35] = 475;</div><div class="line">		JPformat[37][15] = 474;</div><div class="line">		JPformat[27][70] = 473;</div><div class="line">		JPformat[22][71] = 472;</div><div class="line">		JPformat[33][45] = 471;</div><div class="line">		JPformat[31][78] = 470;</div><div class="line">		JPformat[43][59] = 469;</div><div class="line">		JPformat[32][19] = 468;</div><div class="line">		JPformat[17][28] = 467;</div><div class="line">		JPformat[40][28] = 466;</div><div class="line">		JPformat[20][93] = 465;</div><div class="line">		JPformat[18][15] = 464;</div><div class="line">		JPformat[4][23] = 463;</div><div class="line">		JPformat[3][23] = 462;</div><div class="line">		JPformat[26][64] = 461;</div><div class="line">		JPformat[44][92] = 460;</div><div class="line">		JPformat[17][27] = 459;</div><div class="line">		JPformat[3][56] = 458;</div><div class="line">		JPformat[25][38] = 457;</div><div class="line">		JPformat[23][31] = 456;</div><div class="line">		JPformat[35][43] = 455;</div><div class="line">		JPformat[4][54] = 454;</div><div class="line">		JPformat[35][19] = 453;</div><div class="line">		JPformat[22][47] = 452;</div><div class="line">		JPformat[42][0] = 451;</div><div class="line">		JPformat[23][28] = 450;</div><div class="line">		JPformat[46][33] = 449;</div><div class="line">		JPformat[36][85] = 448;</div><div class="line">		JPformat[31][12] = 447;</div><div class="line">		JPformat[3][76] = 446;</div><div class="line">		JPformat[4][75] = 445;</div><div class="line">		JPformat[36][56] = 444;</div><div class="line">		JPformat[4][64] = 443;</div><div class="line">		JPformat[25][77] = 442;</div><div class="line">		JPformat[15][52] = 441;</div><div class="line">		JPformat[33][73] = 440;</div><div class="line">		JPformat[3][55] = 439;</div><div class="line">		JPformat[43][82] = 438;</div><div class="line">		JPformat[27][82] = 437;</div><div class="line">		JPformat[20][3] = 436;</div><div class="line">		JPformat[40][51] = 435;</div><div class="line">		JPformat[3][17] = 434;</div><div class="line">		JPformat[27][71] = 433;</div><div class="line">		JPformat[4][52] = 432;</div><div class="line">		JPformat[44][48] = 431;</div><div class="line">		JPformat[27][2] = 430;</div><div class="line">		JPformat[17][39] = 429;</div><div class="line">		JPformat[31][8] = 428;</div><div class="line">		JPformat[44][54] = 427;</div><div class="line">		JPformat[43][18] = 426;</div><div class="line">		JPformat[43][77] = 425;</div><div class="line">		JPformat[4][61] = 424;</div><div class="line">		JPformat[19][91] = 423;</div><div class="line">		JPformat[31][13] = 422;</div><div class="line">		JPformat[44][71] = 421;</div><div class="line">		JPformat[20][0] = 420;</div><div class="line">		JPformat[23][87] = 419;</div><div class="line">		JPformat[21][14] = 418;</div><div class="line">		JPformat[29][13] = 417;</div><div class="line">		JPformat[3][58] = 416;</div><div class="line">		JPformat[26][18] = 415;</div><div class="line">		JPformat[4][47] = 414;</div><div class="line">		JPformat[4][18] = 413;</div><div class="line">		JPformat[3][53] = 412;</div><div class="line">		JPformat[26][92] = 411;</div><div class="line">		JPformat[21][7] = 410;</div><div class="line">		JPformat[4][37] = 409;</div><div class="line">		JPformat[4][63] = 408;</div><div class="line">		JPformat[36][51] = 407;</div><div class="line">		JPformat[4][32] = 406;</div><div class="line">		JPformat[28][73] = 405;</div><div class="line">		JPformat[4][50] = 404;</div><div class="line">		JPformat[41][60] = 403;</div><div class="line">		JPformat[23][1] = 402;</div><div class="line">		JPformat[36][92] = 401;</div><div class="line">		JPformat[15][41] = 400;</div><div class="line">		JPformat[21][71] = 399;</div><div class="line">		JPformat[41][30] = 398;</div><div class="line">		JPformat[32][76] = 397;</div><div class="line">		JPformat[17][34] = 396;</div><div class="line">		JPformat[26][15] = 395;</div><div class="line">		JPformat[26][25] = 394;</div><div class="line">		JPformat[31][77] = 393;</div><div class="line">		JPformat[31][3] = 392;</div><div class="line">		JPformat[46][34] = 391;</div><div class="line">		JPformat[27][84] = 390;</div><div class="line">		JPformat[23][8] = 389;</div><div class="line">		JPformat[16][0] = 388;</div><div class="line">		JPformat[28][80] = 387;</div><div class="line">		JPformat[26][54] = 386;</div><div class="line">		JPformat[33][18] = 385;</div><div class="line">		JPformat[31][20] = 384;</div><div class="line">		JPformat[31][62] = 383;</div><div class="line">		JPformat[30][41] = 382;</div><div class="line">		JPformat[33][30] = 381;</div><div class="line">		JPformat[45][45] = 380;</div><div class="line">		JPformat[37][82] = 379;</div><div class="line">		JPformat[15][33] = 378;</div><div class="line">		JPformat[20][12] = 377;</div><div class="line">		JPformat[18][5] = 376;</div><div class="line">		JPformat[28][86] = 375;</div><div class="line">		JPformat[30][19] = 374;</div><div class="line">		JPformat[42][43] = 373;</div><div class="line">		JPformat[36][31] = 372;</div><div class="line">		JPformat[17][93] = 371;</div><div class="line">		JPformat[4][15] = 370;</div><div class="line">		JPformat[21][20] = 369;</div><div class="line">		JPformat[23][21] = 368;</div><div class="line">		JPformat[28][72] = 367;</div><div class="line">		JPformat[4][20] = 366;</div><div class="line">		JPformat[26][55] = 365;</div><div class="line">		JPformat[21][5] = 364;</div><div class="line">		JPformat[19][16] = 363;</div><div class="line">		JPformat[23][64] = 362;</div><div class="line">		JPformat[40][59] = 361;</div><div class="line">		JPformat[37][26] = 360;</div><div class="line">		JPformat[26][56] = 359;</div><div class="line">		JPformat[4][12] = 358;</div><div class="line">		JPformat[33][71] = 357;</div><div class="line">		JPformat[32][39] = 356;</div><div class="line">		JPformat[38][40] = 355;</div><div class="line">		JPformat[22][74] = 354;</div><div class="line">		JPformat[3][25] = 353;</div><div class="line">		JPformat[15][48] = 352;</div><div class="line">		JPformat[41][82] = 351;</div><div class="line">		JPformat[41][9] = 350;</div><div class="line">		JPformat[25][48] = 349;</div><div class="line">		JPformat[31][71] = 348;</div><div class="line">		JPformat[43][29] = 347;</div><div class="line">		JPformat[26][80] = 346;</div><div class="line">		JPformat[4][5] = 345;</div><div class="line">		JPformat[18][71] = 344;</div><div class="line">		JPformat[29][0] = 343;</div><div class="line">		JPformat[43][43] = 342;</div><div class="line">		JPformat[23][81] = 341;</div><div class="line">		JPformat[4][42] = 340;</div><div class="line">		JPformat[44][28] = 339;</div><div class="line">		JPformat[23][93] = 338;</div><div class="line">		JPformat[17][81] = 337;</div><div class="line">		JPformat[25][25] = 336;</div><div class="line">		JPformat[41][23] = 335;</div><div class="line">		JPformat[34][35] = 334;</div><div class="line">		JPformat[4][53] = 333;</div><div class="line">		JPformat[28][36] = 332;</div><div class="line">		JPformat[4][41] = 331;</div><div class="line">		JPformat[25][60] = 330;</div><div class="line">		JPformat[23][20] = 329;</div><div class="line">		JPformat[3][43] = 328;</div><div class="line">		JPformat[24][79] = 327;</div><div class="line">		JPformat[29][41] = 326;</div><div class="line">		JPformat[30][83] = 325;</div><div class="line">		JPformat[3][50] = 324;</div><div class="line">		JPformat[22][18] = 323;</div><div class="line">		JPformat[18][3] = 322;</div><div class="line">		JPformat[39][30] = 321;</div><div class="line">		JPformat[4][28] = 320;</div><div class="line">		JPformat[21][64] = 319;</div><div class="line">		JPformat[4][68] = 318;</div><div class="line">		JPformat[17][71] = 317;</div><div class="line">		JPformat[27][0] = 316;</div><div class="line">		JPformat[39][28] = 315;</div><div class="line">		JPformat[30][13] = 314;</div><div class="line">		JPformat[36][70] = 313;</div><div class="line">		JPformat[20][82] = 312;</div><div class="line">		JPformat[33][38] = 311;</div><div class="line">		JPformat[44][87] = 310;</div><div class="line">		JPformat[34][45] = 309;</div><div class="line">		JPformat[4][26] = 308;</div><div class="line">		JPformat[24][44] = 307;</div><div class="line">		JPformat[38][67] = 306;</div><div class="line">		JPformat[38][6] = 305;</div><div class="line">		JPformat[30][68] = 304;</div><div class="line">		JPformat[15][89] = 303;</div><div class="line">		JPformat[24][93] = 302;</div><div class="line">		JPformat[40][41] = 301;</div><div class="line">		JPformat[38][3] = 300;</div><div class="line">		JPformat[28][23] = 299;</div><div class="line">		JPformat[26][17] = 298;</div><div class="line">		JPformat[4][38] = 297;</div><div class="line">		JPformat[22][78] = 296;</div><div class="line">		JPformat[15][37] = 295;</div><div class="line">		JPformat[25][85] = 294;</div><div class="line">		JPformat[4][9] = 293;</div><div class="line">		JPformat[4][7] = 292;</div><div class="line">		JPformat[27][53] = 291;</div><div class="line">		JPformat[39][29] = 290;</div><div class="line">		JPformat[41][43] = 289;</div><div class="line">		JPformat[25][62] = 288;</div><div class="line">		JPformat[4][48] = 287;</div><div class="line">		JPformat[28][28] = 286;</div><div class="line">		JPformat[21][40] = 285;</div><div class="line">		JPformat[36][73] = 284;</div><div class="line">		JPformat[26][39] = 283;</div><div class="line">		JPformat[22][54] = 282;</div><div class="line">		JPformat[33][5] = 281;</div><div class="line">		JPformat[19][21] = 280;</div><div class="line">		JPformat[46][31] = 279;</div><div class="line">		JPformat[20][64] = 278;</div><div class="line">		JPformat[26][63] = 277;</div><div class="line">		JPformat[22][23] = 276;</div><div class="line">		JPformat[25][81] = 275;</div><div class="line">		JPformat[4][62] = 274;</div><div class="line">		JPformat[37][31] = 273;</div><div class="line">		JPformat[40][52] = 272;</div><div class="line">		JPformat[29][79] = 271;</div><div class="line">		JPformat[41][48] = 270;</div><div class="line">		JPformat[31][57] = 269;</div><div class="line">		JPformat[32][92] = 268;</div><div class="line">		JPformat[36][36] = 267;</div><div class="line">		JPformat[27][7] = 266;</div><div class="line">		JPformat[35][29] = 265;</div><div class="line">		JPformat[37][34] = 264;</div><div class="line">		JPformat[34][42] = 263;</div><div class="line">		JPformat[27][15] = 262;</div><div class="line">		JPformat[33][27] = 261;</div><div class="line">		JPformat[31][38] = 260;</div><div class="line">		JPformat[19][79] = 259;</div><div class="line">		JPformat[4][31] = 258;</div><div class="line">		JPformat[4][66] = 257;</div><div class="line">		JPformat[17][32] = 256;</div><div class="line">		JPformat[26][67] = 255;</div><div class="line">		JPformat[16][30] = 254;</div><div class="line">		JPformat[26][46] = 253;</div><div class="line">		JPformat[24][26] = 252;</div><div class="line">		JPformat[35][10] = 251;</div><div class="line">		JPformat[18][37] = 250;</div><div class="line">		JPformat[3][19] = 249;</div><div class="line">		JPformat[33][69] = 248;</div><div class="line">		JPformat[31][9] = 247;</div><div class="line">		JPformat[45][29] = 246;</div><div class="line">		JPformat[3][15] = 245;</div><div class="line">		JPformat[18][54] = 244;</div><div class="line">		JPformat[3][44] = 243;</div><div class="line">		JPformat[31][29] = 242;</div><div class="line">		JPformat[18][45] = 241;</div><div class="line">		JPformat[38][28] = 240;</div><div class="line">		JPformat[24][12] = 239;</div><div class="line">		JPformat[35][82] = 238;</div><div class="line">		JPformat[17][43] = 237;</div><div class="line">		JPformat[28][9] = 236;</div><div class="line">		JPformat[23][25] = 235;</div><div class="line">		JPformat[44][37] = 234;</div><div class="line">		JPformat[23][75] = 233;</div><div class="line">		JPformat[23][92] = 232;</div><div class="line">		JPformat[0][24] = 231;</div><div class="line">		JPformat[19][74] = 230;</div><div class="line">		JPformat[45][32] = 229;</div><div class="line">		JPformat[16][72] = 228;</div><div class="line">		JPformat[16][93] = 227;</div><div class="line">		JPformat[45][13] = 226;</div><div class="line">		JPformat[24][8] = 225;</div><div class="line">		JPformat[25][47] = 224;</div><div class="line">		JPformat[28][26] = 223;</div><div class="line">		JPformat[43][81] = 222;</div><div class="line">		JPformat[32][71] = 221;</div><div class="line">		JPformat[18][41] = 220;</div><div class="line">		JPformat[26][62] = 219;</div><div class="line">		JPformat[41][24] = 218;</div><div class="line">		JPformat[40][11] = 217;</div><div class="line">		JPformat[43][57] = 216;</div><div class="line">		JPformat[34][53] = 215;</div><div class="line">		JPformat[20][32] = 214;</div><div class="line">		JPformat[34][43] = 213;</div><div class="line">		JPformat[41][91] = 212;</div><div class="line">		JPformat[29][57] = 211;</div><div class="line">		JPformat[15][43] = 210;</div><div class="line">		JPformat[22][89] = 209;</div><div class="line">		JPformat[33][83] = 208;</div><div class="line">		JPformat[43][20] = 207;</div><div class="line">		JPformat[25][58] = 206;</div><div class="line">		JPformat[30][30] = 205;</div><div class="line">		JPformat[4][56] = 204;</div><div class="line">		JPformat[17][64] = 203;</div><div class="line">		JPformat[23][0] = 202;</div><div class="line">		JPformat[44][12] = 201;</div><div class="line">		JPformat[25][37] = 200;</div><div class="line">		JPformat[35][13] = 199;</div><div class="line">		JPformat[20][30] = 198;</div><div class="line">		JPformat[21][84] = 197;</div><div class="line">		JPformat[29][14] = 196;</div><div class="line">		JPformat[30][5] = 195;</div><div class="line">		JPformat[37][2] = 194;</div><div class="line">		JPformat[4][78] = 193;</div><div class="line">		JPformat[29][78] = 192;</div><div class="line">		JPformat[29][84] = 191;</div><div class="line">		JPformat[32][86] = 190;</div><div class="line">		JPformat[20][68] = 189;</div><div class="line">		JPformat[30][39] = 188;</div><div class="line">		JPformat[15][69] = 187;</div><div class="line">		JPformat[4][60] = 186;</div><div class="line">		JPformat[20][61] = 185;</div><div class="line">		JPformat[41][67] = 184;</div><div class="line">		JPformat[16][35] = 183;</div><div class="line">		JPformat[36][57] = 182;</div><div class="line">		JPformat[39][80] = 181;</div><div class="line">		JPformat[4][59] = 180;</div><div class="line">		JPformat[4][44] = 179;</div><div class="line">		JPformat[40][54] = 178;</div><div class="line">		JPformat[30][8] = 177;</div><div class="line">		JPformat[44][30] = 176;</div><div class="line">		JPformat[31][93] = 175;</div><div class="line">		JPformat[31][47] = 174;</div><div class="line">		JPformat[16][70] = 173;</div><div class="line">		JPformat[21][0] = 172;</div><div class="line">		JPformat[17][35] = 171;</div><div class="line">		JPformat[21][67] = 170;</div><div class="line">		JPformat[44][18] = 169;</div><div class="line">		JPformat[36][29] = 168;</div><div class="line">		JPformat[18][67] = 167;</div><div class="line">		JPformat[24][28] = 166;</div><div class="line">		JPformat[36][24] = 165;</div><div class="line">		JPformat[23][5] = 164;</div><div class="line">		JPformat[31][65] = 163;</div><div class="line">		JPformat[26][59] = 162;</div><div class="line">		JPformat[28][2] = 161;</div><div class="line">		JPformat[39][69] = 160;</div><div class="line">		JPformat[42][40] = 159;</div><div class="line">		JPformat[37][80] = 158;</div><div class="line">		JPformat[15][66] = 157;</div><div class="line">		JPformat[34][38] = 156;</div><div class="line">		JPformat[28][48] = 155;</div><div class="line">		JPformat[37][77] = 154;</div><div class="line">		JPformat[29][34] = 153;</div><div class="line">		JPformat[33][12] = 152;</div><div class="line">		JPformat[4][65] = 151;</div><div class="line">		JPformat[30][31] = 150;</div><div class="line">		JPformat[27][92] = 149;</div><div class="line">		JPformat[4][2] = 148;</div><div class="line">		JPformat[4][51] = 147;</div><div class="line">		JPformat[23][77] = 146;</div><div class="line">		JPformat[4][35] = 145;</div><div class="line">		JPformat[3][13] = 144;</div><div class="line">		JPformat[26][26] = 143;</div><div class="line">		JPformat[44][4] = 142;</div><div class="line">		JPformat[39][53] = 141;</div><div class="line">		JPformat[20][11] = 140;</div><div class="line">		JPformat[40][33] = 139;</div><div class="line">		JPformat[45][7] = 138;</div><div class="line">		JPformat[4][70] = 137;</div><div class="line">		JPformat[3][49] = 136;</div><div class="line">		JPformat[20][59] = 135;</div><div class="line">		JPformat[21][12] = 134;</div><div class="line">		JPformat[33][53] = 133;</div><div class="line">		JPformat[20][14] = 132;</div><div class="line">		JPformat[37][18] = 131;</div><div class="line">		JPformat[18][17] = 130;</div><div class="line">		JPformat[36][23] = 129;</div><div class="line">		JPformat[18][57] = 128;</div><div class="line">		JPformat[26][74] = 127;</div><div class="line">		JPformat[35][2] = 126;</div><div class="line">		JPformat[38][58] = 125;</div><div class="line">		JPformat[34][68] = 124;</div><div class="line">		JPformat[29][81] = 123;</div><div class="line">		JPformat[20][69] = 122;</div><div class="line">		JPformat[39][86] = 121;</div><div class="line">		JPformat[4][16] = 120;</div><div class="line">		JPformat[16][49] = 119;</div><div class="line">		JPformat[15][72] = 118;</div><div class="line">		JPformat[26][35] = 117;</div><div class="line">		JPformat[32][14] = 116;</div><div class="line">		JPformat[40][90] = 115;</div><div class="line">		JPformat[33][79] = 114;</div><div class="line">		JPformat[35][4] = 113;</div><div class="line">		JPformat[23][33] = 112;</div><div class="line">		JPformat[19][19] = 111;</div><div class="line">		JPformat[31][41] = 110;</div><div class="line">		JPformat[44][1] = 109;</div><div class="line">		JPformat[22][56] = 108;</div><div class="line">		JPformat[31][27] = 107;</div><div class="line">		JPformat[32][18] = 106;</div><div class="line">		JPformat[27][32] = 105;</div><div class="line">		JPformat[37][39] = 104;</div><div class="line">		JPformat[42][11] = 103;</div><div class="line">		JPformat[29][71] = 102;</div><div class="line">		JPformat[32][58] = 101;</div><div class="line">		JPformat[46][10] = 100;</div><div class="line">		JPformat[17][30] = 99;</div><div class="line">		JPformat[38][15] = 98;</div><div class="line">		JPformat[29][60] = 97;</div><div class="line">		JPformat[4][11] = 96;</div><div class="line">		JPformat[38][31] = 95;</div><div class="line">		JPformat[40][79] = 94;</div><div class="line">		JPformat[28][49] = 93;</div><div class="line">		JPformat[28][84] = 92;</div><div class="line">		JPformat[26][77] = 91;</div><div class="line">		JPformat[22][32] = 90;</div><div class="line">		JPformat[33][17] = 89;</div><div class="line">		JPformat[23][18] = 88;</div><div class="line">		JPformat[32][64] = 87;</div><div class="line">		JPformat[4][6] = 86;</div><div class="line">		JPformat[33][51] = 85;</div><div class="line">		JPformat[44][77] = 84;</div><div class="line">		JPformat[29][5] = 83;</div><div class="line">		JPformat[46][25] = 82;</div><div class="line">		JPformat[19][58] = 81;</div><div class="line">		JPformat[4][46] = 80;</div><div class="line">		JPformat[15][71] = 79;</div><div class="line">		JPformat[18][58] = 78;</div><div class="line">		JPformat[26][45] = 77;</div><div class="line">		JPformat[45][66] = 76;</div><div class="line">		JPformat[34][10] = 75;</div><div class="line">		JPformat[19][37] = 74;</div><div class="line">		JPformat[33][65] = 73;</div><div class="line">		JPformat[44][52] = 72;</div><div class="line">		JPformat[16][38] = 71;</div><div class="line">		JPformat[36][46] = 70;</div><div class="line">		JPformat[20][26] = 69;</div><div class="line">		JPformat[30][37] = 68;</div><div class="line">		JPformat[4][58] = 67;</div><div class="line">		JPformat[43][2] = 66;</div><div class="line">		JPformat[30][18] = 65;</div><div class="line">		JPformat[19][35] = 64;</div><div class="line">		JPformat[15][68] = 63;</div><div class="line">		JPformat[3][36] = 62;</div><div class="line">		JPformat[35][40] = 61;</div><div class="line">		JPformat[36][32] = 60;</div><div class="line">		JPformat[37][14] = 59;</div><div class="line">		JPformat[17][11] = 58;</div><div class="line">		JPformat[19][78] = 57;</div><div class="line">		JPformat[37][11] = 56;</div><div class="line">		JPformat[28][63] = 55;</div><div class="line">		JPformat[29][61] = 54;</div><div class="line">		JPformat[33][3] = 53;</div><div class="line">		JPformat[41][52] = 52;</div><div class="line">		JPformat[33][63] = 51;</div><div class="line">		JPformat[22][41] = 50;</div><div class="line">		JPformat[4][19] = 49;</div><div class="line">		JPformat[32][41] = 48;</div><div class="line">		JPformat[24][4] = 47;</div><div class="line">		JPformat[31][28] = 46;</div><div class="line">		JPformat[43][30] = 45;</div><div class="line">		JPformat[17][3] = 44;</div><div class="line">		JPformat[43][70] = 43;</div><div class="line">		JPformat[34][19] = 42;</div><div class="line">		JPformat[20][77] = 41;</div><div class="line">		JPformat[18][83] = 40;</div><div class="line">		JPformat[17][15] = 39;</div><div class="line">		JPformat[23][61] = 38;</div><div class="line">		JPformat[40][27] = 37;</div><div class="line">		JPformat[16][48] = 36;</div><div class="line">		JPformat[39][78] = 35;</div><div class="line">		JPformat[41][53] = 34;</div><div class="line">		JPformat[40][91] = 33;</div><div class="line">		JPformat[40][72] = 32;</div><div class="line">		JPformat[18][52] = 31;</div><div class="line">		JPformat[35][66] = 30;</div><div class="line">		JPformat[39][93] = 29;</div><div class="line">		JPformat[19][48] = 28;</div><div class="line">		JPformat[26][36] = 27;</div><div class="line">		JPformat[27][25] = 26;</div><div class="line">		JPformat[42][71] = 25;</div><div class="line">		JPformat[42][85] = 24;</div><div class="line">		JPformat[26][48] = 23;</div><div class="line">		JPformat[28][15] = 22;</div><div class="line">		JPformat[3][66] = 21;</div><div class="line">		JPformat[25][24] = 20;</div><div class="line">		JPformat[27][43] = 19;</div><div class="line">		JPformat[27][78] = 18;</div><div class="line">		JPformat[45][43] = 17;</div><div class="line">		JPformat[27][72] = 16;</div><div class="line">		JPformat[40][29] = 15;</div><div class="line">		JPformat[41][0] = 14;</div><div class="line">		JPformat[19][57] = 13;</div><div class="line">		JPformat[15][59] = 12;</div><div class="line">		JPformat[29][29] = 11;</div><div class="line">		JPformat[4][25] = 10;</div><div class="line">		JPformat[21][42] = 9;</div><div class="line">		JPformat[23][35] = 8;</div><div class="line">		JPformat[33][1] = 7;</div><div class="line">		JPformat[4][57] = 6;</div><div class="line">		JPformat[17][60] = 5;</div><div class="line">		JPformat[25][19] = 4;</div><div class="line">		JPformat[22][65] = 3;</div><div class="line">		JPformat[42][29] = 2;</div><div class="line">		JPformat[27][66] = 1;</div><div class="line">		JPformat[26][89] = 0;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	abstract public String getEncoding(String path);</div><div class="line"></div><div class="line">	abstract public String getEncoding(InputStream in);</div><div class="line"></div><div class="line">	abstract public String getEncoding(byte[] buffer);</div><div class="line"></div><div class="line">	abstract public String getEncoding(URL url);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Encoding.java</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div></pre></td><td class="code"><pre><div class="line">public class Encoding &#123;</div><div class="line">	</div><div class="line">	// 支持的字符格式</div><div class="line">	public static int GB2312 = 0;</div><div class="line"></div><div class="line">	public static int GBK = 1;</div><div class="line">	</div><div class="line">	public static int BIG5 = 2;</div><div class="line"></div><div class="line">	public static int UTF8 = 3;</div><div class="line"></div><div class="line">	public static int UNICODE = 4;</div><div class="line"></div><div class="line">	public static int EUC_KR = 5;</div><div class="line"></div><div class="line">	public static int SJIS = 6;</div><div class="line"></div><div class="line">	public static int EUC_JP = 7;</div><div class="line"></div><div class="line">	public static int ASCII = 8;</div><div class="line"></div><div class="line">	public static int UNKNOWN = 9;</div><div class="line"></div><div class="line">	public static int TOTALT = 10;</div><div class="line"></div><div class="line">	public final static int SIMP = 0;</div><div class="line"></div><div class="line">	public final static int TRAD = 1;</div><div class="line"></div><div class="line">	// 解析名称用</div><div class="line">	public static String[] javaname;</div><div class="line"></div><div class="line">	// 编码用</div><div class="line">	public static String[] nicename;</div><div class="line"></div><div class="line">	// 应用于html中的字符集</div><div class="line">	public static String[] htmlname;</div><div class="line"></div><div class="line">	public Encoding() &#123;</div><div class="line">		javaname = new String[TOTALT];</div><div class="line">		nicename = new String[TOTALT];</div><div class="line">		htmlname = new String[TOTALT];</div><div class="line">		javaname[GB2312] = &quot;GB2312&quot;;</div><div class="line">		javaname[GBK] = &quot;GBK&quot;;</div><div class="line">		javaname[BIG5] = &quot;BIG5&quot;;</div><div class="line">		javaname[UTF8] = &quot;UTF8&quot;;</div><div class="line">		javaname[UNICODE] = &quot;Unicode&quot;;</div><div class="line">		javaname[EUC_KR] = &quot;EUC_KR&quot;;</div><div class="line">		javaname[SJIS] = &quot;SJIS&quot;;</div><div class="line">		javaname[EUC_JP] = &quot;EUC_JP&quot;;</div><div class="line">		javaname[ASCII] = &quot;ASCII&quot;;</div><div class="line">		javaname[UNKNOWN] = &quot;ISO8859_1&quot;;</div><div class="line"></div><div class="line">		// 分配编码名称</div><div class="line">		htmlname[GB2312] = &quot;GB2312&quot;;</div><div class="line">		htmlname[GBK] = &quot;GBK&quot;;</div><div class="line">		htmlname[BIG5] = &quot;BIG5&quot;;</div><div class="line">		htmlname[UTF8] = &quot;UTF-8&quot;;</div><div class="line">		htmlname[UNICODE] = &quot;UTF-16&quot;;</div><div class="line">		htmlname[EUC_KR] = &quot;EUC-KR&quot;;</div><div class="line">		htmlname[SJIS] = &quot;Shift_JIS&quot;;</div><div class="line">		htmlname[EUC_JP] = &quot;EUC-JP&quot;;</div><div class="line">		htmlname[ASCII] = &quot;ASCII&quot;;</div><div class="line">		htmlname[UNKNOWN] = &quot;ISO8859-1&quot;;</div><div class="line"></div><div class="line">		// 分配可读名称</div><div class="line">		nicename[GB2312] = &quot;GB2312&quot;;</div><div class="line">		nicename[GBK] = &quot;GBK&quot;;</div><div class="line">		nicename[BIG5] = &quot;Big5&quot;;</div><div class="line">		nicename[UTF8] = &quot;UTF-8&quot;;</div><div class="line">		nicename[UNICODE] = &quot;Unicode&quot;;</div><div class="line">		nicename[EUC_KR] = &quot;EUC-KR&quot;;</div><div class="line">		nicename[SJIS] = &quot;Shift-JIS&quot;;</div><div class="line">		nicename[EUC_JP] = &quot;EUC-JP&quot;;</div><div class="line">		nicename[ASCII] = &quot;ASCII&quot;;</div><div class="line">		nicename[UNKNOWN] = &quot;UNKNOWN&quot;;</div><div class="line"></div><div class="line">	&#125;</div><div class="line"></div><div class="line">	public String toEncoding(final int type) &#123;</div><div class="line">		return (javaname[type] + &quot;,&quot; + nicename[type] + &quot;,&quot; + htmlname[type]).intern();</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">&#125;</div></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/06/spider-study006/" itemprop="url">
                  网络爬虫学习笔记(六) jsoup抽取工具简介
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-07-06T11:55:55+08:00" content="2016-07-06">
              2016-07-06
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/爬虫/" itemprop="url" rel="index">
                    <span itemprop="name">爬虫</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/07/06/spider-study006/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/07/06/spider-study006/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="1-jsoup的基本语法"><a href="#1-jsoup的基本语法" class="headerlink" title="1 jsoup的基本语法"></a>1 jsoup的基本语法</h2><p>jsoup的语法,截图如下:</p>
<p><img src="/images/jsoup/jsoup-yufa.png" alt=""></p>
<p>中文使用手册地址如下:<a href="http://www.open-open.com/jsoup/attributes-text-html.htm" target="_blank" rel="external">http://www.open-open.com/jsoup/attributes-text-html.htm</a></p>
<h2 id="2-jsoup的使用"><a href="#2-jsoup的使用" class="headerlink" title="2 jsoup的使用"></a>2 jsoup的使用</h2><p>jsoup主要是通过将网页解析成一个dom树结构,在通过相应的语法进行抽取.下面做一下简单的介绍和使用。</p>
<p>简答的例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">@org.junit.Test</div><div class="line">public void test() throws  Exception&#123;</div><div class="line">    String url = &quot;http://news.baidu.com&quot;;</div><div class="line">    String charset = &quot;GB2312&quot;;</div><div class="line"></div><div class="line">    //下载网页</div><div class="line">    String html = DownLoader.down(url,charset);</div><div class="line">    Document doc = Jsoup.parse(html);</div><div class="line"></div><div class="line">    Elements eles = doc.select(&quot;a[href]&quot;);</div><div class="line">    for(Element ele : eles)&#123;</div><div class="line">        String clzz1 = ele.className();</div><div class="line">        String text = ele.text();</div><div class="line">        String href = ele.attr(&quot;href&quot;);</div><div class="line">        String clzz2 = ele.attr(&quot;class&quot;);</div><div class="line"></div><div class="line">        System.out.println(clzz1 + &quot;\t&quot; + text + &quot;\t&quot; + href + &quot;\t&quot; + clzz2);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Document doc = Jsoup.parse(html); 表示将网页解析为一个Document文档,其内部机理是一个树形结构。</p>
<p>Elements eles = doc.select(“a[href]”);  表示从文档中抽取出所有的含有href属性值的a标签。返回的是一个集合,Elements继承了ArrayList<element>.</element></p>
<p>每一个Element表示一个满足上面条件的a标签。</p>
<h2 id="3-jsoup的简单封装"><a href="#3-jsoup的简单封装" class="headerlink" title="3 jsoup的简单封装"></a>3 jsoup的简单封装</h2><p>下面对jsoup的操作做了一个简单的封装,具体的结构如下:</p>
<p><img src="/images/jsoup/jsoup-simple.png" alt=""></p>
<p>ExtractorUtils：主要是通过反射调用的方式去调用相应的方法回去相应的数据。</p>
<p>Node： 主要是用于抽取的结果集合,支持正则查询,同时可以查看结果集合中的第几个</p>
<p>Page：表示文档</p>
<p>具体的代码如下:</p>
<p>Page：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div></pre></td><td class="code"><pre><div class="line">public class Page &#123;</div><div class="line">	private String html = null;</div><div class="line">	private Document doc = null;</div><div class="line">	private boolean isCanParse = false;</div><div class="line">	/**</div><div class="line">	 * 初始化网页源码为dom树结构</div><div class="line">	 */</div><div class="line">	private void initNode()&#123;</div><div class="line">		try &#123;</div><div class="line">			if(html != null &amp;&amp; html.length() &gt;= 0)&#123;</div><div class="line">				doc = Jsoup.parse(html);</div><div class="line">				isCanParse = true;</div><div class="line">			&#125;else&#123;</div><div class="line">				isCanParse = false;</div><div class="line">			&#125;</div><div class="line">		&#125; catch (Exception e) &#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	/**</div><div class="line">	 * 抽取集合</div><div class="line">	 * @return</div><div class="line">	 */</div><div class="line">	public Node $(String cssQuery)&#123;</div><div class="line">		Elements eles = doc.select(cssQuery);</div><div class="line">		Node node = new Node();</div><div class="line">		return node.$(eles);</div><div class="line">	&#125;</div><div class="line">	/**</div><div class="line">	 * 抽取网页源码中对应标签的数据</div><div class="line">	 * @param cssQuery</div><div class="line">	 * @param cssQuery</div><div class="line">	 * @return</div><div class="line">	 */</div><div class="line">	public String css(String cssQuery)&#123;</div><div class="line">		return css(cssQuery,&quot;text&quot;,&quot;&quot;);</div><div class="line">	&#125;</div><div class="line">	/**</div><div class="line">	 * 抽取网页源码中对应标签的数据</div><div class="line">	 * @param cssQuery</div><div class="line">	 * @param param</div><div class="line">	 * @return</div><div class="line">	 */</div><div class="line">	public String css(String cssQuery, String param)&#123;</div><div class="line">		return css(cssQuery,&quot;attr&quot;,param);</div><div class="line">	&#125;</div><div class="line">	/**</div><div class="line">	 * 抽取网页源码中对应标签的数据</div><div class="line">	 * @param cssQuery</div><div class="line">	 * @param method</div><div class="line">	 * @param param</div><div class="line">	 * @return</div><div class="line">	 */</div><div class="line">	public String css(String cssQuery, String method, String param)&#123;</div><div class="line">		try &#123;</div><div class="line">			Elements eles = doc.select(cssQuery);</div><div class="line">			if(eles == null || eles.size() &lt;= 0)return null;</div><div class="line">			String result = (String) ExtractorUtils.extractor(eles, method, param);</div><div class="line">			return result;</div><div class="line">		&#125; catch (Exception e) &#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125;</div><div class="line">		return null;</div><div class="line">	&#125;</div><div class="line">	/**</div><div class="line">	 * 抽取根据cssQuery查询到的标签集合中的第i个子标签的文本内容</div><div class="line">	 * @param cssQuery</div><div class="line">	 * @param index</div><div class="line">	 * @return</div><div class="line">	 */</div><div class="line">	public String css(String cssQuery, int index)&#123;</div><div class="line">		return css(cssQuery,index,&quot;text&quot;,&quot;&quot;);</div><div class="line">	&#125;</div><div class="line">	/**</div><div class="line">	 * 抽取根据cssQuery查询到的标签集合中的第i个子标签的文本内容</div><div class="line">	 * @param cssQuery</div><div class="line">	 * @param index</div><div class="line">	 * @param param</div><div class="line">	 * @return</div><div class="line">	 */</div><div class="line">	public String css(String cssQuery, int index, String param)&#123;</div><div class="line">		return css(cssQuery,index,&quot;attr&quot;,param);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	/**</div><div class="line">	 * 最总的根方法</div><div class="line">	 * @param cssQuery</div><div class="line">	 * @param index</div><div class="line">	 * @param method</div><div class="line">	 * @param param</div><div class="line">     * @return</div><div class="line">     */</div><div class="line">	public String css(String cssQuery, int index, String method, String param)&#123;</div><div class="line">		try &#123;</div><div class="line">			Elements eles = doc.select(cssQuery);</div><div class="line">			if(eles == null || eles.size() &lt;= 0)return null;</div><div class="line">			if(index &lt;= 0 || index &gt;= eles.size())return null;</div><div class="line">			Element ele = eles.get(index);</div><div class="line">			if(ele == null || ele.toString().length() &lt;= 0)return null;</div><div class="line">			String result = (String)ExtractorUtils.extractor(ele.getAllElements(), method, param);</div><div class="line">			return result;</div><div class="line">		&#125; catch (Exception e) &#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125;</div><div class="line">		return null;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	public String getHtml() &#123;</div><div class="line">		return html;</div><div class="line">	&#125;</div><div class="line">	public Page setHtml(String html) &#123;</div><div class="line">		this.html = html;</div><div class="line">		initNode();</div><div class="line">		return this;</div><div class="line">	&#125;</div><div class="line">	/**</div><div class="line">	 * 判定是否可以进行解析</div><div class="line">	 * @return</div><div class="line">     */</div><div class="line">	public boolean isCanParse()&#123;</div><div class="line">		return this.isCanParse;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Node：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div></pre></td><td class="code"><pre><div class="line">public class Node implements List&lt;Object&gt; &#123;</div><div class="line">    /**</div><div class="line">     * 存储该标签所有的子标签</div><div class="line">     */</div><div class="line">    private List&lt;Object&gt; list = new ArrayList&lt;Object&gt;();</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 将抽取到的添加到集合中</div><div class="line">     *</div><div class="line">     * @param eles</div><div class="line">     */</div><div class="line">    public Node $(Elements eles) &#123;</div><div class="line">        for (Element ele : eles) &#123;</div><div class="line">            list.add(ele);</div><div class="line">        &#125;</div><div class="line">        return this;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 通过cssQuery查询语句来获取结果集合</div><div class="line">     * 对结果集合中重复的数据在进行解析</div><div class="line">     *</div><div class="line">     * @param index</div><div class="line">     * @param cssQuery</div><div class="line">     * @return</div><div class="line">     */</div><div class="line">    public Object $(int index, String cssQuery) &#123;</div><div class="line">        if (index &gt;= list.size()) return null;</div><div class="line">        Elements eles = ((Element) list.get(index)).select(cssQuery);</div><div class="line">        if (eles == null) return null;</div><div class="line">        Node domNode = new Node();</div><div class="line">        domNode.$(eles);</div><div class="line">        return domNode;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 获取标签内容</div><div class="line">     *</div><div class="line">     * @param index    对象list集合中的下标</div><div class="line">     * @param cssQuery 查询语句</div><div class="line">     * @return</div><div class="line">     */</div><div class="line">    public String css(int index, String cssQuery) &#123;</div><div class="line">        return css(index, cssQuery, &quot;text&quot;, &quot;&quot;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 获取标签内容</div><div class="line">     *</div><div class="line">     * @param index    对象list集合中的下标</div><div class="line">     * @param cssQuery 查询语句</div><div class="line">     * @param subIndex css查询结果集合中的下标</div><div class="line">     * @return</div><div class="line">     */</div><div class="line">    public String css(int index, String cssQuery, int subIndex) &#123;</div><div class="line">        return css(index, cssQuery, subIndex, &quot;text&quot;, &quot;&quot;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 获取属性值</div><div class="line">     *</div><div class="line">     * @param index    对象list集合中的下标</div><div class="line">     * @param cssQuery 查询语句</div><div class="line">     * @param attr     属性名称</div><div class="line">     * @return</div><div class="line">     */</div><div class="line">    public String css(int index, String cssQuery, String attr) &#123;</div><div class="line">        return css(index, cssQuery, &quot;attr&quot;, attr);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 根据给定的参数获取属性值</div><div class="line">     *</div><div class="line">     * @param index    对象list集合中的下标</div><div class="line">     * @param cssQuery 查询语句</div><div class="line">     * @param attr     属性名称</div><div class="line">     * @param subIndex css查询结果集合中的下标</div><div class="line">     * @return</div><div class="line">     */</div><div class="line">    public String css(int index, String cssQuery, int subIndex, String attr) &#123;</div><div class="line">        return css(index, cssQuery, subIndex, &quot;attr&quot;, attr);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 获取根据cssQuery查询出来的结果标签</div><div class="line">     * 通过正则抽取其中的特定值</div><div class="line">     *</div><div class="line">     * @param index</div><div class="line">     * @param cssQuery</div><div class="line">     * @param regex</div><div class="line">     * @return</div><div class="line">     */</div><div class="line">    public String regex(int index, String cssQuery, String regex) &#123;</div><div class="line">        return css(index, cssQuery, &quot;regex&quot;, regex);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 根据给定的下标,cssQuery执行相应的方法和参数</div><div class="line">     * 获取执行的值</div><div class="line">     *</div><div class="line">     * @param index</div><div class="line">     * @param cssQuery</div><div class="line">     * @param method</div><div class="line">     * @param param</div><div class="line">     * @return</div><div class="line">     */</div><div class="line">    public String css(int index, String cssQuery, String method, String param) &#123;</div><div class="line">        Elements ele = null;</div><div class="line">//		如果查询语句为空,则默认查询的为本标签</div><div class="line">        if (index &gt;= list.size()) return null;</div><div class="line">        Element node = (Element) list.get(index);</div><div class="line">        if (cssQuery == null || &quot;&quot;.equals(cssQuery)) &#123;</div><div class="line">            ele = node.getAllElements();</div><div class="line">        &#125; else &#123;</div><div class="line">            ele = node.select(cssQuery);</div><div class="line">        &#125;</div><div class="line">        if (ele == null || ele.toString().length() &lt;= 0) return null;</div><div class="line">        String result = null;</div><div class="line">        if (&quot;regex&quot;.equals(method)) &#123;</div><div class="line">            result = ExtractorUtils.extractor(ele.html(), param);</div><div class="line">        &#125; else &#123;</div><div class="line">            result = (String) ExtractorUtils.extractor(ele, method, param);</div><div class="line">        &#125;</div><div class="line">        return result;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 通过给定的下标以及cssQuery查询语句</div><div class="line">     * 执行相应的方法获取相应的值</div><div class="line">     *</div><div class="line">     * @param index</div><div class="line">     * @param cssQuery</div><div class="line">     * @param cindex</div><div class="line">     * @param method</div><div class="line">     * @param param</div><div class="line">     * @return</div><div class="line">     */</div><div class="line">    public String css(int index, String cssQuery, int cindex, String method, String param) &#123;</div><div class="line">        Element ele = null;</div><div class="line">//		如果查询语句为空,则默认查询的为本标签</div><div class="line">        if (index &gt;= list.size()) return null;</div><div class="line">        Element node = (Element) list.get(index);</div><div class="line">        Elements eles = node.select(cssQuery);</div><div class="line">        if (eles == null || eles.size() &lt;= 0) return null;</div><div class="line">        ele = eles.get(cindex);</div><div class="line">        if (ele == null || ele.toString().length() &lt;= 0) return null;</div><div class="line">        String result = null;</div><div class="line">        if (&quot;regex&quot;.equals(method)) &#123;</div><div class="line">            result = ExtractorUtils.extractor(ele.html(), param);</div><div class="line">        &#125; else &#123;</div><div class="line">            result = (String) ExtractorUtils.extractor(ele.getAllElements(), method, param);</div><div class="line">        &#125;</div><div class="line">        return result;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 判断满足cssQuery查询语句的标签是否存在</div><div class="line">     * 存在：返回1</div><div class="line">     * 不存在：返回0</div><div class="line">     *</div><div class="line">     * @param index</div><div class="line">     * @param cssQuery</div><div class="line">     * @return</div><div class="line">     */</div><div class="line">    public int isExit(int index, String cssQuery) &#123;</div><div class="line">        Elements ele = ((Element) list.get(index)).select(cssQuery);</div><div class="line">        if (ele != null &amp;&amp; ele.size() &gt; 0) return 1;</div><div class="line">        return 0;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 获取某个节点的网页源码</div><div class="line">     * @param index</div><div class="line">     * @return</div><div class="line">     */</div><div class="line">    public String getSrc(int index)&#123;</div><div class="line">        Element ele = ((Element) list.get(index));</div><div class="line">        return ele.html();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public int size() &#123;</div><div class="line">        return list.size();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public boolean isEmpty() &#123;</div><div class="line">        return list.isEmpty();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public boolean contains(Object o) &#123;</div><div class="line">        return list.contains(o);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public Iterator&lt;Object&gt; iterator() &#123;</div><div class="line">        return list.iterator();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public Object[] toArray() &#123;</div><div class="line">        return list.toArray();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public &lt;T&gt; T[] toArray(T[] a) &#123;</div><div class="line">        return list.toArray(a);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public boolean add(Object e) &#123;</div><div class="line">        return list.add(e);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public boolean remove(Object o) &#123;</div><div class="line">        return list.remove(o);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public boolean containsAll(Collection&lt;?&gt; c) &#123;</div><div class="line">        return list.containsAll(c);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public boolean addAll(Collection&lt;? extends Object&gt; c) &#123;</div><div class="line">        return list.addAll(c);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public boolean addAll(int index, Collection&lt;? extends Object&gt; c) &#123;</div><div class="line">        return list.addAll(index, c);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public boolean removeAll(Collection&lt;?&gt; c) &#123;</div><div class="line">        return list.removeAll(c);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public boolean retainAll(Collection&lt;?&gt; c) &#123;</div><div class="line">        return list.retainAll(c);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void clear() &#123;</div><div class="line">        list.clear();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public Object get(int index) &#123;</div><div class="line">        return list.get(index);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public Object set(int index, Object element) &#123;</div><div class="line">        return list.set(index, element);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void add(int index, Object element) &#123;</div><div class="line">        list.add(index, element);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public Object remove(int index) &#123;</div><div class="line">        return list.remove(index);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public int indexOf(Object o) &#123;</div><div class="line">        return list.indexOf(o);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public int lastIndexOf(Object o) &#123;</div><div class="line">        return list.lastIndexOf(o);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public ListIterator&lt;Object&gt; listIterator() &#123;</div><div class="line">        return list.listIterator();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public ListIterator&lt;Object&gt; listIterator(int index) &#123;</div><div class="line">        return list.listIterator(index);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public List&lt;Object&gt; subList(int fromIndex, int toIndex) &#123;</div><div class="line">        return list.subList(fromIndex, toIndex);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ExtractorUtils:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">public class ExtractorUtils &#123;</div><div class="line">	public static Object extractor(Elements ele, String method, String key)&#123;</div><div class="line">		Method func = null;</div><div class="line">		try &#123;</div><div class="line">			if(key == null || &quot;&quot;.equals(key))&#123;</div><div class="line">				func = ele.getClass().getDeclaredMethod(method);</div><div class="line">				return func.invoke(ele);</div><div class="line">			&#125;else&#123;</div><div class="line">				func = ele.getClass().getDeclaredMethod(method,String.class);</div><div class="line">				return func.invoke(ele, key);</div><div class="line">			&#125;</div><div class="line">		&#125; catch (SecurityException e) &#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125; catch (NoSuchMethodException e) &#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125; catch (IllegalArgumentException e) &#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125; catch (IllegalAccessException e) &#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125; catch (InvocationTargetException e) &#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125;</div><div class="line">		return null;</div><div class="line">	&#125;</div><div class="line">	public static String extractor(String dom,String regex)&#123;</div><div class="line">		if(dom == null || &quot;&quot;.equals(dom))return null;</div><div class="line">		Pattern p = Pattern.compile(regex);</div><div class="line">		Matcher m = p.matcher(dom.trim());</div><div class="line">		if(m.find())return m.group(1);</div><div class="line">		return null;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="4-jsoup的原理"><a href="#4-jsoup的原理" class="headerlink" title="4 jsoup的原理"></a>4 jsoup的原理</h2><h3 id="4-1-jsoup的源码"><a href="#4-1-jsoup的源码" class="headerlink" title="4.1 jsoup的源码"></a>4.1 jsoup的源码</h3><p>jsoup源码中的解析主要代码如下:</p>
<p>com.sun.jsoup.parser.TreeBuilder</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">protected void runParser() &#123;</div><div class="line">    while (true) &#123;</div><div class="line">        Token token = tokeniser.read();</div><div class="line">        process(token);</div><div class="line"></div><div class="line">        if (token.type == Token.TokenType.EOF)</div><div class="line">            break;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>读取的过程主要是tokeniser读取一个单词,state.read(this,reader);这个过程是一个状态转移过程,其中第一个为状态码,状态吗对应的值为:TokeniserState.Data. 下面代码为read方法和Tokeniser中实例变量。</p>
<p>com.sun.jsoup.parser.Tokeniser</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">static final char replacementChar = &apos;\uFFFD&apos;; // replaces null character</div><div class="line"></div><div class="line">   private CharacterReader reader; // html input</div><div class="line">   private ParseErrorList errors; // errors found while tokenising</div><div class="line"></div><div class="line">   private TokeniserState state = TokeniserState.Data; // current tokenisation state</div><div class="line">   private Token emitPending; // the token we are about to emit on next read</div><div class="line">   private boolean isEmitPending = false;</div><div class="line">   private StringBuilder charBuffer = new StringBuilder(); // buffers characters to output as one token</div><div class="line">   StringBuilder dataBuffer; // buffers data looking for &lt;/script&gt;</div><div class="line"></div><div class="line">   Token.Tag tagPending; // tag we are building up</div><div class="line">   Token.Doctype doctypePending; // doctype building up</div><div class="line">   Token.Comment commentPending; // comment building up</div><div class="line">   private Token.StartTag lastStartTag; // the last start tag emitted, to test appropriate end tag</div><div class="line">   private boolean selfClosingFlagAcknowledged = true;</div><div class="line"></div><div class="line">   Token read() &#123;</div><div class="line">       if (!selfClosingFlagAcknowledged) &#123;</div><div class="line">           error(&quot;Self closing flag not acknowledged&quot;);</div><div class="line">           selfClosingFlagAcknowledged = true;</div><div class="line">       &#125;</div><div class="line"></div><div class="line">       while (!isEmitPending)</div><div class="line">           state.read(this, reader);</div><div class="line"></div><div class="line">       // if emit is pending, a non-character token was found: return any chars in buffer, and leave token for next read:</div><div class="line">       if (charBuffer.length() &gt; 0) &#123;</div><div class="line">           String str = charBuffer.toString();</div><div class="line">           charBuffer.delete(0, charBuffer.length());</div><div class="line">           return new Token.Character(str);</div><div class="line">       &#125; else &#123;</div><div class="line">           isEmitPending = false;</div><div class="line">           return emitPending;</div><div class="line">       &#125;</div><div class="line">   &#125;</div></pre></td></tr></table></figure>
<p>状态转移在jsoup中使用的是枚举类型来实现的,通过上面的可以看到,第一次解析网页为dom树的时候是Data类型,在枚举类：com.sun.jsoup.parser.TokeniserState 中Data状态对应的代码如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">Data &#123;</div><div class="line">       // in data state, gather characters until a character reference or tag is found</div><div class="line">       void read(Tokeniser t, CharacterReader r) &#123;</div><div class="line">           switch (r.current()) &#123;</div><div class="line">               case &apos;&amp;&apos;:</div><div class="line">                   t.advanceTransition(CharacterReferenceInData);</div><div class="line">                   break;</div><div class="line">               case &apos;&lt;&apos;:</div><div class="line">                   t.advanceTransition(TagOpen);</div><div class="line">                   break;</div><div class="line">               case nullChar:</div><div class="line">                   t.error(this); // NOT replacement character (oddly?)</div><div class="line">                   t.emit(r.consume());</div><div class="line">                   break;</div><div class="line">               case eof:</div><div class="line">                   t.emit(new Token.EOF());</div><div class="line">                   break;</div><div class="line">               default:</div><div class="line">                   String data = r.consumeToAny(&apos;&amp;&apos;, &apos;&lt;&apos;, nullChar);</div><div class="line">                   t.emit(data);</div><div class="line">                   break;</div><div class="line">           &#125;</div><div class="line">       &#125;</div><div class="line">   &#125;,</div></pre></td></tr></table></figure>
<p>通过上面的整个过程可以看到通过不同的条件,跳转到不同的状态中执行不同的代码.比如获取tageName的代码如下:</p>
<p><img src="/images/jsoup/jsoup-parse.png" alt=""></p>
<p>上面这些都是读取数据,同样的构建树形结构是通过类:com.sun.jsoup.parser.HtmlTreeBuilder. 这个地方也是通过状态转移比较的方式来构建属性结果,封装节点。</p>
<p>代码如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">@Override</div><div class="line">protected boolean process(Token token) &#123;</div><div class="line">    currentToken = token;</div><div class="line">    return this.state.process(token, this);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>状态类为:com.sun.jsoup.parser.HtmlTreeBuilderState,初始状态的代码如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">Initial &#123;</div><div class="line">        boolean process(Token t, HtmlTreeBuilder tb) &#123;</div><div class="line">            if (isWhitespace(t)) &#123;</div><div class="line">                return true; // ignore whitespace</div><div class="line">            &#125; else if (t.isComment()) &#123;</div><div class="line">                tb.insert(t.asComment());</div><div class="line">            &#125; else if (t.isDoctype()) &#123;</div><div class="line">                // todo: parse error check on expected doctypes</div><div class="line">                // todo: quirk state check on doctype ids</div><div class="line">                Token.Doctype d = t.asDoctype();</div><div class="line">                DocumentType doctype = new DocumentType(d.getName(), d.getPublicIdentifier(), d.getSystemIdentifier(), tb.getBaseUri());</div><div class="line">                tb.getDocument().appendChild(doctype);</div><div class="line">                if (d.isForceQuirks())</div><div class="line">                    tb.getDocument().quirksMode(Document.QuirksMode.quirks);</div><div class="line">                tb.transition(BeforeHtml);</div><div class="line">            &#125; else &#123;</div><div class="line">                // todo: check not iframe srcdoc</div><div class="line">                tb.transition(BeforeHtml);</div><div class="line">                return tb.process(t); // re-process token</div><div class="line">            &#125;</div><div class="line">            return true;</div><div class="line">        &#125;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>有限状态机:（英语：finite-state machine，缩写：FSM）又称有限状态自动机，简称状态机，是表示有限个状态以及在这些状态之间的转移和动作等行为的数学模型。</p>
<h3 id="4-2-jsoup的查询"><a href="#4-2-jsoup的查询" class="headerlink" title="4.2 jsoup的查询"></a>4.2 jsoup的查询</h3><p>jsoup的查询抽取主要是通过解析过程从dom树中读取数据,主要的代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * Parse the query</div><div class="line"> * @return Evaluator</div><div class="line"> */</div><div class="line">Evaluator parse() &#123;</div><div class="line">    tq.consumeWhitespace();</div><div class="line"></div><div class="line">    if (tq.matchesAny(combinators)) &#123; // if starts with a combinator, use root as elements</div><div class="line">        evals.add(new StructuralEvaluator.Root());</div><div class="line">        combinator(tq.consume());</div><div class="line">    &#125; else &#123;</div><div class="line">        findElements();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    while (!tq.isEmpty()) &#123;</div><div class="line">        // hierarchy and extras</div><div class="line">        boolean seenWhite = tq.consumeWhitespace();</div><div class="line"></div><div class="line">        if (tq.matchesAny(combinators)) &#123;</div><div class="line">            combinator(tq.consume());</div><div class="line">        &#125; else if (seenWhite) &#123;</div><div class="line">            combinator(&apos; &apos;);</div><div class="line">        &#125; else &#123; // E.class, E#id, E[attr] etc. AND</div><div class="line">            findElements(); // take next el, #. etc off queue</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    if (evals.size() == 1)</div><div class="line">        return evals.get(0);</div><div class="line"></div><div class="line">    return new CombiningEvaluator.And(evals);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/05/spider-study005/" itemprop="url">
                  网络爬虫学习笔记(五) 爬虫分布式
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-07-05T11:55:55+08:00" content="2016-07-05">
              2016-07-05
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/爬虫/" itemprop="url" rel="index">
                    <span itemprop="name">爬虫</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/07/05/spider-study005/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/07/05/spider-study005/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>针对爬虫来说,当我需要抓取大量数据的同时又要求速度的情况下,通常使用分布式进行开发</p>
</blockquote>
<p>爬虫的分布式主要分为两类：</p>
<pre><code>1 主从分布式
2 对等分布式
</code></pre><p>主从分布式:主要是一台服务端和多台客户端的模式,也就是服务端负责任务的分发等操作,客户端做主要的解析等操作,这一类的任务分工明确。</p>
<p>对等分布式:主要是没有服务端的概念,每天机器都参与下载抓取等动作,每台机器都是相同的角色,每台机器去数据库中读取分配给自己的带抓取的链接地址,进行抓取和存储等操作。</p>
<h1 id="1-主从分布式"><a href="#1-主从分布式" class="headerlink" title="1 主从分布式"></a>1 主从分布式</h1><p>主从分布式开发模式有很多,简单的socket,rpc,开源分布式框架,中间件等等都可以做,下面开始依次简单实现：</p>
<h2 id="1-简单socket分布式"><a href="#1-简单socket分布式" class="headerlink" title="1 简单socket分布式"></a>1 简单socket分布式</h2><p>服务端：主要做3个动作,接收客户端的链接,向客户端发送数据,检测客户端是否掉线。这些操作基本就可以实现主从分布式了,服务端通过从一个缓存中读取数据,在检测该分配给那个客户端,检测好以后将这个数据发送出去。代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div></pre></td><td class="code"><pre><div class="line">public class MyServer &#123;</div><div class="line">    //服务端端口</div><div class="line">    private int port = 10010;</div><div class="line">    //服务端</div><div class="line">    private ServerSocket server = null;</div><div class="line">    //客户端链接集合</div><div class="line">    private Vector&lt;Connection&gt; clients = new Vector&lt;&gt;();</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 启动服务端</div><div class="line">     */</div><div class="line">    public MyServer start()&#123;</div><div class="line">        new Thread(new Runnable() &#123;</div><div class="line">            @Override</div><div class="line">            public void run() &#123;</div><div class="line">                try&#123;</div><div class="line">                    server = new ServerSocket(port);</div><div class="line">                    //循环遍历获取客户端链接</div><div class="line">                    while(true)&#123;</div><div class="line">                        System.out.println(&quot;服务端等待客户端链接...&quot;);</div><div class="line">                        Socket socket = server.accept();</div><div class="line"></div><div class="line">                        //封装对象存储到集合中</div><div class="line">                        Connection connection = new Connection();</div><div class="line">                        connection.setSocket(socket);</div><div class="line">                        connection.setIp(socket.getInetAddress().getHostAddress());</div><div class="line"></div><div class="line">                        clients.add(connection);</div><div class="line"></div><div class="line">                        System.out.println(&quot;客户端(&quot; + connection.getIp() + &quot;)已经链接..&quot;);</div><div class="line">                    &#125;</div><div class="line">                &#125;catch (Exception e)&#123;</div><div class="line">                    e.printStackTrace();</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;).start();</div><div class="line">        return this;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 发送数据</div><div class="line">     */</div><div class="line">    public MyServer sendData()&#123;</div><div class="line">        new Thread(new Runnable() &#123;</div><div class="line">            @Override</div><div class="line">            public void run() &#123;</div><div class="line">                while(true)&#123;</div><div class="line">                    try&#123;</div><div class="line">                        //获取数据</div><div class="line">                        String data = getData();</div><div class="line"></div><div class="line">                        for(Connection conn : clients)&#123;</div><div class="line">                            sendData(conn,data + conn.getIp());</div><div class="line">                        &#125;</div><div class="line">                        //线程休眠</div><div class="line">                        Thread.sleep(3000);</div><div class="line">                    &#125;catch (Exception e)&#123;</div><div class="line">                        e.printStackTrace();</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;).start();</div><div class="line">        return this;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 获取数据</div><div class="line">     * @return</div><div class="line">     */</div><div class="line">    public String getData()&#123;</div><div class="line">        return UUID.randomUUID().toString();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 发送数据</div><div class="line">     * @param connection</div><div class="line">     * @param data</div><div class="line">     */</div><div class="line">    public void sendData(Connection connection,String data)&#123;</div><div class="line">        try&#123;</div><div class="line">            Socket socket = connection.getSocket();</div><div class="line">            BufferedWriter os = new BufferedWriter(new OutputStreamWriter(socket.getOutputStream()));</div><div class="line">            os.write(data);</div><div class="line">            os.newLine();// 客户端是按行读取的,所以这里要新开一行,否则客户端认为一行没有结束,会一直等待一行数据写入完成</div><div class="line">            os.flush();</div><div class="line">        &#125;catch (Exception e)&#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     *</div><div class="line">     * @return</div><div class="line">     */</div><div class="line">    public BufferedWriter getWriter(Socket socket) throws  Exception&#123;</div><div class="line">        return new BufferedWriter(new OutputStreamWriter(socket.getOutputStream()));</div><div class="line">    &#125;</div><div class="line">    /**</div><div class="line">     * 检测客户端是否还在线</div><div class="line">     */</div><div class="line">    public MyServer check()&#123;</div><div class="line">        new Thread(new Runnable() &#123;</div><div class="line">            @Override</div><div class="line">            public void run() &#123;</div><div class="line">                while(true)&#123;</div><div class="line">                    try&#123;</div><div class="line">                        for(Connection conn : clients)&#123;</div><div class="line">                            try&#123;</div><div class="line">                                conn.getSocket().sendUrgentData(0xff);</div><div class="line">                            &#125;catch (IOException e)&#123;</div><div class="line">                                e.printStackTrace();</div><div class="line">                                //出现异常说明客户端已经断开链接</div><div class="line">                                clients.remove(conn);</div><div class="line">                                System.out.println(&quot;客户端(&quot; + conn.getIp() + &quot;)已经断开链接...&quot;);</div><div class="line">                            &#125;</div><div class="line">                        &#125;</div><div class="line">                        //线程休眠</div><div class="line">                        Thread.sleep(3000);</div><div class="line">                    &#125;catch (Exception e)&#123;</div><div class="line">                        e.printStackTrace();</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;).start();</div><div class="line">        return this;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * server main</div><div class="line">     * @param args</div><div class="line">     */</div><div class="line">    public static void main(String[] args)&#123;</div><div class="line">        MyServer server = new MyServer();</div><div class="line">        server.start().check().sendData();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>其中connection是对客户端连接的管理,具体的代码如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">public class Connection &#123;</div><div class="line">    //客户端的链接socket</div><div class="line">    private Socket socket;</div><div class="line">    private String ip;</div><div class="line"></div><div class="line">        public Socket getSocket() &#123;</div><div class="line">        return socket;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void setSocket(Socket socket) &#123;</div><div class="line">        this.socket = socket;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public String getIp() &#123;</div><div class="line">        return ip;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void setIp(String ip) &#123;</div><div class="line">        this.ip = ip;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>客户端的代码就简单了,连接上服务端,从服务端读取数据后进行展示,代码如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line">public class MyClient &#123;</div><div class="line">    //服务端对应的地址和断开</div><div class="line">    private String ip = &quot;127.0.0.1&quot;;</div><div class="line">    private int port = 10010;</div><div class="line"></div><div class="line">    //客户端socket</div><div class="line">    private Socket socket = null;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 启动服务</div><div class="line">     */</div><div class="line">    public MyClient start()&#123;</div><div class="line">        try&#123;</div><div class="line">            socket = new Socket(ip,port);</div><div class="line">        &#125;catch (Exception e)&#123;</div><div class="line">            e.printStackTrace();</div><div class="line">            System.out.println(&quot;链接服务端失败...&quot;);</div><div class="line">        &#125;</div><div class="line">        return this;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public MyClient getData()&#123;</div><div class="line">        new Thread(new Runnable() &#123;</div><div class="line">            @Override</div><div class="line">            public void run() &#123;</div><div class="line">                while(true)&#123;</div><div class="line">                    try&#123;</div><div class="line">                        BufferedReader br = getReader(socket);</div><div class="line"></div><div class="line">                        System.out.println(br.readLine());</div><div class="line"></div><div class="line">                        Thread.sleep(3000);</div><div class="line">                    &#125;catch (Exception e)&#123;</div><div class="line">                        e.printStackTrace();</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;).start();</div><div class="line">        return this;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public BufferedReader getReader(Socket socket) throws Exception&#123;</div><div class="line">        return new BufferedReader( new InputStreamReader(socket.getInputStream()));</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     *</div><div class="line">     * @param args</div><div class="line">     */</div><div class="line">    public static void main(String[] args)&#123;</div><div class="line">       new MyClient().start().getData();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="2-mina"><a href="#2-mina" class="headerlink" title="2 mina"></a>2 mina</h2><p>上面做了简单的分布式的实现,下面介绍一个基于NIO的分布式框架mina,mina的简单分布式开发。</p>
<p>服务端的代码实现:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div></pre></td><td class="code"><pre><div class="line">public class MinaServer &#123;</div><div class="line">    // 服务端开启的端口</div><div class="line">    private int port = 10010;</div><div class="line">    //读取数据的缓冲区的大小</div><div class="line">    private int bufferSize = 4096;</div><div class="line">    //读取通道内空闲时间</div><div class="line">    private int idleTime = 10;</div><div class="line">    // 用于接收客户端的链接</div><div class="line">    private IoAcceptor acceptor = null;</div><div class="line"></div><div class="line">    //客户端队列</div><div class="line">    private ConcurrentHashMap&lt;String,MConnect&gt; maps = new ConcurrentHashMap&lt;&gt;();</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 启动服务端</div><div class="line">     * @return</div><div class="line">     */</div><div class="line">    public MinaServer runServer()&#123;</div><div class="line">        try&#123;</div><div class="line">            acceptor = new NioSocketAcceptor();</div><div class="line"></div><div class="line">            // 设置过滤器</div><div class="line">            acceptor.getFilterChain().addLast(&quot;logger&quot;, new LoggingFilter());</div><div class="line">            acceptor.getFilterChain().addLast(&quot;codec&quot;, new ProtocolCodecFilter(</div><div class="line">                    new ObjectSerializationCodecFactory()));</div><div class="line">            //设置读取数据的缓冲区的大小</div><div class="line">            acceptor.getSessionConfig().setReadBufferSize(bufferSize);</div><div class="line">            //读取通道一定时间内无操作,系统就进入空闲状态</div><div class="line">            acceptor.getSessionConfig().setIdleTime(IdleStatus.BOTH_IDLE, idleTime);</div><div class="line">            //绑定数据处理器</div><div class="line">            acceptor.setHandler(new ServerHandler().addServer(this));</div><div class="line">            //绑定端口</div><div class="line">            acceptor.bind(new InetSocketAddress(port));</div><div class="line">            System.err.println(&quot;服务器启动成功,端口号为:&quot; + port);</div><div class="line">        &#125;catch (Exception e)&#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">        return this;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 发送数据</div><div class="line">     *</div><div class="line">     * 每隔一段时间向客户端发送一次数据</div><div class="line">     */</div><div class="line">    public void sendData()&#123;</div><div class="line">        new Thread(new Runnable() &#123;</div><div class="line">            @Override</div><div class="line">            public void run() &#123;</div><div class="line">                while(true)&#123;</div><div class="line">                    try&#123;</div><div class="line">                        for(Map.Entry&lt;String,MConnect&gt; entry : maps.entrySet())&#123;</div><div class="line">                            MConnect mc = entry.getValue();</div><div class="line">                            sendData(mc);</div><div class="line">                        &#125;</div><div class="line">                        Thread.sleep(1000);</div><div class="line">                    &#125;catch (Exception e)&#123;</div><div class="line">                        e.printStackTrace();</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;).start();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 发送数据</div><div class="line">     * @param mc</div><div class="line">     */</div><div class="line">    public void sendData(MConnect mc)&#123;</div><div class="line">        boolean flag = mc.getSession().isClosing() || !mc.getSession().isConnected();</div><div class="line">        if(!flag)&#123;</div><div class="line">            String data = UUID.randomUUID().toString();</div><div class="line"></div><div class="line">            mc.getSession().write(data);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 添加数据</div><div class="line">     * @param connect</div><div class="line">     */</div><div class="line">    public void addConnect(MConnect connect)&#123;</div><div class="line">        if(!maps.containsKey(connect.getIp()))&#123;</div><div class="line">            maps.put(connect.getIp(),connect);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 删除摸个客户端</div><div class="line">     * @param ip</div><div class="line">     */</div><div class="line">    public void remove(String ip)&#123;</div><div class="line">        if(maps.containsKey(ip))&#123;</div><div class="line">            maps.remove(ip);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 主要用于处理服务端和客户端的通信</div><div class="line">     */</div><div class="line">    private class ServerHandler extends IoHandlerAdapter&#123;</div><div class="line">        //服务端</div><div class="line">        private MinaServer server = null;</div><div class="line"></div><div class="line">        /**</div><div class="line">         * 绑定服务端</div><div class="line">         * @param server</div><div class="line">         * @return</div><div class="line">         */</div><div class="line">        public ServerHandler addServer(MinaServer server )&#123;</div><div class="line">            this.server = server;</div><div class="line">            return this;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        @Override</div><div class="line">        public void sessionCreated(IoSession session) throws Exception &#123;</div><div class="line">            String ip = ((InetSocketAddress)session.getRemoteAddress()).getAddress().getHostAddress();</div><div class="line">            MConnect mc = new MConnect();</div><div class="line">            mc.setIp(ip);</div><div class="line">            mc.setSession(session);</div><div class="line"></div><div class="line">            this.server.addConnect(mc);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        @Override</div><div class="line">        public void sessionOpened(IoSession session) throws Exception &#123;</div><div class="line">            super.sessionOpened(session);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        @Override</div><div class="line">        public void sessionClosed(IoSession session) throws Exception &#123;</div><div class="line">            String IP = (String) session.getAttribute(&quot;IP&quot;);</div><div class="line"></div><div class="line">            //该客户端的链接已经失效了,将删除该链接</div><div class="line">            this.server.remove(IP);</div><div class="line"></div><div class="line">            System.err.println(&quot;服务端将移除客户端：&quot; + IP);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        @Override</div><div class="line">        public void sessionIdle(IoSession session, IdleStatus status) throws Exception &#123;</div><div class="line">            super.sessionIdle(session, status);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        @Override</div><div class="line">        public void exceptionCaught(IoSession session, Throwable cause) throws Exception &#123;</div><div class="line">            super.exceptionCaught(session, cause);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        @Override</div><div class="line">        public void messageReceived(IoSession session, Object message) throws Exception &#123;</div><div class="line">            super.messageReceived(session, message);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        @Override</div><div class="line">        public void messageSent(IoSession session, Object message) throws Exception &#123;</div><div class="line">            super.messageSent(session, message);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * mina server</div><div class="line">     * @param args</div><div class="line">     */</div><div class="line">    public static void main(String[] args)&#123;</div><div class="line">        MinaServer server = new MinaServer();</div><div class="line"></div><div class="line">        server.runServer().sendData();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>客户端的代码如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div></pre></td><td class="code"><pre><div class="line">public class MinaClient &#123;</div><div class="line">    // 服务端对应的ip以及端口</div><div class="line">    private String sip = &quot;127.0.0.1&quot;;</div><div class="line">    private int sport = 10010;</div><div class="line">    //服务器端的配置信息</div><div class="line">    private long timeOut = 6000;</div><div class="line">    private NioSocketConnector connector = null;</div><div class="line">    //绑定当前的session</div><div class="line">    private IoSession session = null;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 启动客户端</div><div class="line">     *</div><div class="line">     * @return</div><div class="line">     */</div><div class="line">    public MinaClient runClient() &#123;</div><div class="line">        try &#123;</div><div class="line">            // 创建链接对象</div><div class="line">            connector = new NioSocketConnector();</div><div class="line">            // 设置超时设置</div><div class="line">            connector.setConnectTimeoutMillis(timeOut);</div><div class="line">            // 绑定过滤器</div><div class="line">            connector.getFilterChain().addLast(&quot;codec&quot;,</div><div class="line">                    new ProtocolCodecFilter(new ObjectSerializationCodecFactory()));</div><div class="line">            connector.getSessionConfig().setSendBufferSize(4096);</div><div class="line">            connector.getSessionConfig().setReadBufferSize(4096);</div><div class="line">            //添加业务逻辑处理器类</div><div class="line">            connector.setHandler(new ClientDataHandler().addClient(this));</div><div class="line">            //链接到对象</div><div class="line">            ConnectFuture future = connector.connect(new InetSocketAddress(sip, sport));</div><div class="line">            //等待连接完成</div><div class="line">            future.awaitUninterruptibly();</div><div class="line">            session = future.getSession();</div><div class="line">        &#125; catch (Exception e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">        //检测客户端链接</div><div class="line">        checkConnection();</div><div class="line"></div><div class="line">        return this;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void checkConnection()&#123;</div><div class="line">        new Thread(new Runnable() &#123;</div><div class="line">            @Override</div><div class="line">            public void run() &#123;</div><div class="line">                while(true)&#123;</div><div class="line">                    try &#123;</div><div class="line">                        if (!session.isConnected()||session.isClosing()) &#123;</div><div class="line">                            System.out.println(&quot;与服务器的连接中断，尝试重新连接......&quot;);</div><div class="line">                            try &#123;</div><div class="line">                                ConnectFuture future = connector</div><div class="line">                                        .connect(new InetSocketAddress(sip, sport));</div><div class="line">                                future.awaitUninterruptibly();</div><div class="line">                                session = future.getSession();</div><div class="line">                            &#125;</div><div class="line">                            catch (RuntimeIoException e) &#123;</div><div class="line">                                System.out.println(&quot;本次与服务器重新连接失败，等待下次连接！&quot;);</div><div class="line">                            &#125;</div><div class="line">                        &#125;</div><div class="line"></div><div class="line">                        Thread.sleep(5000);</div><div class="line">                    &#125; catch (InterruptedException e1) &#123;</div><div class="line">                        e1.printStackTrace();</div><div class="line">                    &#125;</div><div class="line"></div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;).start();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 处理客户端接收消息的数据</div><div class="line">     */</div><div class="line">    public class ClientDataHandler extends IoHandlerAdapter&#123;</div><div class="line">        //客户端对象</div><div class="line">        private MinaClient client = null;</div><div class="line"></div><div class="line">        /**</div><div class="line">         * 客户端的对象</div><div class="line">         * @param client</div><div class="line">         * @return</div><div class="line">         */</div><div class="line">        public ClientDataHandler addClient(MinaClient client)&#123;</div><div class="line">            this.client = client;</div><div class="line">            return this;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        @Override</div><div class="line">        public void sessionCreated(IoSession session) throws Exception &#123;</div><div class="line">            super.sessionCreated(session);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        @Override</div><div class="line">        public void sessionOpened(IoSession session) throws Exception &#123;</div><div class="line">            super.sessionOpened(session);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        @Override</div><div class="line">        public void sessionClosed(IoSession session) throws Exception &#123;</div><div class="line">            super.sessionClosed(session);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        @Override</div><div class="line">        public void sessionIdle(IoSession session, IdleStatus status) throws Exception &#123;</div><div class="line">            super.sessionIdle(session, status);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        @Override</div><div class="line">        public void exceptionCaught(IoSession session, Throwable cause) throws Exception &#123;</div><div class="line">            super.exceptionCaught(session, cause);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        @Override</div><div class="line">        public void messageReceived(IoSession session, Object message) throws Exception &#123;</div><div class="line">            String data = (String)message;</div><div class="line"></div><div class="line">            System.out.println(&quot;客户端接收到的服务端发来的消息如下:&quot; + data);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        @Override</div><div class="line">        public void messageSent(IoSession session, Object message) throws Exception &#123;</div><div class="line">            super.messageSent(session, message);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * client main</div><div class="line">     * @param args</div><div class="line">     */</div><div class="line">    public static void main(String[] args)&#123;</div><div class="line">        MinaClient client = new MinaClient();</div><div class="line"></div><div class="line">        client.runClient().checkConnection();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="3-rpc"><a href="#3-rpc" class="headerlink" title="3 rpc"></a>3 rpc</h2><p>普通socket的编程主要是服务端分发数据到客户端中,如果客户端只是通过调用一个借口就可以获取到数据的做法跟合适一下。具体的实现逻辑如下:</p>
<p>服务端代码:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div></pre></td><td class="code"><pre><div class="line">public class RpcServer &#123;</div><div class="line">    //服务集合</div><div class="line">    private Map&lt;String,Service&gt; serviceMap = new HashMap&lt;&gt;();</div><div class="line">    //服务端socket</div><div class="line">    private ServerSocket server = null;</div><div class="line">    //客户端结婚</div><div class="line">    private Vector&lt;Connection&gt; clients = new Vector&lt;&gt;();</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 初始化服务集合</div><div class="line">     * @return</div><div class="line">     */</div><div class="line">    public RpcServer initServiceMap() throws Exception&#123;</div><div class="line">        Service service = new Service();</div><div class="line">        service.setClazz(DataHandlerImpl.class);</div><div class="line">        service.setMethod(DataHandlerImpl.class.getMethod(&quot;getData&quot;));</div><div class="line"></div><div class="line">        this.serviceMap.put(&quot;获取带抓取url&quot;,service);</div><div class="line">        return this;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 启动服务</div><div class="line">     */</div><div class="line">    public RpcServer  runServer()&#123;</div><div class="line">        new Thread(new Runnable() &#123;</div><div class="line">            @Override</div><div class="line">            public void run() &#123;</div><div class="line">                try&#123;</div><div class="line">                    server = new ServerSocket(10010);</div><div class="line">                    while(true)&#123;</div><div class="line">                        Socket socket = server.accept();</div><div class="line"></div><div class="line">                        Connection conn = new Connection();</div><div class="line">                        conn.setIp(socket.getInetAddress().getHostAddress());</div><div class="line">                        conn.setSocket(socket);</div><div class="line"></div><div class="line">                        clients.add(conn);</div><div class="line">                    &#125;</div><div class="line">                &#125;catch (Exception e)&#123;</div><div class="line">                    e.printStackTrace();</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;).start();</div><div class="line">        return this;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 客户端获取数据</div><div class="line">     */</div><div class="line">    public RpcServer dealData()&#123;</div><div class="line">        new Thread(new Runnable() &#123;</div><div class="line">            @Override</div><div class="line">            public void run() &#123;</div><div class="line">                while(true)&#123;</div><div class="line">                    try&#123;</div><div class="line">                        for(Connection conn : clients)&#123;</div><div class="line">                            //获取客户发过来的消息</div><div class="line">                            String service = getData(conn.getSocket());</div><div class="line">                            if(service == null)continue;</div><div class="line"></div><div class="line">                            //向客户端发送执行的结果</div><div class="line">                            String result = execute(service);</div><div class="line">                            if(result == null)continue;</div><div class="line"></div><div class="line">                            //将结果发送给客户端</div><div class="line">                            sendData(conn.getSocket(),result);</div><div class="line">                        &#125;</div><div class="line"></div><div class="line">                        Thread.sleep(2000);</div><div class="line">                    &#125;catch (Exception e)&#123;</div><div class="line">                        e.printStackTrace();</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;).start();</div><div class="line">        return this;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 接收客户单发送过来的调用消息</div><div class="line">     * @param socket</div><div class="line">     * @return</div><div class="line">     */</div><div class="line">    public String getData(Socket socket)&#123;</div><div class="line">        try&#123;</div><div class="line">            BufferedReader br = new BufferedReader(new InputStreamReader(socket.getInputStream()));</div><div class="line">            return br.readLine();</div><div class="line">        &#125;catch (Exception e)&#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">        return null;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 根据服务名称进行调用</div><div class="line">     * @param servcie</div><div class="line">     * @return</div><div class="line">     */</div><div class="line">    public String execute(String servcie)&#123;</div><div class="line">        try&#123;</div><div class="line">            System.out.println(servcie);</div><div class="line">            Service data = serviceMap.get(servcie);</div><div class="line"></div><div class="line">            Method method = data.getMethod();</div><div class="line">            Object bean = data.getClazz().newInstance();</div><div class="line"></div><div class="line">            Object result = method.invoke(bean);</div><div class="line"></div><div class="line">            return (String)result;</div><div class="line">        &#125;catch (Exception e)&#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">        return null;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 发送结果给客户端</div><div class="line">     * @param socket</div><div class="line">     * @param result</div><div class="line">     */</div><div class="line">    public void sendData(Socket socket,String result) &#123;</div><div class="line">        try&#123;</div><div class="line">            BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(socket.getOutputStream()));</div><div class="line"></div><div class="line">            bw.write(result);</div><div class="line">            bw.newLine();</div><div class="line">            bw.flush();</div><div class="line">        &#125;catch (Exception e)&#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * rpc server</div><div class="line">     * @param args</div><div class="line">     */</div><div class="line">    public static void main(String[] args) throws  Exception&#123;</div><div class="line">        RpcServer server = new RpcServer();</div><div class="line"></div><div class="line">        server.initServiceMap().runServer().dealData();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>客户端代码:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div></pre></td><td class="code"><pre><div class="line">public class RpcClient &#123;</div><div class="line">    private String ip = &quot;127.0.0.1&quot;;</div><div class="line">    private int port = 10010;</div><div class="line">    private String servcie = &quot;获取带抓取url&quot;;</div><div class="line"></div><div class="line">    //客户端socket</div><div class="line">    private Socket socket = null;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 连接客户端</div><div class="line">     */</div><div class="line">    public RpcClient runClient()&#123;</div><div class="line">        try&#123;</div><div class="line">            socket = new Socket(ip,port);</div><div class="line">        &#125;catch (Exception e)&#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">        return this;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * 获取数据</div><div class="line">     */</div><div class="line">    public void getData()&#123;</div><div class="line">        new Thread(new Runnable() &#123;</div><div class="line">            @Override</div><div class="line">            public void run() &#123;</div><div class="line">                while(true)&#123;</div><div class="line">                    try&#123;</div><div class="line">                        //向客户端发送调用服务请求</div><div class="line">                        BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(socket.getOutputStream()));</div><div class="line">                        bw.write(servcie);</div><div class="line">                        bw.newLine();</div><div class="line">                        bw.flush();</div><div class="line"></div><div class="line">                        //获取调用结果</div><div class="line">                        BufferedReader br = new BufferedReader(new InputStreamReader(socket.getInputStream()));</div><div class="line">                        String result = br.readLine();</div><div class="line"></div><div class="line">                        System.out.println(&quot;客户端调用的结果如下:&quot; + result);</div><div class="line"></div><div class="line">                        Thread.sleep(1000);</div><div class="line">                    &#125;catch (Exception e)&#123;</div><div class="line">                        e.printStackTrace();</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;).start();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * rpc client</div><div class="line">     * @param args</div><div class="line">     */</div><div class="line">    public static void main(String[] args)&#123;</div><div class="line">        RpcClient client = new RpcClient();</div><div class="line">        client.runClient().getData();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="4-ice中间件"><a href="#4-ice中间件" class="headerlink" title="4 ice中间件"></a>4 ice中间件</h2><p>ice中间价其内部原理和rpc相似(我没有看过源码),从调用和配置的过程可以看出他的整个过程是配置一个接口脚本,通过一个插件或者是命令行编译的方式编译一下,生产相应的语言版本代码,生成好以后可以直接进行开发调用了。下面介绍一下在eclipse中开发基于ice中间件的分布式程序。</p>
<p>1 在eclipse中安装插件</p>
<p>使用eclipse的应用市场,位置在： help  -&gt; Eclipse Marketplace<br>在其中搜索ice,找到对应的版本，具体的截图日下:</p>
<p><img src="/images/spider/spider-ice.png" alt=""></p>
<p>选择安装就行了。</p>
<p>2 创建项目</p>
<p>创建一个java项目,就不赘述了。</p>
<p>3 创建ice的接口文件</p>
<p>在项目的根目录下创建一个slice的文件夹,在其中创建一个文件,文件类型为ice.具体的操作如下截图:</p>
<p><img src="/images/spider/spider-ice-interface.jpg" alt=""></p>
<p>如果我想定义一个接口,用于客户端调用,从服务端读取待抓取url.具体的格式如下:</p>
<p><img src="/images/spider/spider-ice-2.jpg" alt=""></p>
<p>说明:<br>module：表明是包<br>interface:接口名称<br>out: 表明是服务端输出的数据,在客户端获取这个值进行使用,如果没有out这个参数,比如remove这个方法,就是表示客户端输出这个参数的值,在服务端使用。</p>
<p>其中基本的数据类型是没有变化的,字符串用的是string.</p>
<p>4 编译接口文件</p>
<p>编译的方式有两种:</p>
<pre><code>使用插件编译
使用命令行编译
</code></pre><p>插件编译的截图如下:</p>
<p><img src="/images/spider/spider-ice-build.png" alt=""></p>
<p>使用命令行编译的话,需要在项目中新建一个source folder,文件名称为:generated,具体如下:</p>
<p><img src="/images/spider/spider-ice-source.png" alt=""></p>
<p>命令行代码如下：</p>
<p><img src="/images/spider/spider-ice-cmd.png" alt=""></p>
<p>5 编写分布式程序 服务端</p>
<p>服务端：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">public class IceServer &#123;</div><div class="line">	//服务端</div><div class="line">	private Ice.Communicator ic = null;</div><div class="line">	//状态码</div><div class="line">	private int status = 0;</div><div class="line">	</div><div class="line">	public void runServer()&#123;</div><div class="line">		try &#123;</div><div class="line">			ic = Ice.Util.initialize();</div><div class="line">			</div><div class="line">			Ice.ObjectAdapter adapter = ic.createObjectAdapterWithEndpoints(&quot;TaskServerAdapter&quot;, &quot;default -p 10010&quot;);</div><div class="line">			Ice.Object object = new TaskServer();</div><div class="line">			adapter.add(object, Ice.Util.stringToIdentity(&quot;TaskServer&quot;));</div><div class="line">			adapter.activate();</div><div class="line">			ic.waitForShutdown();</div><div class="line">		&#125; catch (Exception e) &#123;</div><div class="line">			e.printStackTrace();</div><div class="line">			status = 1;</div><div class="line">		&#125;finally&#123;</div><div class="line">			if(ic != null)&#123;</div><div class="line">				ic.destroy();</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		System.exit(status);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	/**</div><div class="line">	 * ice server</div><div class="line">	 * @param args</div><div class="line">	 */</div><div class="line">	public static void main(String[] args)&#123;</div><div class="line">		IceServer server = new IceServer();</div><div class="line">		server.runServer();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>数据处理类：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">public class TaskServer extends _TaskOperaDisp&#123;</div><div class="line">	private static final long serialVersionUID = 1L;</div><div class="line">	</div><div class="line">	/**</div><div class="line">	 * 绑定数据</div><div class="line">	 */</div><div class="line">	@Override</div><div class="line">	public void getUrl(StringHolder url, Current __current) &#123;</div><div class="line">		try&#123;</div><div class="line">			url.value = UUID.randomUUID().toString();</div><div class="line">		&#125;catch(Exception e)&#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	@Override</div><div class="line">	public void remove(String md5, Current __current) &#123;</div><div class="line">		// TODO Auto-generated method stub</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>6 编写分布式程序  客户端</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div></pre></td><td class="code"><pre><div class="line">public class IceClient &#123;</div><div class="line">	private Ice.Communicator ic = null;</div><div class="line">	private TaskOperaPrx getTask = null;</div><div class="line">	</div><div class="line">	private String ip = &quot;127.0.0.1&quot;;</div><div class="line">	private int port = 10010;</div><div class="line">	</div><div class="line">	private StringHolder url = new StringHolder();</div><div class="line">	</div><div class="line">	/**</div><div class="line">	 * 连接服务端</div><div class="line">	 * @param temp</div><div class="line">	 */</div><div class="line">	public IceClient connecteToIce(long temp) &#123;</div><div class="line">		System.out.println(&quot;准备连接server:[ip:&quot; + ip + &quot;,port:&quot; + port + &quot;]&quot;);</div><div class="line">		while (true) &#123;</div><div class="line">			try &#123;</div><div class="line">				ic = Ice.Util.initialize();</div><div class="line">				Ice.ObjectPrx base = ic.stringToProxy(&quot;TaskServer:default -h &quot; + ip + &quot; -p &quot; + port);</div><div class="line">				getTask = TaskOperaPrxHelper.checkedCast(base);</div><div class="line">				if(getTask != null)&#123;</div><div class="line">					break;</div><div class="line">				&#125;</div><div class="line">				System.out.println(&quot;连接失败,系统将休眠&quot; + temp + &quot;毫秒后继续...&quot;);</div><div class="line">				Thread.sleep(temp);</div><div class="line">			&#125; catch (Exception e) &#123;</div><div class="line">				e.printStackTrace();</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		return this;</div><div class="line">	&#125;</div><div class="line">	/**</div><div class="line">	 * 获取任务数据</div><div class="line">	 */</div><div class="line">	public void getData()&#123;</div><div class="line">		new Thread(new Runnable()&#123;</div><div class="line">			@Override</div><div class="line">			public void run() &#123;</div><div class="line">				while(true)&#123;</div><div class="line">					try&#123;</div><div class="line">						try&#123;</div><div class="line">							getTask.getUrl(url);</div><div class="line">							//打印结果数据</div><div class="line">							System.out.println(url.value);</div><div class="line">						&#125;catch(Exception e)&#123;</div><div class="line">							e.printStackTrace();</div><div class="line">						&#125;</div><div class="line">						</div><div class="line">						Thread.sleep(1000);</div><div class="line">					&#125;catch(Exception e)&#123;</div><div class="line">						e.printStackTrace();</div><div class="line">					&#125;</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;).start();</div><div class="line">	&#125;</div><div class="line">	/**</div><div class="line">	 * ice client</div><div class="line">	 * @param args</div><div class="line">	 */</div><div class="line">	public static void main(String[] args)&#123;</div><div class="line">		IceClient client = new IceClient();</div><div class="line">		client.connecteToIce(2000).getData();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="2-对等分布式"><a href="#2-对等分布式" class="headerlink" title="2 对等分布式"></a>2 对等分布式</h1><p>对等分布式和主从分布式的区别主要是：对等分布式中各个机器节点间是平等的,不存在谁是主,谁是从,每个节点做自己需要处理的数据。</p>
<p><img src="/images/spider/duidegn.png" alt=""></p>
<p>上面为对等爬虫的基本工作方式,每台机器从待抓取队列中读取应该分配给自己的待抓取url.主要的分配方式为:每个url通过hash取模的方式,算出应该分配给那一台机器进行下载处理。</p>
<p>举例：假设对于url www.baidu.com，计算器hash值H=8，m=3，则H mod m=2，因此由编号为2的服务器进行该链接的抓取。假设这时候是0号服务器拿到这个URL，那么它将该URL转给服务器2，由服务器2进行抓取。</p>
<p>这种情况下,有一个很大的问题,如果增加一台机器或者是减少一台机器就会出现所有的待抓取url的hash值都会变动。针对这样的情况,做出了优化,通过采用一致性哈希算法的方式确认每台机器节点的分工。结构图如下：</p>
<p><img src="/images/spider/spider-hash.png" alt=""></p>
<h2 id="6-一致性哈希算法"><a href="#6-一致性哈希算法" class="headerlink" title="6 一致性哈希算法"></a>6 一致性哈希算法</h2><p>在分布式的过程中,如果减少或者增加一台机器,所有url根据hash计算后的分配机器就会改变。在减少一台机器的情况下,如果能让原本分配给这台机器的数据分配给下一台机器就较少了数据分配的改动。在增加一台机器的情况下,如果只是上它上一台机器分配部分数据给它,也能减少数据分配的改动。</p>
<p>在这种想法下出现了环形hash映射方式,具体的是讲value映射到0-2^32 -1的数字空间中,我们想象为一个0到2^32-1 的一个首尾相接的环。</p>
<p><img src="/images/spider/spider-circle.png" alt=""></p>
<p>如果我们有3台机器,那么分别对着四台机器进行hash计算,算出一个值将这四台机器分布到这个环上4个点上。</p>
<p><img src="/images/spider/spider-object.png" alt=""></p>
<p>那么机器分布好了,剩下的数据应该分配给那台机器呢？针对待抓取的url按照hash函数计算到一个hash一个值,找到这个值对应的在环上的点,那么顺着这个点顺时针找到理它最近的一个机器节点,这个待抓取的url就分配给这台机器。具体的逻辑图如下：</p>
<p><img src="/images/spider/spider-data-yinshe.png" alt=""></p>
<p>那么问题来了：这样的分布是否满足删除一个节点或者是增加一个节点的需求呢？</p>
<p>如果增加一台机器,这台机器在环上映射一个点,具体的映射过程如下:</p>
<p><img src="/images/spider/hashadd.png" alt=""></p>
<p>如果删除一台机器话,映射的过程如下:</p>
<p><img src="/images/spider/hashremove.png" alt=""></p>
<h3 id="6-1-思考"><a href="#6-1-思考" class="headerlink" title="6.1 思考"></a>6.1 思考</h3><p>如果基于上面的想法,做成环型hash,那么如果我的机器比较少,如果有两台机器,那么圆就会被分为2份。</p>
<p>如果数据的hash都分布在其中的一个半圆中,那么久会导致其中一台机器负载严重超标。同样的情况,如果我是3台机器,那么也会出现这种现象,也就是一台机器覆盖严重,但是比2台的要好,对比发现机器越多,圆被划分的越细致,负载分布越均衡。</p>
<p>但是我们又没有那么多机器,所以考虑的结果是使用虚拟节点,比如：如果有3台机器(a,b,c),我映射为300台机器。 其中a,b,c各100台。那么这些映射的机器就可以均匀的分布在这个环上。具体的如下图:</p>
<p><img src="/images/spider/hashvirtual.png" alt=""></p>
<p>也就是说如果一个待抓取的数据对象映射到环上一个点,找到这个点最近的下一个虚拟机器节点,找到这个虚拟机器节点对应的真实节点,使用这台机器进行操作。那么就解决问题了。</p>
<h3 id="6-2-实现"><a href="#6-2-实现" class="headerlink" title="6.2 实现"></a>6.2 实现</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div></pre></td><td class="code"><pre><div class="line">public class ConsistentHash&lt;T&gt; &#123;</div><div class="line">    private final HashFunction hashFunction;</div><div class="line">    private final int numberOfReplicas;</div><div class="line">    private final SortedMap&lt;Long, T&gt; circle = new TreeMap&lt;&gt;();</div><div class="line"></div><div class="line">    public ConsistentHash(HashFunction hashFunction,int numberOfReplicas, Collection&lt;T&gt; nodes) &#123;</div><div class="line">        this.hashFunction = hashFunction;</div><div class="line">        this.numberOfReplicas = numberOfReplicas;</div><div class="line"></div><div class="line">        for (T node : nodes) &#123;</div><div class="line">            add(node);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void add(T node) &#123;</div><div class="line">        for (int i = 0; i &lt; numberOfReplicas; i++) &#123;</div><div class="line">            circle.put(hashFunction.hash(node.toString() + i),</div><div class="line">                    node);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void remove(T node) &#123;</div><div class="line">        for (int i = 0; i &lt; numberOfReplicas; i++) &#123;</div><div class="line">            circle.remove(hashFunction.hash(node.toString() + i));</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public T get(String key) &#123;</div><div class="line">        if (circle.isEmpty()) &#123;</div><div class="line">            return null;</div><div class="line">        &#125;</div><div class="line">        long hash = hashFunction.hash(key);</div><div class="line">        if (!circle.containsKey(hash)) &#123;</div><div class="line">            SortedMap&lt;Long, T&gt; tailMap =  circle.tailMap(hash);</div><div class="line">            hash = tailMap.isEmpty() ?</div><div class="line">                    circle.firstKey() : tailMap.firstKey();</div><div class="line">        &#125;</div><div class="line">        return circle.get(hash);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">public class Test &#123;</div><div class="line">    /**</div><div class="line">     * main函数</div><div class="line">     * @param args</div><div class="line">     */</div><div class="line">    public static void main(String[] args)&#123;</div><div class="line">        List&lt;Node&gt; list = new ArrayList&lt;&gt;();</div><div class="line">        list.add(new Node(&quot;ip1&quot;,1));</div><div class="line">        list.add(new Node(&quot;ip2&quot;,2));</div><div class="line">        list.add(new Node(&quot;ip3&quot;,3));</div><div class="line">        list.add(new Node(&quot;ip4&quot;,4));</div><div class="line">        list.add(new Node(&quot;ip5&quot;,5));</div><div class="line">        list.add(new Node(&quot;ip6&quot;,6));</div><div class="line"></div><div class="line">        ConsistentHash&lt;Node&gt; nodes = new ConsistentHash&lt;&gt;(new HashFunction(),10,list);</div><div class="line"></div><div class="line">        /***</div><div class="line">         * 常见一个集合,用于验证可靠性</div><div class="line">         * 1 随机生成10 0000 个字符串</div><div class="line">         * 2 这些字符串分布到环山</div><div class="line">         * 3 统计每个节点分配的数据个数</div><div class="line">         * 4 展示</div><div class="line">         */</div><div class="line">        Map&lt;String,Integer&gt; test = new HashMap&lt;&gt;();</div><div class="line">        for(int i=0;i&lt; 100000;i++)&#123;</div><div class="line">            String str = UUID.randomUUID().toString() + i;</div><div class="line"></div><div class="line">            Node  node = nodes.get(str);</div><div class="line"></div><div class="line">            if(!test.containsKey(node.getIp()))&#123;</div><div class="line">                test.put(node.getIp(),0);</div><div class="line">            &#125;</div><div class="line">            test.put(node.getIp(),test.get(node.getIp()) + 1);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        for(Map.Entry&lt;String,Integer&gt; entrty : test.entrySet())&#123;</div><div class="line">            System.out.println(entrty.getKey() + &quot;\t&quot; + (1.0 * entrty.getValue() / 100000));</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line">/**</div><div class="line"> * 节点</div><div class="line"> */</div><div class="line">class Node&#123;</div><div class="line">    private String ip;</div><div class="line">    private int port;</div><div class="line"></div><div class="line">    public Node(String ip,int port)&#123;</div><div class="line">        this.ip = ip;</div><div class="line">        this.port = port;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public String getIp() &#123;</div><div class="line">        return ip;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void setIp(String ip) &#123;</div><div class="line">        this.ip = ip;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public int getPort() &#123;</div><div class="line">        return port;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void setPort(int port) &#123;</div><div class="line">        this.port = port;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/7/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><span class="page-number current">8</span><a class="page-number" href="/page/9/">9</a><span class="space">&hellip;</span><a class="page-number" href="/page/16/">16</a><a class="extend next" rel="next" href="/page/9/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
           <!-- 多说热评文章 start -->
	<div class="ds-top-threads" data-range="daily" data-num-items="5"></div>
<!-- 多说热评文章 end -->
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"sunxing"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- 多说公共JS代码 end -->


           <section id="comments">
   <!-- 多说评论框 start -->
<div id="ds-thread" class="ds-thread" data-thread-key="<%= post.path %>" data-title="<%= post.title %>" data-url="<%= post.permalink %>"></div>
<!-- 多说评论框 end -->
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"sunxing"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- 多说公共JS代码 end -->
  </section>

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/default_avatar.jpg"
               alt="孙星" />
          <p class="site-author-name" itemprop="name">孙星</p>
          <p class="site-description motion-element" itemprop="description">sunxing's blog | mysql | java | scala | hadoop | spark | kafka | flume</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">78</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">13</span>
                <span class="site-state-item-name">分类</span>
              
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">16</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">孙星</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>


        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"sunxing"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
  





  
  
  

  

  
<script type="text/javascript" async src="//push.zhanzhang.baidu.com/push.js">
</script>


</body>
</html>
